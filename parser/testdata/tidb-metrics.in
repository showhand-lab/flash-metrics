binlog_pump_storage_storage_size_bytes
binlog_pump_storage_gc_ts
binlog_pump_storage_max_commit_ts
rate(binlog_pump_rpc_duration_seconds_count{method="WriteBinlog"}[1m])
histogram_quantile(0.99, rate(binlog_pump_rpc_duration_seconds_bucket{method="WriteBinlog"}[1m]))
histogram_quantile(0.95, rate(binlog_pump_rpc_duration_seconds_bucket{method="WriteBinlog"}[1m]))
histogram_quantile(0.99, rate(binlog_pump_storage_write_binlog_size_bucket[1m]))
histogram_quantile(0.95, rate(binlog_pump_storage_write_binlog_size_bucket[1m]))
histogram_quantile(0.99, rate(binlog_pump_storage_write_binlog_duration_time_bucket[1m]))
histogram_quantile(0.95, rate(binlog_pump_storage_write_binlog_duration_time_bucket[1m]))
rate(binlog_pump_storage_error_count[1m])
binlog_pump_storage_query_tikv_count
tidb_server_critical_error_total
binlog_drainer_checkpoint_tso{instance = "$drainer_instance"}
binlog_drainer_pump_position{instance = "$drainer_instance"}
sum(rate(binlog_drainer_read_binlog_size_count{instance = "$drainer_instance"}[1m])) by (nodeID)
histogram_quantile(0.95, rate(binlog_drainer_binlog_reach_duration_time_bucket{instance = "$drainer_instance"}[1m]))
binlog_drainer_error_count{instance = "$drainer_instance"}
irate(binlog_drainer_event{instance = "$drainer_instance"}[1m])
histogram_quantile(0.99, rate(binlog_drainer_execute_duration_time_bucket{instance = "$drainer_instance"}[1m]))
histogram_quantile(0.99, rate(binlog_drainer_query_duration_time_bucket{instance = "$drainer_instance"}[1m]))
histogram_quantile(0.95, rate(binlog_drainer_read_binlog_size_bucket{instance = "$drainer_instance"}[1m]))
binlog_drainer_ddl_jobs_total{instance = "$drainer_instance"}
binlog_drainer_queue_size{instance = "$drainer_instance"}
go_goroutines{job=~"binlog|pump|drainer"}
go_memstats_heap_inuse_bytes{job=~"binlog|pump|drainer"}
probe_duration_seconds{job="$PingJobHost"}
count(probe_success{group="tidb"} == 1)
count(probe_success{group="pd"} == 1)
count(probe_success{group="tikv"} == 1)
count(probe_success{group="pump"} == 1)
count(probe_success{group="drainer"} == 1)
count(probe_success{group="kafka"} == 1)
count(probe_success{group="zookeeper"} == 1)
count(probe_success{group="node_exporter"} == 1)
count(probe_success{group="blackbox_exporter"} == 1)
count(probe_success{group="grafana"} == 1)
count(probe_success{job="blackbox_exporter_http"} == 1)
count(probe_success{group="kafka_exporter"} == 1)

count(probe_success{group="tiflash"} == 1)
count(probe_success{group="tidb"} == 0)
count(probe_success{group="pd"} == 0)
count(probe_success{group="tikv"} == 0)
count(probe_success{group="pump"} == 0)
count(probe_success{group="drainer"} == 0)
count(probe_success{group="kafka"} == 0)
count(probe_success{group="zookeeper"} == 0)
count(probe_success{group="node_exporter"} == 0)
count(probe_success{group="blackbox_exporter"} == 0)
count(probe_success{group="grafana"} == 0)
count(probe_success{job="blackbox_exporter_http"} == 0)
count(probe_success{group="kafka_exporter"} == 0)
count(probe_success{group="tiflash"} == 0)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"(backup-worker|bkwkr).*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"backup_endpoint"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"(backup-worker|bkwkr).*"}[1m])) by (instance, tid) > 0
sum(tikv_backup_thread_pool_size{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by(instance)
sum(tikv_backup_thread_pool_size{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by(instance)
delta(tikv_backup_error_counter{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])
max(rate(tikv_backup_range_size_bytes_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", cf="write"}[1m])) by (le)
max(rate(tikv_backup_range_size_bytes_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", cf="default"}[1m])) by (le)
sum(rate(tikv_backup_range_size_bytes_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
rate(tikv_backup_range_size_bytes_sum{tidb_cluster="$tidb_cluster"}[1m])
max(rate(tikv_backup_range_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="snapshot"}[1m])) by (le)
max(rate(tikv_backup_range_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="scan"}[1m])) by (le)
max(rate(tikv_backup_range_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"save.*"}[1m])) by (le)
histogram_quantile(0.99, sum(rate(tikv_backup_range_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, type))
histogram_quantile(0.95, sum(rate(tikv_backup_range_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, type))
sum(rate(tikv_backup_range_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type) / sum(rate(tikv_backup_range_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
max(rate(tikv_external_storage_create_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le)
histogram_quantile(1, sum(rate(tikv_external_storage_create_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le,type))
histogram_quantile(0.99, sum(rate(tikv_external_storage_create_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le,type))
histogram_quantile(1, sum(rate(tikv_coprocessor_request_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", req=~"checksum.*|analyze.*"}[1m])) by (le,req))
histogram_quantile(0.99, sum(rate(tikv_coprocessor_request_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", req=~"checksum.*|analyze.*"}[1m])) by (le,req))
rate(node_disk_io_time_seconds_total{tidb_cluster="$tidb_cluster"}[1m])
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"sst_.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"sst_.*"}[1m])) by (instance, tid) > 0
count(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"sst_.*"}[1m])) by (instance)
count(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"sst_.*"}[1m])) by (instance)
delta(tikv_import_error_counter{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])
histogram_quantile(0.99, sum(rate(tikv_import_rpc_duration_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, request))
rate(node_disk_io_time_seconds_total{tidb_cluster="$tidb_cluster"}[1m])
max(rate(tikv_import_rpc_duration_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", request=~"download|write"}[1m])) by (le)
max(rate(tikv_import_download_duration_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="queue"}[1m])) by (le)
max(rate(tikv_import_download_duration_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="read"}[1m])) by (le)
max(rate(tikv_import_download_duration_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="rewrite"}[1m])) by (le)
max(rate(tikv_import_rpc_duration_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", request=~"ingest"}[1m])) by (le)
max(rate(tikv_import_ingest_duration_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"ingest"}[1m])) by (le)
max(rate(tikv_import_ingest_byte{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le)
sum(rate(tikv_import_download_bytes_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
rate(tikv_import_download_bytes_sum{tidb_cluster="$tidb_cluster"}[1m])
sum(tikv_raftstore_region_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="leader"}) by (instance)
delta(tikv_raftstore_region_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="leader"}[30s]) < -10
sum(tikv_raftstore_region_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="region"}) by (instance)
histogram_quantile(1, sum(rate(tikv_coprocessor_request_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", req=~"checksum.*|analyze.*"}[1m])) by (le,req))
histogram_quantile(0.99, sum(rate(tikv_coprocessor_request_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", req=~"checksum.*|analyze.*"}[1m])) by (le,req))
rate(node_disk_io_time_seconds_total{tidb_cluster="$tidb_cluster"}[1m])
(rate(node_disk_read_time_seconds_total{device=~"$device", instance="$host"}[1m]) / rate(node_disk_reads_completed_total{device=~"$device", instance="$host"}[1m])) or (irate(node_disk_read_time_seconds_total{device=~"$device", instance="$host"}[5m]) / irate(node_disk_reads_completed_total{device=~"$device", instance="$host"}[5m]))
(rate(node_disk_write_time_seconds_total{device=~"$device", instance="$host"}[1m]) / rate(node_disk_writes_completed_total{device=~"$device", instance="$host"}[1m])) or (irate(node_disk_write_time_seconds_total{device=~"$device", instance="$host"}[5m]) / irate(node_disk_writes_completed_total{device=~"$device", instance="$host"}[5m]))
rate(node_disk_reads_completed_total{device=~"$device", instance="$host"}[1m]) or irate(node_disk_reads_completed_total{device=~"$device", instance="$host"}[5m])
rate(node_disk_writes_completed_total{device=~"$device", instance="$host"}[1m]) or irate(node_disk_writes_completed_total{device=~"$device", instance="$host"}[5m])
rate(node_disk_read_bytes_total{device=~"$device", instance="$host"}[1m]) or irate(node_disk_read_bytes_total{device=~"$device", instance="$host"}[5m])
rate(node_disk_written_bytes_total{device=~"$device", instance="$host"}[1m]) or irate(node_disk_written_bytes_total{device=~"$device", instance="$host"}[5m])
rate(node_disk_read_time_seconds_total{device=~"$device", instance="$host"}[1m]) or irate(node_disk_read_time_seconds_total{device=~"$device", instance="$host"}[5m])
rate(node_disk_write_time_seconds_total{device=~"$device", instance="$host"}[1m]) or irate(node_disk_write_time_seconds_total{device=~"$device", instance="$host"}[5m])
rate(node_disk_io_time_seconds_total{device=~"$device", instance="$host"}[1m]) or irate(node_disk_io_time_seconds_total{device=~"$device", instance="$host"}[5m])
(1 + rate(node_disk_reads_merged_total{device=~"$device", instance="$host"}[1m]) / rate(node_disk_reads_completed_total{device=~"$device", instance="$host"}[1m])) or (1 + irate(node_disk_reads_merged_total{device=~"$device", instance="$host"}[5m]) / irate(node_disk_reads_completed_total{device=~"$device", instance="$host"}[5m]))
(1 + rate(node_disk_writes_merged_total{device=~"$device", instance="$host"}[1m]) / rate(node_disk_writes_completed_total{device=~"$device", instance="$host"}[1m])) or (1 + irate(node_disk_writes_merged_total{device=~"$device", instance="$host"}[5m]) / irate(node_disk_writes_completed_total{device=~"$device", instance="$host"}[5m]))
rate(node_disk_read_bytes_totalread{instance="$host", device=~"$device"}[1m]) * 512 / rate(node_disk_reads_completed_total{instance="$host", device=~"$device"}[1m]) or irate(node_disk_read_bytes_total{instance="$host", device=~"$device"}[5m]) * 512 / irate(node_disk_reads_completed_total{instance="$host", device=~"$device"}[5m])
rate(node_disk_written_bytes_total{instance="$host", device=~"$device"}[1m]) * 512 / rate(node_disk_writes_completed_total{instance="$host", device=~"$device"}[1m]) or irate(node_disk_written_bytes_total{instance="$host", device=~"$device"}[5m]) * 512 / irate(node_disk_writes_completed_total{instance="$host", device=~"$device"}[5m])
kafka_brokers
kafka_topic_partition_oldest_offset{topic="$topic"}
sum(kafka_topic_partition_current_offset{topic="$topic"})
sum (kafka_topic_partitions) by (topic)
sum(kafka_topic_partition_leader) by (topic, partition)
sum (kafka_topic_partition_replicas) by (topic, partition)
sum(kafka_topic_partition_in_sync_replica) by (topic, partition)
rate(tikv_import_write_chunk_bytes_sum{tidb_cluster="$tidb_cluster"}[1m])
sum(rate(tikv_import_upload_chunk_bytes_sum{tidb_cluster="$tidb_cluster"}[1m]))
1/rate(lightning_chunks{tidb_cluster="$tidb_cluster", state="finished"}[1m])
lightning_chunks{tidb_cluster="$tidb_cluster", state="finished"} / ignoring(state) lightning_chunks{tidb_cluster="$tidb_cluster", state="estimated"}
lightning_tables{tidb_cluster="$tidb_cluster", state="completed"} / ignoring(state) lightning_tables{tidb_cluster="$tidb_cluster", state="pending"}
lightning_tables{tidb_cluster="$tidb_cluster", result="failure"}
process_resident_memory_bytes{tidb_cluster="$tidb_cluster", job="tikv-importer"}
go_memstats_heap_inuse_bytes{tidb_cluster="$tidb_cluster", job="lightning"}
go_goroutines{tidb_cluster="$tidb_cluster", job="lightning"}
rate(process_cpu_seconds_total{tidb_cluster="$tidb_cluster", job="lightning"}[30s])*100
rate(process_cpu_seconds_total{tidb_cluster="$tidb_cluster", job="tikv-importer"}[30s])*100
lightning_idle_workers{tidb_cluster="$tidb_cluster"}
lightning_kv_encoder{tidb_cluster="$tidb_cluster", type="open"} - ignoring(type) lightning_kv_encoder{tidb_cluster="$tidb_cluster", type="closed"}
lightning_importer_engine{tidb_cluster="$tidb_cluster", type="open"} - ignoring(type) lightning_importer_engine{tidb_cluster="$tidb_cluster", type="closed"}
tikv_import_rpc_duration_count{tidb_cluster="$tidb_cluster", request="open_engine",result="ok"} - ignoring(request) tikv_import_rpc_duration_count{tidb_cluster="$tidb_cluster", request="close_engine",result="ok"}
min(tikv_config_rocksdb{tidb_cluster="$tidb_cluster", name="hard_pending_compaction_bytes_limit"}) by (instance)
rate(lightning_chunk_parser_read_block_seconds_sum{tidb_cluster="$tidb_cluster"}[30s]) / rate(lightning_chunk_parser_read_block_seconds_count{tidb_cluster="$tidb_cluster"}[30s])
rate(lightning_apply_worker_seconds_sum{tidb_cluster="$tidb_cluster", name = "io"}[30s]) /rate(lightning_apply_worker_seconds_count{tidb_cluster="$tidb_cluster", name = "io"}[30s])
rate(lightning_row_encode_seconds_sum{tidb_cluster="$tidb_cluster"}[30s]) / rate(lightning_row_encode_seconds_count{tidb_cluster="$tidb_cluster"}[30s])
rate(lightning_block_deliver_seconds_sum{tidb_cluster="$tidb_cluster"}[30s]) / rate(lightning_block_deliver_seconds_count{tidb_cluster="$tidb_cluster"}[30s])
rate(lightning_block_deliver_bytes_sum{tidb_cluster="$tidb_cluster"}[30s])
sum(rate(lightning_block_deliver_bytes_sum{tidb_cluster="$tidb_cluster"}[30s]))
lightning_row_read_bytes_sum{tidb_cluster="$tidb_cluster"}
lightning_block_deliver_bytes_sum{tidb_cluster="$tidb_cluster"}
pd_cluster_status{tidb_cluster="$tidb_cluster", type="storage_size"} / ignoring(type) pd_config_status{tidb_cluster="$tidb_cluster", type="max_replicas"}
rate(tikv_import_range_delivery_duration_sum{tidb_cluster="$tidb_cluster"}[30s]) / rate(tikv_import_range_delivery_duration_count{tidb_cluster="$tidb_cluster"}[30s])
rate(tikv_import_sst_delivery_duration_sum{tidb_cluster="$tidb_cluster"}[30s]) / rate(tikv_import_sst_delivery_duration_count{tidb_cluster="$tidb_cluster"}[30s])
rate(tikv_import_split_sst_duration_sum{tidb_cluster="$tidb_cluster"}[30s]) / rate(tikv_import_split_sst_duration_count{tidb_cluster="$tidb_cluster"}[30s])
rate(tikv_import_sst_upload_duration_sum{tidb_cluster="$tidb_cluster"}[30s]) / rate(tikv_import_sst_upload_duration_count{tidb_cluster="$tidb_cluster"}[30s])
rate(tikv_import_sst_ingest_duration_sum{tidb_cluster="$tidb_cluster"}[30s]) / rate(tikv_import_sst_ingest_duration_count{tidb_cluster="$tidb_cluster"}[30s])
rate(tikv_import_sst_chunk_bytes_sum{tidb_cluster="$tidb_cluster"}[30s])
count(node_cpu_seconds_total{instance="$host", mode="user"})
node_memory_MemTotal_bytes{instance=~"$host"}
node_memory_SwapTotal_bytes{instance="$host"}
node_time_seconds{instance="$host"} - node_boot_time_seconds{instance="$host"}
node_exporter_build_info
1 - (sum(rate(node_cpu_seconds_total{instance="$host", mode="idle"}[1m])) / count(node_cpu_seconds_total{instance="$host", mode="idle"}) or sum(irate(node_cpu_seconds_total{instance="$host", mode="idle"}[30s])) / count(node_cpu_seconds_total{instance="$host", mode="idle"}))
1 - (node_memory_MemAvailable_bytes{instance="$host"} or (node_memory_MemFree_bytes{instance="$host"} + node_memory_Buffers_bytes{instance="$host"} + node_memory_Cached_bytes{instance="$host"})) / node_memory_MemTotal_bytes{instance="$host"}
((node_memory_SwapTotal_bytes{instance=~"$node:$port",job=~"$job"} - node_memory_SwapFree_bytes{instance=~"$node:$port",job=~"$job"}) / (node_memory_SwapTotal_bytes{instance=~"$node:$port",job=~"$job"} )) * 100
node_load1{instance="$host"}
node_load5{instance="$host"}
node_load15{instance="$host"}
node_uname_info{instance=~"$host"}
node_uname_info{instance=~"$host"}
node_uname_info{instance=~"$host"}
rate(node_intr_total{instance="$host"}[1m]) or irate(node_intr_total{instance="$host"}[5m])
rate(node_forks_total{instance="$host"}[1m]) or irate(node_forks_total{instance="$host"}[5m])
rate(node_context_switches_total{instance="$host"}[1m]) or irate(node_context_switches_total{instance="$host"}[5m])
sum(rate(node_cpu_seconds_total{instance="$host"}[1m])) by (mode) * 100 / count(node_cpu_seconds_total{instance="$host"}) by (mode) or sum(irate(node_cpu_seconds_total{instance="$host"}[5m])) by (mode) * 100 / count(node_cpu_seconds_total{instance="$host"}) by (mode)
node_memory_MemTotal_bytes{instance="$host"}
node_memory_MemTotal_bytes{instance="$host"} - (node_memory_MemAvailable_bytes{instance="$host"} or (node_memory_MemFree_bytes{instance="$host"} + node_memory_Buffers_bytes{instance="$host"} + node_memory_Cached_bytes{instance="$host"}))
node_memory_MemAvailable_bytes{instance="$host"} or (node_memory_MemFree_bytes{instance="$host"} + node_memory_Buffers_bytes{instance="$host"} + node_memory_Cached_bytes{instance="$host"})
node_memory_MemTotal_bytes{instance="$host"} - (node_memory_MemFree_bytes{instance="$host"} + node_memory_Buffers_bytes{instance="$host"} + node_memory_Cached_bytes{instance="$host"})
node_memory_MemFree_bytes{instance="$host"}
node_memory_Buffers_bytes{instance="$host"}
node_memory_Cached_bytes{instance="$host"}
node_buddyinfo_blocks{instance="$host",zone="$buddyinfozone"}
node_memory_Inactive_bytes{instance=~"$host"}
node_memory_Active_bytes{instance=~"$host"}
node_memory_Writeback_bytes{instance=~"$host"}
node_memory_WritebackTmp_bytes{instance=~"$host"}
node_memory_Dirty_bytes{instance=~"$host"}
node_memory_Mapped_bytes{instance=~"$host"}
node_memory_Shmem_bytes{instance=~"$host"}
node_memory_Mlocked_bytes{instance=~"$host"}
node_memory_Slab_bytes{instance=~"$host"}
node_memory_MemFree_bytes{instance=~"$host"}
node_memory_KernelStack_bytes{instance=~"$host"}
node_memory_AnonHugePages_bytes{instance=~"$host"}
node_memory_AnonPages_bytes{instance=~"$host"}
node_memory_Hugepagesize_bytes{instance=~"$host"}
node_memory_HugePages_Free{instance=~"$host"}
node_memory_HugePages_Rsvd{instance=~"$host"}
node_memory_HugePages_Surp{instance=~"$host"}
node_memory_HugePages_Total{instance=~"$host"}
node_memory_Committed_AS_bytes{instance=~"$host"}
node_memory_CommitLimit_bytes{instance=~"$host"}
node_memory_SwapTotal_bytes{instance="$host"} - node_memory_SwapFree_bytes{instance="$host"}
node_memory_SwapFree_bytes{instance="$host"}
rate(node_vmstat_pswpin{instance="$host"}[1m]) * 4096 or irate(node_vmstat_pswpin{instance="$host"}[5m]) * 4096
rate(node_vmstat_pswpout{instance="$host"}[1m]) * 4096 or irate(node_vmstat_pswpout{instance="$host"}[5m]) * 4096
rate(node_vmstat_pgpgin{instance="$host"}[1m])
rate(node_vmstat_pgpgout{instance="$host"}[1m])
rate(node_vmstat_pswpout{instance="$host"}[1m])
rate(node_vmstat_pswpin{instance="$host"}[1m])
rate(node_vmstat_pgmajfault{instance="$host"}[1m])
rate(node_vmstat_pgfault{instance="$host"}[1m])
irate(node_vmstat_pgpgin{instance=~"$host"}[5m])
irate(node_vmstat_pgpgout{instance=~"$host"}[5m])
irate(node_vmstat_pswpin{instance=~"$host"}[5m])
irate(node_vmstat_pswpout{instance=~"$host"}[5m])
irate(node_vmstat_pgdeactivate{instance=~"$host"}[5m])
irate(node_vmstat_pgfree{instance=~"$host"}[5m])
irate(node_vmstat_pgactivate{instance=~"$host"}[5m])
irate(node_vmstat_allocstall{instance="$host"}[5m])
node_vmstat_drop_pagecache{instance=~"$host"}
node_vmstat_drop_slab{instance=~"$host"}
irate(node_vmstat_pgalloc_dma{instance=~"$host"}[5m])
irate(node_vmstat_pgalloc_dma32{instance=~"$host"}[5m])
irate(node_vmstat_pgalloc_movable{instance=~"$host"}[5m])
irate(node_vmstat_pgalloc_normal{instance=~"$host"}[5m])
irate(node_vmstat_numa_foreign{instance=~"$host"}[5m])
irate(node_vmstat_numa_hit{instance=~"$host"}[5m])
irate(node_vmstat_numa_interleave{instance=~"$host"}[5m])
irate(node_vmstat_numa_local{instance=~"$host"}[5m])
irate(node_vmstat_numa_miss{instance=~"$host"}[5m])
irate(node_vmstat_numa_other{instance=~"$host"}[5m])
irate(node_vmstat_numa_pages_migrated{instance=~"$host"}[5m])
irate(node_vmstat_pgmigrate_fail{instance=~"$host"}[5m])
irate(node_vmstat_pgmigrate_success{instance=~"$host"}[5m])
irate(node_vmstat_numa_hint_faults{instance=~"$host"}[5m])
irate(node_vmstat_numa_hint_faults_local{instance=~"$host"}[5m])
irate(node_vmstat_numa_pte_updates{instance=~"$host"}[5m])
irate(node_vmstat_numa_huge_pte_updates{instance=~"$host"}[5m])
node_memory_numa_MemUsed{instance="$host"} / node_memory_numa_MemTotal{instance="$host"}
node_memory_numa_MemFree{instance="$host"}
irate(node_vmstat_thp_split{instance=~"$host"}[5m])
irate(node_vmstat_thp_collapse_alloc{instance=~"$host"}[5m])
irate(node_vmstat_thp_collapse_alloc_failed{instance=~"$host"}[5m])
irate(node_vmstat_thp_zero_page_alloc{instance=~"$host"}[5m])
irate(node_vmstat_thp_zero_page_alloc_failed{instance=~"$host"}[5m])
irate(node_vmstat_thp_fault_alloc{instance=~"$host"}[5m])
irate(node_vmstat_thp_fault_fallback{instance=~"$host"}[5m])
irate(node_vmstat_compact_fail{instance=~"$host"}[5m])
irate(node_vmstat_compact_success{instance=~"$host"}[5m])
irate(node_vmstat_compact_stall{instance=~"$host"}[5m])
irate(node_vmstat_compact_isolated{instance=~"$host"}[5m])
irate(node_vmstat_compact_free_scanned{instance=~"$host"}[5m])
irate(node_vmstat_compact_migrate_scanned{instance=~"$host"}[5m])
node_load1{instance="$host"}
node_load5{instance="$host"}
node_load15{instance="$host"}
node_filesystem_size_bytes{instance="$host",device=~'^/.*'}
node_filesystem_readonly{instance="$host", device=~"/.*"}
1 - node_filesystem_avail_bytes{instance="$host", device=~'^/.*'} / node_filesystem_size_bytes{instance="$host", device=~'^/.*'}
rate(node_disk_io_time_seconds_total{instance="$host"}[1m]) or irate(node_disk_io_time_seconds_total{instance="$host"}[1m])
sum(rate(node_disk_reads_completed_total{instance=~"$host"}[5m]) + rate(node_disk_writes_completed_total{instance=~"$host"}[5m]))
(rate(node_disk_write_time_seconds_total{instance=~"$host"}[5m])/ rate(node_disk_writes_completed_total{instance=~"$host"}[5m]))
(rate(node_disk_read_time_seconds_total{instance=~"$host"}[5m])/ rate(node_disk_reads_completed_total{instance=~"$host"}[5m]))
irate(node_disk_read_bytes_total{instance=~"$host"}[5m]) + irate(node_disk_written_bytes_total{instance=~"$host"}[5m])
node_filesystem_device_error{instance=~"$host"}
((node_filesystem_size_bytes{instance=~"$host"} - node_filesystem_avail_bytes{instance=~"$host"}) / node_filesystem_size_bytes{instance=~"$host"}) * 100
node_filesystem_files_free{instance=~"$host"} / node_filesystem_files{instance=~"$host"}
node_filefd_allocated{instance="$host"}
node_filefd_maximum{instance="$host"}
(node_filefd_allocated{instance=~"$host"} / node_filefd_maximum{instance=~"$host"}) * 100
(process_open_fds{instance=~"$host"} / process_max_fds{instance=~"$host"}) * 100
node_network_up{instance=~"$host",interface!="lo"}
rate(node_network_receive_drop_total{instance=~"$host",device!="lo"}[5m])
rate(node_network_transmit_drop_total{instance=~"$host",device!="lo"}[5m])
rate(node_network_receive_errs_total{instance=~"$host",device!="lo"}[5m])
rate(node_network_transmit_errs_total{instance=~"$host",device!="lo"}[5m])
rate(node_network_receive_bytes_total{instance="$host", device!="lo"}[1m]) or irate(node_network_receive_bytes_total{instance="$host", device!="lo"}[5m])
rate(node_network_transmit_bytes_total{instance="$host", device!="lo"}[1m]) or irate(node_network_transmit_bytes_total{instance="$host", device!="lo"}[5m])
rate(node_network_receive_packets_total{instance=~"$host",device!="lo"}[1m]) or irate(node_network_receive_packets_total{instance=~"$host",device!="lo"}[5m])
rate(node_network_transmit_packets_total{instance=~"$host",device!="lo"}[1m]) or irate(node_network_transmit_packets_total{instance=~"$host",device!="lo"}[5m])
node_network_transmit_queue_length{instance=~"$host",interface!="lo"}
sum(increase(node_network_receive_bytes_total{instance="$host", device!="lo"}[1h]))
sum(increase(node_network_transmit_bytes_total{instance="$host", device!="lo"}[1h]))
node_sockstat_TCP_inuse{instance="$host"}
rate(node_netstat_Tcp_RetransSegs{instance=~"$host"}[1m]) or irate(node_netstat_Tcp_RetransSegs{instance=~"$host"}[5m])
node_netstat_Tcp_CurrEstab{instance=~"$host"}
node_procs_running{instance="$host"}
node_procs_blocked{instance="$host"}

count(probe_success{tidb_cluster="$tidb_cluster", group="tidb"} == 1)

count(probe_success{tidb_cluster="$tidb_cluster", group="pd"} == 1)

count(probe_success{tidb_cluster="$tidb_cluster", group="tikv"} == 1)

count(probe_success{tidb_cluster="$tidb_cluster", group="tiflash"} == 1)

count(probe_success{tidb_cluster="$tidb_cluster", group="pump"} == 1)

count(probe_success{tidb_cluster="$tidb_cluster", group="drainer"} == 1)

count(probe_success{tidb_cluster="$tidb_cluster", group="kafka"} == 1)

count(probe_success{tidb_cluster="$tidb_cluster", group="zookeeper"} == 1)

count(probe_success{tidb_cluster="$tidb_cluster", group="node_exporter"} == 1)

count(probe_success{tidb_cluster="$tidb_cluster", group="blackbox_exporter"} == 1)

count(probe_success{tidb_cluster="$tidb_cluster", group="grafana"} == 1)

count(probe_success{tidb_cluster="$tidb_cluster", job="blackbox_exporter_http"} == 1)

count(probe_success{tidb_cluster="$tidb_cluster", group="kafka_exporter"} == 1)

count(probe_success{tidb_cluster="$tidb_cluster", group="tidb"} == 0)

count(probe_success{tidb_cluster="$tidb_cluster", group="pd"} == 0)

count(probe_success{tidb_cluster="$tidb_cluster", group="tikv"} == 0)

count(probe_success{tidb_cluster="$tidb_cluster", group="tiflash"} == 0)

count(probe_success{tidb_cluster="$tidb_cluster", group="pump"} == 0)

count(probe_success{tidb_cluster="$tidb_cluster", group="drainer"} == 0)

count(probe_success{tidb_cluster="$tidb_cluster", group="kafka"} == 0)

count(probe_success{tidb_cluster="$tidb_cluster", group="zookeeper"} == 0)

count(probe_success{tidb_cluster="$tidb_cluster", group="node_exporter"} == 0)

count(probe_success{tidb_cluster="$tidb_cluster", group="blackbox_exporter"} == 0)

count(probe_success{tidb_cluster="$tidb_cluster", group="grafana"} == 0)

count(probe_success{tidb_cluster="$tidb_cluster", job="blackbox_exporter_http"} == 0)

count(probe_success{tidb_cluster="$tidb_cluster", group="kafka_exporter"} == 0)
pd_tso_role{tidb_cluster="$tidb_cluster", instance="$instance", dc="global"}
pd_cluster_status{tidb_cluster="$tidb_cluster", instance="$instance",type="storage_capacity"}
pd_cluster_status{tidb_cluster="$tidb_cluster", instance="$instance",type="storage_size"}
pd_cluster_status{tidb_cluster="$tidb_cluster", instance="$instance", type="leader_count"}
sum(pd_cluster_status{tidb_cluster="$tidb_cluster", instance="$instance", type="store_up_count"})
sum(pd_cluster_status{tidb_cluster="$tidb_cluster", instance="$instance", type="store_disconnected_count"})
sum(pd_cluster_status{tidb_cluster="$tidb_cluster", instance="$instance", type="store_unhealth_count"})
sum(pd_cluster_status{tidb_cluster="$tidb_cluster", instance="$instance", type="store_low_space_count"})
sum(pd_cluster_status{tidb_cluster="$tidb_cluster", instance="$instance", type="store_down_count"})
sum(pd_cluster_status{tidb_cluster="$tidb_cluster", instance="$instance", type="store_offline_count"})
sum(pd_cluster_status{tidb_cluster="$tidb_cluster", instance="$instance", type="store_tombstone_count"})
histogram_quantile(0.99, sum(rate(grpc_server_handling_seconds_bucket{tidb_cluster="$tidb_cluster", instance="$instance"}[5m])) by (grpc_method, le))
histogram_quantile(0.98, sum(rate(pd_client_request_handle_requests_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[30s])) by (type, le))
avg(rate(pd_client_request_handle_requests_duration_seconds_sum{tidb_cluster="$tidb_cluster"}[30s])) by (type) /  avg(rate(pd_client_request_handle_requests_duration_seconds_count{tidb_cluster="$tidb_cluster"}[30s])) by (type)
pd_regions_status{tidb_cluster="$tidb_cluster", instance="$instance"}
sum(pd_regions_status{tidb_cluster="$tidb_cluster"}) by (instance, type)
pd_hotspot_status{tidb_cluster="$tidb_cluster", instance="$instance",type="hot_write_region_as_leader"}
pd_hotspot_status{tidb_cluster="$tidb_cluster", instance="$instance",type="hot_read_region_as_leader"}
sum(delta(pd_scheduler_region_heartbeat{tidb_cluster="$tidb_cluster", instance="$instance", type="report", status="ok"}[1m])) by (store)
histogram_quantile(0.99, sum(rate(pd_scheduler_region_heartbeat_latency_seconds_bucket{tidb_cluster="$tidb_cluster"}[5m])) by (store, le))
sum(rate(tidb_executor_statement_total{tidb_cluster="$tidb_cluster"}[1m])) by (type)
histogram_quantile(0.999, sum(rate(tidb_server_handle_query_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(tidb_server_handle_query_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tidb_server_handle_query_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.80, sum(rate(tidb_server_handle_query_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
rate(tidb_server_query_total{tidb_cluster="$tidb_cluster"}[1m])
sum(increase(tidb_server_execute_error_total{tidb_cluster="$tidb_cluster"}[1m])) by (type)
tidb_server_connections{tidb_cluster="$tidb_cluster"}
sum(tidb_server_connections{tidb_cluster="$tidb_cluster"})
process_resident_memory_bytes{tidb_cluster="$tidb_cluster", job="tidb"}
go_memstats_heap_inuse_bytes{tidb_cluster="$tidb_cluster", job="tidb"}
sum(rate(tidb_session_transaction_duration_seconds_count{tidb_cluster="$tidb_cluster"}[1m])) by (type)
histogram_quantile(0.99, sum(rate(tidb_session_transaction_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tidb_session_transaction_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.80, sum(rate(tidb_session_transaction_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
sum(rate(tidb_tikvclient_txn_cmd_duration_seconds_count{tidb_cluster="$tidb_cluster"}[1m])) by (type)
histogram_quantile(0.99, sum(rate(tidb_tikvclient_txn_cmd_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, type))
sum(rate(pd_client_cmd_handle_cmds_duration_seconds_count{tidb_cluster="$tidb_cluster", type="tso"}[1m]))
sum(rate(pd_client_request_handle_requests_duration_seconds_count{tidb_cluster="$tidb_cluster", type="tso"}[1m]))
histogram_quantile(0.999, sum(rate(pd_client_cmd_handle_cmds_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type="tso"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(pd_client_cmd_handle_cmds_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type="tso"}[1m])) by (le))
histogram_quantile(0.90, sum(rate(pd_client_cmd_handle_cmds_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type="tso"}[1m])) by (le))
sum(rate(tidb_tikvclient_region_err_total{tidb_cluster="$tidb_cluster"}[1m])) by (type)
sum(rate(tidb_tikvclient_lock_resolver_actions_total{tidb_cluster="$tidb_cluster"}[1m])) by (type)
histogram_quantile(0.99, sum(rate(tidb_domain_load_schema_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, instance))
sum(rate(tidb_tikvclient_backoff_seconds_count{tidb_cluster="$tidb_cluster"}[1m])) by (type)
sum(tikv_raftstore_region_count{tidb_cluster="$tidb_cluster", type="leader"}) by (instance)
delta(tikv_raftstore_region_count{tidb_cluster="$tidb_cluster", type="leader"}[30s]) < -10
sum(tikv_raftstore_region_count{tidb_cluster="$tidb_cluster", type="region"}) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", job="tikv"}[1m])) by (instance)
avg(process_resident_memory_bytes{tidb_cluster="$tidb_cluster", job="tikv"}) by (instance)
sum(tikv_engine_size_bytes{tidb_cluster="$tidb_cluster"}) by (instance)
sum(tikv_engine_size_bytes{tidb_cluster="$tidb_cluster"}) by (type)
sum(rate(tikv_channel_full_total{tidb_cluster="$tidb_cluster"}[1m])) by (instance, type)
sum(rate(tikv_server_report_failure_msg_total{tidb_cluster="$tidb_cluster"}[1m])) by (type,instance,store_id)
sum(tikv_scheduler_contex_total{tidb_cluster="$tidb_cluster"}) by (instance)
sum(rate(tikv_coprocessor_executor_count{tidb_cluster="$tidb_cluster"}[1m])) by (type)
histogram_quantile(0.99, sum(rate(tikv_coprocessor_request_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le,req))
histogram_quantile(0.95, sum(rate(tikv_coprocessor_request_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le,req))
 sum(rate(tikv_coprocessor_request_duration_seconds_sum{tidb_cluster="$tidb_cluster", req="select"}[1m])) /  sum(rate(tikv_coprocessor_request_duration_seconds_count{tidb_cluster="$tidb_cluster", req="select"}[1m]))
 sum(rate(tikv_coprocessor_request_duration_seconds_sum{tidb_cluster="$tidb_cluster", req="index"}[1m])) /  sum(rate(tikv_coprocessor_request_duration_seconds_count{tidb_cluster="$tidb_cluster", req="index"}[1m]))
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", name=~"raftstore_.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", name=~"cop_.*"}[1m])) by (instance)
count(node_cpu_seconds_total{tidb_cluster="$tidb_cluster", mode="user"}) by (instance)
node_memory_MemTotal_bytes{tidb_cluster="$tidb_cluster"}
100 - avg by (instance) (irate(node_cpu_seconds_total{tidb_cluster="$tidb_cluster", mode="idle"}[1m]) ) * 100
node_load1{tidb_cluster="$tidb_cluster"}
node_memory_MemAvailable_bytes{tidb_cluster="$tidb_cluster"}
irate(node_network_receive_bytes_total{tidb_cluster="$tidb_cluster", device!="lo"}[5m])
irate(node_network_transmit_bytes_total{tidb_cluster="$tidb_cluster", device!="lo"}[5m])
irate(node_netstat_Tcp_RetransSegs{tidb_cluster="$tidb_cluster"}[1m])
irate(node_disk_io_time_seconds_total{tidb_cluster="$tidb_cluster"}[1m])
pd_tso_role{tidb_cluster="$tidb_cluster", instance="$instance", dc="global"}
sum(pd_cluster_status{tidb_cluster="$tidb_cluster", instance="$instance",type="storage_capacity"})
sum(pd_cluster_status{tidb_cluster="$tidb_cluster", instance="$instance",type="storage_size"})
sum(pd_cluster_status{tidb_cluster="$tidb_cluster", instance="$instance",type="storage_size"}) / sum(pd_cluster_status{tidb_cluster="$tidb_cluster", instance="$instance",type="storage_capacity"})
sum(pd_cluster_status{tidb_cluster="$tidb_cluster", instance="$instance",  type="store_up_count"})
sum(pd_cluster_status{tidb_cluster="$tidb_cluster", instance="$instance",type="leader_count"})
sum(pd_cluster_status{tidb_cluster="$tidb_cluster", instance="$instance", type="store_disconnected_count"})
sum(pd_cluster_status{tidb_cluster="$tidb_cluster", instance="$instance", type="store_unhealth_count"})
sum(pd_cluster_status{tidb_cluster="$tidb_cluster", instance="$instance", type="store_low_space_count"})
sum(pd_cluster_status{tidb_cluster="$tidb_cluster", instance="$instance", type="store_down_count"})
sum(pd_cluster_status{tidb_cluster="$tidb_cluster", instance="$instance", type="store_offline_count"})
sum(pd_cluster_status{tidb_cluster="$tidb_cluster", instance="$instance", type="store_tombstone_count"})
sum(pd_cluster_status{tidb_cluster="$tidb_cluster", instance="$instance", type="store_slow_count"})
pd_regions_status{tidb_cluster="$tidb_cluster", instance="$instance"}
sum(pd_regions_status{tidb_cluster="$tidb_cluster"}) by (instance, type)
pd_regions_offline_status{tidb_cluster="$tidb_cluster", type="offline-peer-region-count", instance="$instance"}
sum(pd_cluster_status{tidb_cluster="$tidb_cluster", instance="$instance",  type="region_count"})
pd_config_status{tidb_cluster="$tidb_cluster"}
pd_cluster_store_limit
pd_cluster_metadata{tidb_cluster="$tidb_cluster", instance="$instance"}
pd_regions_label_level{tidb_cluster="$tidb_cluster", instance="$instance"}
pd_cluster_placement_status{tidb_cluster="$tidb_cluster"}
pd_cluster_id{tidb_cluster="$tidb_cluster", instance="$instance"}
irate(process_cpu_seconds_total{tidb_cluster="$tidb_cluster",job=~".*pd.*"}[30s])
process_resident_memory_bytes{tidb_cluster="$tidb_cluster",job=~".*pd.*"}
go_memstats_heap_sys_bytes{tidb_cluster="$tidb_cluster",job=~".*pd.*"}
go_memstats_heap_inuse_bytes{tidb_cluster="$tidb_cluster",job=~".*pd.*"}
go_memstats_heap_alloc_bytes{tidb_cluster="$tidb_cluster",job=~".*pd.*"}
go_memstats_heap_idle_bytes{tidb_cluster="$tidb_cluster",job=~".*pd.*"}
go_memstats_heap_released_bytes{tidb_cluster="$tidb_cluster",job=~".*pd.*"}
go_memstats_next_gc_bytes{tidb_cluster="$tidb_cluster",job=~".*pd.*"}
(time() - process_start_time_seconds{tidb_cluster="$tidb_cluster",job=~".*pd.*"})
go_goroutines{tidb_cluster="$tidb_cluster",job=~".*pd.*"}
pd_cluster_tso{instance="$instance", type="tso", dc="global"}
sum(pd_cluster_tso_gap_millionseconds{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (dc)
pd_cluster_tso{instance="$instance", type="tso", dc="global"}
sum(delta(pd_schedule_operators_count{tidb_cluster="$tidb_cluster", instance="$instance", event="create"}[1m])) by (type)
sum(delta(pd_schedule_operators_count{tidb_cluster="$tidb_cluster", instance="$instance", event="check"}[1m])) by (type)
sum(delta(pd_schedule_operators_count{tidb_cluster="$tidb_cluster", instance="$instance", event="finish"}[1m])) by (type)
sum(delta(pd_schedule_operators_count{tidb_cluster="$tidb_cluster", instance="$instance", event="timeout"}[1m])) by (type)
sum(delta(pd_schedule_operators_count{tidb_cluster="$tidb_cluster", instance="$instance", event="cancel"}[1m])) by (type)
sum(delta(pd_schedule_operators_count{tidb_cluster="$tidb_cluster", instance="$instance", event="replace"}[1m])) by (type)
sum(delta(pd_schedule_operators_count{tidb_cluster="$tidb_cluster", instance="$instance"}[1m])) by (event)
histogram_quantile(0.99, sum(rate(pd_schedule_finish_operators_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[5m])) by (type, le))
histogram_quantile(0.95, sum(rate(pd_schedule_finish_operators_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[5m])) by (type, le))
histogram_quantile(0.99, sum(rate(pd_schedule_finish_operator_steps_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[5m])) by (type, le))
histogram_quantile(0.95, sum(rate(pd_schedule_finish_operator_steps_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[5m])) by (type, le))
sum(delta(pd_schedule_operator_limit{tidb_cluster="$tidb_cluster", instance="$instance"}[1m])) by (type,name)
pd_scheduler_store_status{tidb_cluster="$tidb_cluster", store=~"$store", instance="$instance",  type="store_capacity"}
{tidb_cluster="$tidb_cluster", store=~"$store", instance="$instance",  type="store_available"}
pd_scheduler_store_status{tidb_cluster="$tidb_cluster", store=~"$store", instance="$instance",  type="store_used"}
sum(pd_scheduler_store_status{tidb_cluster="$tidb_cluster", store=~"$store", instance="$instance",  type="store_available"}) by (address, store) / sum(pd_scheduler_store_status{tidb_cluster="$tidb_cluster", instance="$instance",  type="store_capacity"}) by (address, store)
sum(pd_scheduler_store_status{tidb_cluster="$tidb_cluster", store=~"$store", instance="$instance",  type="region_size"}) by (address, store) / sum(pd_scheduler_store_status{tidb_cluster="$tidb_cluster", instance="$instance",  type="store_used"}) by (address, store) * 2^20
pd_scheduler_store_status{tidb_cluster="$tidb_cluster", store=~"$store", instance="$instance",  type="region_score"}
pd_scheduler_op_influence{tidb_cluster="$tidb_cluster", instance="$instance",scheduler="balance-region-scheduler"}
pd_scheduler_tolerant_resource{tidb_cluster="$tidb_cluster", instance="$instance",scheduler="balance-region-scheduler"}
pd_scheduler_store_status{tidb_cluster="$tidb_cluster", store=~"$store", instance="$instance",  type="leader_score"}
pd_scheduler_store_status{tidb_cluster="$tidb_cluster", store=~"$store", instance="$instance",  type="region_size"}
pd_scheduler_store_status{tidb_cluster="$tidb_cluster", store=~"$store", instance="$instance",  type="leader_size"}
pd_scheduler_store_status{tidb_cluster="$tidb_cluster", store=~"$store", instance="$instance",  type="region_count"}
pd_scheduler_store_status{tidb_cluster="$tidb_cluster", store=~"$store", instance="$instance",  type="leader_count"}
pd_hotspot_status{tidb_cluster="$tidb_cluster", store=~"$store", instance="$instance", type="hot_write_region_as_leader"}
pd_hotspot_status{tidb_cluster="$tidb_cluster", store=~"$store", instance="$instance", type="hot_write_region_as_peer"}
pd_scheduler_store_status{tidb_cluster="$tidb_cluster", store=~"$store", type="store_write_rate_bytes"}
pd_scheduler_store_status{tidb_cluster="$tidb_cluster", store=~"$store", type="store_regions_write_rate_bytes"}
pd_hotspot_status{tidb_cluster="$tidb_cluster", store=~"$store", instance="$instance", type="total_write_keys_as_leader"}
pd_scheduler_store_status{tidb_cluster="$tidb_cluster", store=~"$store", type="store_write_rate_keys"}
pd_scheduler_store_status{tidb_cluster="$tidb_cluster", store=~"$store", type="store_regions_write_rate_keys"}
pd_scheduler_store_status{tidb_cluster="$tidb_cluster", store=~"$store", type="store_write_query_rate"}
pd_hotcache_status{tidb_cluster="$tidb_cluster", name="total_length", store=~"store-$store", type="write"}
rate(pd_scheduler_hot_region{tidb_cluster="$tidb_cluster", store=~"$store", type=~".*store.*"}[1m])
- sum(delta(pd_scheduler_hot_region_direction{tidb_cluster="$tidb_cluster", store=~"$store",type="transfer-leader",direction="out",rw="write"}[1m]))by (store)
sum(delta(pd_scheduler_hot_region_direction{tidb_cluster="$tidb_cluster", store=~"$store",type="transfer-leader",direction="in",rw="write"}[1m]))by (store)
- sum(delta(pd_scheduler_hot_region_direction{tidb_cluster="$tidb_cluster", store=~"$store",type="move-peer",direction="out",rw="write"}[1m]))by (store)
sum(delta(pd_scheduler_hot_region_direction{tidb_cluster="$tidb_cluster", store=~"$store",type="move-peer",direction="in",rw="write"}[1m]))by (store)
pd_hotcache_flow_queue_status{tidb_cluster="$tidb_cluster", type="write"}
pd_hotspot_status{tidb_cluster="$tidb_cluster", store=~"$store", instance="$instance", type="hot_read_region_as_peer"}
pd_hotspot_status{tidb_cluster="$tidb_cluster", store=~"$store", instance="$instance", type="hot_read_region_as_leader"}
pd_scheduler_store_status{tidb_cluster="$tidb_cluster", store=~"$store", type="store_read_rate_bytes"}
pd_scheduler_store_status{tidb_cluster="$tidb_cluster", store=~"$store", type="store_read_rate_keys"}
pd_scheduler_store_status{tidb_cluster="$tidb_cluster", store=~"$store", type="store_read_query_rate"}
- sum(delta(pd_scheduler_hot_region_direction{tidb_cluster="$tidb_cluster", store=~"$store",type="transfer-leader",direction="out",rw="read"}[1m]))by (store)
sum(delta(pd_scheduler_hot_region_direction{tidb_cluster="$tidb_cluster", store=~"$store",type="transfer-leader",direction="in",rw="read"}[1m]))by (store)
- sum(delta(pd_scheduler_hot_region_direction{tidb_cluster="$tidb_cluster", store=~"$store",type="move-peer",direction="out",rw="read"}[1m]))by (store)
sum(delta(pd_scheduler_hot_region_direction{tidb_cluster="$tidb_cluster", store=~"$store",type="move-peer",direction="in",rw="read"}[1m]))by (store)
- sum(delta(pd_scheduler_hot_region_direction{tidb_cluster="$tidb_cluster", store=~"$store",type="move-leader",direction="out",rw="read"}[1m]))by (store)
sum(delta(pd_scheduler_hot_region_direction{tidb_cluster="$tidb_cluster", store=~"$store",type="move-leader",direction="in",rw="read"}[1m]))by (store)
pd_hotcache_status{tidb_cluster="$tidb_cluster", name="total_length", store=~"store-$store", type="read"}
pd_hotcache_flow_queue_status{tidb_cluster="$tidb_cluster", type="read"}
pd_scheduler_status{tidb_cluster="$tidb_cluster", type="allow",instance="$instance"}
-sum(delta(pd_scheduler_balance_leader{tidb_cluster="$tidb_cluster", store=~"$store-out", instance="$instance", type="move-leader"}[1m])) by (store)
sum(delta(pd_scheduler_balance_leader{tidb_cluster="$tidb_cluster", store=~"$store-in", instance="$instance", type="move-leader"}[1m])) by (store)
-sum(delta(pd_scheduler_balance_region{tidb_cluster="$tidb_cluster", store=~"$store-out", instance="$instance", type="move-peer"}[1m])) by (store)
sum(delta(pd_scheduler_balance_region{tidb_cluster="$tidb_cluster", store=~"$store-in", instance="$instance", type="move-peer"}[1m])) by (store)
sum(delta(pd_scheduler_balance_leader{tidb_cluster="$tidb_cluster", store=~"$store", instance="$instance", type!="move-leader"}[30s])) by (type, address, store)
sum(delta(pd_scheduler_balance_region{tidb_cluster="$tidb_cluster", store=~"$store", instance="$instance"}[30s])) by (type, address, store)
sum(delta(pd_scheduler_event_count{tidb_cluster="$tidb_cluster", instance="$instance", type="balance-leader-scheduler"}[5m])) by (name)
sum(delta(pd_scheduler_event_count{tidb_cluster="$tidb_cluster", instance="$instance", type="balance-region-scheduler"}[5m])) by (name)
sum(delta(pd_scheduler_balance_direction{tidb_cluster="$tidb_cluster", instance="$instance"}[1m])) by (type, source, target)
pd_checker_patrol_regions_time{tidb_cluster="$tidb_cluster", instance="$instance"}
sum(delta(pd_checker_event_count{tidb_cluster="$tidb_cluster", instance="$instance", type="rule_checker"}[1m])) by (name)
sum(delta(pd_checker_event_count{tidb_cluster="$tidb_cluster", instance="$instance", type="replica_checker"}[1m])) by (name)
sum(delta(pd_checker_event_count{tidb_cluster="$tidb_cluster", instance="$instance", type="merge_checker"}[1m])) by (name)
sum(delta(pd_schedule_filter{tidb_cluster="$tidb_cluster", store=~"$store", action="filter-source"}[1m])) by (store, type, scope)
sum(delta(pd_schedule_filter{tidb_cluster="$tidb_cluster", store=~"$store", action="filter-target"}[1m])) by (store, type, scope)
sum(delta(pd_schedule_filter{tidb_cluster="$tidb_cluster", action="filter-target",type="distinct-filter"}[1m])) by (source, target, type, scope)
sum(delta(pd_schedule_filter{tidb_cluster="$tidb_cluster", action="filter-target",type="rule-fit-filter"}[1m])) by (source, target, type, scope)
sum(delta(pd_schedule_filter{tidb_cluster="$tidb_cluster", action="filter-target",type="rule-fit-leader-filter"}[1m])) by (source, target, type, scope)
sum(delta(pd_schedule_scatter_operators_count{tidb_cluster="$tidb_cluster", instance="$instance", type="skip"}[1m])) by (event)
delta(pd_schedule_scatter_operators_count{tidb_cluster="$tidb_cluster", instance="$instance", type="fail"}[1m])
delta(pd_schedule_scatter_operators_count{tidb_cluster="$tidb_cluster", instance="$instance", type="success"}[1m])
sum(delta(pd_schedule_scatter_distribution{tidb_cluster="$tidb_cluster", instance="$instance",engine="tikv",is_leader="false"}[1m])) by (store)
sum(delta(pd_schedule_scatter_distribution{tidb_cluster="$tidb_cluster", instance="$instance",engine="tikv",is_leader="true"}[1m])) by (store)
sum(rate(grpc_server_handling_seconds_count{tidb_cluster="$tidb_cluster", instance="$instance"}[1m])) by (grpc_method)
histogram_quantile(0.99, sum(rate(grpc_server_handling_seconds_bucket{tidb_cluster="$tidb_cluster", instance="$instance"}[5m])) by (grpc_method, le))
etcd_debugging_mvcc_db_total_size_in_bytes{tidb_cluster="$tidb_cluster", job="pd"}
sum(rate(pd_txn_handle_txns_duration_seconds_count{tidb_cluster="$tidb_cluster"}[5m])) by (instance, result)
histogram_quantile(0.99, sum(rate(pd_txn_handle_txns_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[5m])) by (instance, result, le))
histogram_quantile(0.99, sum(rate(etcd_network_peer_round_trip_time_seconds_bucket{tidb_cluster="$tidb_cluster"}[5m])) by (instance, To, le))
histogram_quantile(0.99, sum(rate(etcd_disk_wal_fsync_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[5m])) by (instance, le))
delta(etcd_disk_wal_fsync_duration_seconds_count{tidb_cluster="$tidb_cluster", job="pd"}[1m])
delta(etcd_disk_wal_fsync_duration_seconds_count{tidb_cluster="$tidb_cluster", job="pd"}[1m])
histogram_quantile(0.99, sum(rate(etcd_disk_backend_commit_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[5m])) by (instance, le))
delta(etcd_disk_backend_commit_duration_seconds_count{tidb_cluster="$tidb_cluster"}[1m])
pd_server_etcd_state{tidb_cluster="$tidb_cluster", type="term"}
pd_server_etcd_state{tidb_cluster="$tidb_cluster", type="committedIndex"}
pd_server_etcd_state{tidb_cluster="$tidb_cluster", type="appliedIndex"}
histogram_quantile(0.99, sum(rate(pd_server_handle_tso_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[30s])) by (type, le))
histogram_quantile(0.99999, sum(rate(pd_server_handle_tso_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[30s])) by (type, le))
histogram_quantile(0.98, sum(rate(pd_client_request_handle_requests_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[30s])) by (type, le))
avg(rate(pd_client_request_handle_requests_duration_seconds_sum{tidb_cluster="$tidb_cluster"}[30s])) by (type) /  avg(rate(pd_client_request_handle_requests_duration_seconds_count{tidb_cluster="$tidb_cluster"}[30s])) by (type)
sum(rate(pd_client_request_handle_requests_duration_seconds_count{tidb_cluster="$tidb_cluster"}[1m])) by (type)
sum(rate(pd_cluster_region_event{tidb_cluster="$tidb_cluster", store=~"$store", instance="$instance"}[1m])) by (address, store, event)
histogram_quantile(0.99, sum(rate(pd_scheduler_handle_region_heartbeat_duration_seconds_bucket{tidb_cluster="$tidb_cluster", store=~"$store"}[1m])) by (address, store, le))
sum(delta(pd_scheduler_region_heartbeat{tidb_cluster="$tidb_cluster", store=~"$store", instance="$instance", type="report", status="ok"}[1m])) by (address, store)
sum(rate(pd_scheduler_region_heartbeat{tidb_cluster="$tidb_cluster", store=~"$store", type="push",instance="$instance"}[5m])*60) by (address, store, status)
sum(delta(pd_scheduler_region_heartbeat{tidb_cluster="$tidb_cluster", store=~"$store", instance="$instance", type="report", status="err"}[1m])) by (address, store)
sum(delta(pd_scheduler_region_heartbeat{tidb_cluster="$tidb_cluster", store=~"$store", instance="$instance", type="report", status="bind"}[1m])) by (address, store)
histogram_quantile(0.99, sum(rate(pd_scheduler_handle_store_heartbeat_duration_seconds_bucket{tidb_cluster="$tidb_cluster", store=~"$store"}[1m])) by (address, store, le))
sum(delta(pd_hbstream_region_message{tidb_cluster="$tidb_cluster", store=~"$store", instance="$instance", type="push", status="ok"}[1m])) by (address, store)
sum(delta(pd_hbstream_region_message{tidb_cluster="$tidb_cluster", store=~"$store", instance="$instance", type="push", status="err"}[1m])) by (address, store)
sum(delta(pd_scheduler_read_byte_hist_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le)
sum(delta(pd_scheduler_write_byte_hist_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le)
sum(delta(pd_scheduler_read_key_hist_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le)
sum(delta(pd_scheduler_write_key_hist_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le)
sum(delta(pd_scheduler_store_heartbeat_interval_hist_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le)
sum(delta(pd_scheduler_region_heartbeat_interval_hist_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le)
pd_region_syncer_status{tidb_cluster="$tidb_cluster", type="sync_index"}
pd_region_syncer_status{tidb_cluster="$tidb_cluster", type="last_index"}
histogram_quantile(0.999, sum(rate(tidb_server_handle_query_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(tidb_server_handle_query_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tidb_server_handle_query_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.80, sum(rate(tidb_server_handle_query_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(tidb_server_get_token_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
tidb_server_connections{tidb_cluster="$tidb_cluster"}
sum(tidb_server_connections{tidb_cluster="$tidb_cluster"})
go_memstats_heap_inuse_bytes{tidb_cluster="$tidb_cluster", job=~"tidb.*"}
histogram_quantile(0.99, sum(rate(tidb_session_parse_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, sql_type))
histogram_quantile(0.99, sum(rate(tidb_session_compile_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, sql_type))
histogram_quantile(0.99, sum(rate(tidb_session_transaction_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, sql_type))
histogram_quantile(0.95, sum(rate(tidb_session_transaction_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, sql_type))
histogram_quantile(0.80, sum(rate(tidb_session_transaction_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, sql_type))
histogram_quantile(0.99, sum(rate(tidb_session_transaction_statement_num_bucket{tidb_cluster="$tidb_cluster"}[30s])) by (le, sql_type))
histogram_quantile(0.80, sum(rate(tidb_session_transaction_statement_num_bucket{tidb_cluster="$tidb_cluster"}[30s])) by (le, sql_type))
histogram_quantile(1.0, sum(rate(tidb_session_retry_num_bucket{tidb_cluster="$tidb_cluster"}[30s])) by (le))
histogram_quantile(0.99, sum(rate(tidb_session_retry_num_bucket{tidb_cluster="$tidb_cluster"}[30s])) by (le))
histogram_quantile(0.90, sum(rate(tidb_session_retry_num_bucket{tidb_cluster="$tidb_cluster"}[30s])) by (le))
histogram_quantile(0.999, sum(rate(tidb_tikvclient_txn_cmd_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type=~"get|batch_get|seek|seek_reverse"}[1m])) by (le, type))
histogram_quantile(0.99, sum(rate(tidb_tikvclient_txn_cmd_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type=~"get|batch_get|seek|seek_reverse"}[1m])) by (le, type))
sum(rate(tidb_tikvclient_lock_resolver_actions_total{tidb_cluster="$tidb_cluster"}[1m])) by (type)
histogram_quantile(0.99, sum(rate(tidb_tikvclient_backoff_seconds_bucket{tidb_cluster="$tidb_cluster"}[5m])) by (le, type))
sum(rate(tidb_tikvclient_backoff_seconds_count{tidb_cluster="$tidb_cluster"}[1m])) by (type)
histogram_quantile(0.999, sum(rate(pd_client_cmd_handle_cmds_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type="tso"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(pd_client_cmd_handle_cmds_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type="tso"}[1m])) by (le))
histogram_quantile(0.90, sum(rate(pd_client_cmd_handle_cmds_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type="tso"}[1m])) by (le))
histogram_quantile(0.999, sum(rate(pd_client_request_handle_requests_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type="tso"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(pd_client_request_handle_requests_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type="tso"}[1m])) by (le))
histogram_quantile(0.90, sum(rate(pd_client_request_handle_requests_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type="tso"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(tikv_grpc_msg_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type=~"kv_get|kv_batch_get|coprocessor"}[5m])) by (le, type))
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", name=~"grpc.*"}[1m])) by (instance, name)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", name=~"store_read.*"}[1m])) by (instance)
histogram_quantile(1, sum(rate(tikv_coprocessor_request_wait_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le,req))
histogram_quantile(0.99, sum(rate(tikv_coprocessor_request_wait_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le,req))
histogram_quantile(1, sum(rate(tikv_coprocessor_request_handle_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le,req))
histogram_quantile(0.99, sum(rate(tikv_coprocessor_request_handle_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le,req))
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", name=~"cop_.*"}[1m])) by (instance)
max(tikv_engine_get_micro_seconds{tidb_cluster="$tidb_cluster", db="kv",type="get_max"})
max(tikv_engine_get_micro_seconds{tidb_cluster="$tidb_cluster", db="kv",type="get_percentile99"})
max(tikv_engine_get_micro_seconds{tidb_cluster="$tidb_cluster", db="kv",type="get_percentile95"})
max(tikv_engine_get_micro_seconds{tidb_cluster="$tidb_cluster", db="kv",type="get_average"})
sum(rate(tikv_engine_memtable_efficiency{tidb_cluster="$tidb_cluster", db="kv", type="memtable_hit"}[1m]))
sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", db="kv", type=~"block_cache_data_hit|block_cache_filter_hit"}[1m]))
sum(rate(tikv_engine_get_served{tidb_cluster="$tidb_cluster", db="kv", type="get_hit_l0"}[1m]))
sum(rate(tikv_engine_get_served{tidb_cluster="$tidb_cluster", db="kv", type="get_hit_l1"}[1m]))
sum(rate(tikv_engine_get_served{tidb_cluster="$tidb_cluster", db="kv", type="get_hit_l2_and_up"}[1m]))
max(tikv_engine_seek_micro_seconds{tidb_cluster="$tidb_cluster", db="kv",type="seek_max"})
max(tikv_engine_seek_micro_seconds{tidb_cluster="$tidb_cluster", db="kv",type="seek_percentile99"})
max(tikv_engine_seek_micro_seconds{tidb_cluster="$tidb_cluster", db="kv",type="seek_percentile95"})
max(tikv_engine_seek_micro_seconds{tidb_cluster="$tidb_cluster", db="kv",type="seek_average"})
sum(rate(tikv_engine_locate{tidb_cluster="$tidb_cluster", db="kv", type="number_db_seek"}[1m]))
sum(rate(tikv_engine_locate{tidb_cluster="$tidb_cluster", db="kv", type="number_db_seek_found"}[1m]))
sum(rate(tikv_engine_locate{tidb_cluster="$tidb_cluster", db="kv", type="number_db_next"}[1m]))
sum(rate(tikv_engine_locate{tidb_cluster="$tidb_cluster", db="kv", type="number_db_next_found"}[1m]))
sum(rate(tikv_engine_locate{tidb_cluster="$tidb_cluster", db="kv", type="number_db_prev"}[1m]))
sum(rate(tikv_engine_locate{tidb_cluster="$tidb_cluster", db="kv", type="number_db_prev_found"}[1m]))
sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_hit"}[1m])) / (sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", db="$db", type="block_cache_hit"}[1m])) + sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", db="$db", type="block_cache_miss"}[1m])))
sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", db="kv", type="block_cache_data_hit"}[1m])) / (sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", db="kv", type="block_cache_data_hit"}[1m])) + sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", db="kv", type="block_cache_data_miss"}[1m])))
sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", db="kv", type="block_cache_filter_hit"}[1m])) / (sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", db="kv", type="block_cache_filter_hit"}[1m])) + sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", db="kv", type="block_cache_filter_miss"}[1m])))
sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", db="kv", type="block_cache_index_hit"}[1m])) / (sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", db="kv", type="block_cache_index_hit"}[1m])) + sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", db="kv", type="block_cache_index_miss"}[1m])))
sum(rate(tikv_engine_bloom_efficiency{tidb_cluster="$tidb_cluster", db="kv", type="bloom_prefix_useful"}[1m])) / sum(rate(tikv_engine_bloom_efficiency{tidb_cluster="$tidb_cluster", db="kv", type="bloom_prefix_checked"}[1m]))
irate(node_disk_read_time_seconds_total{tidb_cluster="$tidb_cluster"}[5m]) / irate(node_disk_reads_completed_total{tidb_cluster="$tidb_cluster"}[5m])
irate(node_disk_reads_completed_total{tidb_cluster="$tidb_cluster"}[5m])
irate(node_disk_read_bytes_total{tidb_cluster="$tidb_cluster"}[5m])
irate(node_disk_read_time_seconds_total{tidb_cluster="$tidb_cluster"}[5m])
histogram_quantile(0.999, sum(rate(tidb_server_handle_query_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(tidb_server_handle_query_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tidb_server_handle_query_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.80, sum(rate(tidb_server_handle_query_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(tidb_server_get_token_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
tidb_server_connections{tidb_cluster="$tidb_cluster"}
sum(tidb_server_connections{tidb_cluster="$tidb_cluster"})
go_memstats_heap_inuse_bytes{tidb_cluster="$tidb_cluster", job=~"tidb.*"}
histogram_quantile(0.99, sum(rate(tidb_session_parse_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, sql_type))
histogram_quantile(0.99, sum(rate(tidb_session_compile_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, sql_type))
histogram_quantile(0.99, sum(rate(tidb_session_transaction_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, sql_type))
histogram_quantile(0.95, sum(rate(tidb_session_transaction_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, sql_type))
histogram_quantile(0.80, sum(rate(tidb_session_transaction_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, sql_type))
histogram_quantile(0.99, sum(rate(tidb_session_transaction_statement_num_bucket{tidb_cluster="$tidb_cluster"}[30s])) by (le, sql_type))
histogram_quantile(0.80, sum(rate(tidb_session_transaction_statement_num_bucket{tidb_cluster="$tidb_cluster"}[30s])) by (le, sql_type))
histogram_quantile(1.0, sum(rate(tidb_session_retry_num_bucket{tidb_cluster="$tidb_cluster"}[30s])) by (le))
histogram_quantile(0.99, sum(rate(tidb_session_retry_num_bucket{tidb_cluster="$tidb_cluster"}[30s])) by (le))
histogram_quantile(0.90, sum(rate(tidb_session_retry_num_bucket{tidb_cluster="$tidb_cluster"}[30s])) by (le))
histogram_quantile(0.999, sum(rate(tidb_tikvclient_txn_cmd_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type=~"commit"}[1m])) by (le, type))
histogram_quantile(0.99, sum(rate(tidb_tikvclient_txn_cmd_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type=~"commit"}[1m])) by (le, type))
sum(rate(tidb_tikvclient_lock_resolver_actions_total{tidb_cluster="$tidb_cluster"}[1m])) by (type)
histogram_quantile(0.99, sum(rate(tidb_tikvclient_backoff_seconds_bucket{tidb_cluster="$tidb_cluster"}[5m])) by (le, type))
sum(rate(tidb_tikvclient_backoff_seconds_count{tidb_cluster="$tidb_cluster"}[1m])) by (type)
histogram_quantile(0.999, sum(rate(pd_client_cmd_handle_cmds_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type="tso"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(pd_client_cmd_handle_cmds_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type="tso"}[1m])) by (le))
histogram_quantile(0.90, sum(rate(pd_client_cmd_handle_cmds_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type="tso"}[1m])) by (le))
histogram_quantile(0.999, sum(rate(pd_client_request_handle_requests_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type="tso"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(pd_client_request_handle_requests_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type="tso"}[1m])) by (le))
histogram_quantile(0.90, sum(rate(pd_client_request_handle_requests_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type="tso"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(tikv_grpc_msg_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type=~"kv_prewrite|kv_commit"}[5m])) by (le, type))
topk(5, sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", name=~"grpc.*"}[1m])) by (instance, name))
histogram_quantile(0.99, sum(rate(tikv_scheduler_latch_wait_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[5m])) by (le, type))
histogram_quantile(0.95, sum(rate(tikv_scheduler_latch_wait_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[5m])) by (le, type))
rate(tikv_scheduler_latch_wait_duration_seconds_sum{tidb_cluster="$tidb_cluster"}[5m]) / rate(tikv_scheduler_latch_wait_duration_seconds_count{tidb_cluster="$tidb_cluster"}[5m])
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", name=~"sched_.*"}[1m])) by (instance)
histogram_quantile(0.99, sum(rate(tikv_scheduler_command_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, type))
histogram_quantile(0.99, sum(rate(tikv_raftstore_request_wait_time_duration_secs_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, instance))
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"raftstore_.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", name=~"raftstore_.*"}[1m])) by (instance)
histogram_quantile(0.99, sum(rate(tikv_storage_engine_async_request_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type="write"}[5m])) by (le))
histogram_quantile(0.95, sum(rate(tikv_storage_engine_async_request_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type="write"}[5m])) by (le))
sum(rate(tikv_storage_engine_async_request_duration_seconds_sum{tidb_cluster="$tidb_cluster", type="write"}[5m])) / sum(rate(tikv_storage_engine_async_request_duration_seconds_count{tidb_cluster="$tidb_cluster", type="write"}[5m]))
histogram_quantile(0.99, sum(rate(tikv_raftstore_append_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, instance))
max(tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", db="raft", type="write_max"})
max(tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", db="raft", type="write_percentile99"})
max(tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", db="raft", type="write_percentile95"})
max(tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", db="raft", type="write_average"})
histogram_quantile(0.99, sum(rate(tikv_raftstore_apply_wait_time_duration_secs_bucket{tidb_cluster="$tidb_cluster"}[5m])) by (le, instance))
histogram_quantile(0.99, sum(rate(tikv_raftstore_apply_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tikv_raftstore_apply_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
sum(rate(tikv_raftstore_apply_log_duration_seconds_sum{tidb_cluster="$tidb_cluster"}[1m])) / sum(rate(tikv_raftstore_apply_log_duration_seconds_count{tidb_cluster="$tidb_cluster"}[1m]))
max(tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", db="kv", type="write_max"})
max(tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", db="kv", type="write_percentile99"})
max(tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", db="kv", type="write_percentile95"})
max(tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", db="kv", type="write_average"})
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", name=~"apply_[0-9]+"}[1m])) by (instance)
irate(node_disk_write_time_seconds_total{tidb_cluster="$tidb_cluster"}[5m]) / irate(node_disk_writes_completed_total{tidb_cluster="$tidb_cluster"}[5m])
irate(node_disk_writes_completed_total{tidb_cluster="$tidb_cluster"}[5m])
irate(node_disk_written_bytes_total{tidb_cluster="$tidb_cluster"}[5m])
irate(node_disk_write_time_seconds_total{tidb_cluster="$tidb_cluster"}[5m])

max(ticdc_processor_checkpoint_ts_lag) by (changefeed, capture) > BOOL 0
delta(up{tidb_cluster="$tidb_cluster", job=~"tikv|ticdc"}[30s]) < BOOL 0
sum(ALERTS{tidb_cluster="$tidb_cluster", alertstate="firing", alertname=~"ticdc.*"}) by (alertname) > BOOL 0
delta(tikv_cdc_region_resolve_status{status="resolved"}[30s]) < BOOL -800
(time() - process_start_time_seconds{tidb_cluster="$tidb_cluster", job="ticdc"})
(time() - process_start_time_seconds{tidb_cluster="$tidb_cluster", job="tikv"})
 go_goroutines{tidb_cluster="$tidb_cluster", job="ticdc"}
go_threads{tidb_cluster="$tidb_cluster", job="ticdc"}
process_open_fds{tidb_cluster="$tidb_cluster", job="ticdc"}
rate(ticdc_owner_ownership_counter{tidb_cluster="$tidb_cluster"}[30s])
rate(process_cpu_seconds_total{tidb_cluster="$tidb_cluster", job="ticdc"}[1m])
process_resident_memory_bytes{tidb_cluster="$tidb_cluster", job="ticdc"}
go_memstats_heap_alloc_bytes{tidb_cluster="$tidb_cluster", job="ticdc"}
sum(rate(ticdc_owner_ownership_counter{tidb_cluster="$tidb_cluster"}[30s])) by (instance) > BOOL 0.5
histogram_quantile(0.999, sum(rate(ticdc_server_etcd_health_check_duration_bucket{tidb_cluster="$tidb_cluster", capture=~"$capture"}[1m])) by (le,instance))
histogram_quantile(0.99, sum(rate(ticdc_server_etcd_health_check_duration_bucket{tidb_cluster="$tidb_cluster", capture=~"$capture"}[1m])) by (le,instance))
histogram_quantile(0.95, sum(rate(ticdc_server_etcd_health_check_duration_bucket{tidb_cluster="$tidb_cluster", capture=~"$capture"}[1m])) by (le,instance))
sum(ticdc_processor_num_of_tables{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}) by (capture)
max(ticdc_processor_resolved_ts{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}) by (capture,changefeed)
max(ticdc_processor_checkpoint_ts{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}) by (capture,changefeed) > 0
max(ticdc_processor_table_resolved_ts{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}) by (capture,changefeed,table)
max(ticdc_processor_checkpoint_ts{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}) by (capture,changefeed,table) > 0
sum(ticdc_owner_maintain_table_num{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture",type="total"}) by (capture)
sum(ticdc_owner_maintain_table_num{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture",type="wip"}) by (capture)
max(ticdc_owner_checkpoint_ts{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed"}) by (changefeed) > 0
max(pd_cluster_tso{tidb_cluster="$tidb_cluster"}) * 1000
sum(rate(ticdc_etcd_request_count{tidb_cluster="$tidb_cluster", capture=~"$capture"}[1m])) by (capture, type)
sum(delta(ticdc_processor_exit_with_error_count{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}[1m])) by (capture)
max(ticdc_owner_checkpoint_ts_lag{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed"}) by (changefeed)
sum(ticdc_processor_resolved_ts_lag{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}) by (capture,changefeed)
ticdc_owner_status{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed"}
histogram_quantile(0.95, sum(rate(ticdc_sink_txn_exec_duration_bucket{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed"}[1m])) by (le,instance))
histogram_quantile(0.99, sum(rate(ticdc_sink_txn_exec_duration_bucket{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed"}[1m])) by (le,instance))
histogram_quantile(0.999, sum(rate(ticdc_sink_txn_exec_duration_bucket{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed"}[1m])) by (le,instance))
max(rate(ticdc_sink_txn_exec_duration_bucket{tidb_cluster="$tidb_cluster", capture=~"$capture"}[1m])) by (le)
histogram_quantile(0.90, sum(rate(ticdc_sink_txn_batch_size_bucket{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}[1m])) by (le,capture))
histogram_quantile(0.99, sum(rate(ticdc_sink_txn_batch_size_bucket{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}[1m])) by (le,capture))
histogram_quantile(0.999, sum(rate(ticdc_sink_txn_batch_size_bucket{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}[1m])) by (le,capture))
sum (rate(ticdc_sink_txn_batch_size_sum{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}[1m])) by (capture)
sum (rate(ticdc_sink_txn_batch_size_sum{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed"}[1m])) by (changefeed)
histogram_quantile(0.95, sum(rate(ticdc_processor_flush_event_duration_seconds_bucket{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed"}[1m])) by (le,instance,type))
histogram_quantile(0.99, sum(rate(ticdc_sink_flush_event_duration_seconds_bucket{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed"}[1m])) by (le,instance,type))
histogram_quantile(0.999, sum(rate(ticdc_sink_flush_event_duration_seconds_bucket{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed"}[1m])) by (le,instance,type))
max(rate(ticdc_sink_flush_event_duration_seconds_bucket{tidb_cluster="$tidb_cluster", capture=~"$capture"}[1m])) by (le)
sum(rate(ticdc_sink_bucket_size{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}[1m])) by (capture,bucket)
count(rate(ticdc_sink_bucket_size{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}[1m]) >= 0)
count(rate(ticdc_sink_bucket_size{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}[1m]) <= 2)
count(rate(ticdc_sink_bucket_size{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}[1m]) > 2 and rate(ticdc_sink_bucket_size{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}[1m]) <= 10)
count(rate(ticdc_sink_bucket_size{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}[1m]) > 10 and rate(ticdc_sink_bucket_size{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}[1m]) <= 100)
count(rate(ticdc_sink_bucket_size{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}[1m]) > 100)
max(rate(ticdc_sink_conflict_detect_duration_bucket{tidb_cluster="$tidb_cluster", capture=~"$capture"}[1m])) by (le)
histogram_quantile(0.95,sum(rate(ticdc_sink_conflict_detect_duration_bucket{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}[1m])) by (le,instance))
histogram_quantile(0.99,sum(rate(ticdc_sink_conflict_detect_duration_bucket{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}[1m])) by (le,instance))
histogram_quantile(0.999,sum(rate(ticdc_sink_conflict_detect_duration_bucket{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}[1m])) by (le,instance))
sum(rate(ticdc_processor_table_memory_consumption_sum{tidb_cluster="$tidb_cluster", capture=~"$capture"}[30s]) / rate(ticdc_processor_table_memory_consumption_count{tidb_cluster="$tidb_cluster", capture=~"$capture"}[30s])) by (capture)
sum(rate(ticdc_processor_table_memory_consumption_sum{tidb_cluster="$tidb_cluster", capture=~"$capture"}[30s]) / rate(ticdc_processor_table_memory_consumption_count{tidb_cluster="$tidb_cluster", capture=~"$capture"}[30s])) by (capture, changefeed)
sum(ticdc_kvclient_event_feed_count{tidb_cluster="$tidb_cluster"}) by (instance)
sum(grpc_client_started_total{tidb_cluster="$tidb_cluster", grpc_method="EventFeed"}) by (instance) - sum(grpc_client_handled_total{tidb_cluster="$tidb_cluster", grpc_method="EventFeed"}) by (instance)
sum(grpc_client_started_total{tidb_cluster="$tidb_cluster", grpc_method="EventFeed"}) by (instance)
sum(grpc_client_handled_total{tidb_cluster="$tidb_cluster", grpc_method="EventFeed"}) by (instance)
histogram_quantile(0.999, sum(rate(ticdc_kvclient_event_size_bytes_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, instance))
histogram_quantile(0.95, sum(rate(ticdc_kvclient_event_size_bytes_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, instance))
sum(increase(ticdc_kvclient_event_feed_error_count{tidb_cluster="$tidb_cluster", capture=~"$capture"}[1m])) by (type)
-sum(increase(pd_schedule_operators_count{tidb_cluster="$tidb_cluster", event="create", type=~".*leader"}[1m]))
-sum(increase(pd_schedule_operators_count{tidb_cluster="$tidb_cluster", event="create", type=~".*(peer|region)"}[1m]))
sum(rate(ticdc_kvclient_pull_event_count{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed"}[1m])) by (instance, type)
sum (rate(ticdc_puller_txn_collect_event_count{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed"}[1m])) by (instance, type)
sum(rate(ticdc_sink_total_flushed_rows_count{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}[1m])) by (capture)
sum(rate(ticdc_puller_output_chan_size_sum{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}[30s]) / rate(ticdc_puller_output_chan_size_count{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}[30s])) by (capture)
sum(rate(ticdc_puller_event_chan_size_sum{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}[30s]) / rate(ticdc_puller_event_chan_size_count{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}[30s])) by (capture)
sum(ticdc_puller_entry_sorter_unsorted_size{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}) by (capture)
-sum(ticdc_puller_entry_sorter_resolved_chan_size{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}) by (capture)
-sum(ticdc_puller_entry_sorter_output_chan_size{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}) by (capture)
sum(ticdc_mounter_input_chan_size{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}) by (capture)
-sum(ticdc_sink_buffer_chan_size{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}) by (capture)
sum(ticdc_sink_total_rows_count{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}) by (capture) - sum(ticdc_sink_total_flushed_rows_count{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}) by (capture)
sum(rate(ticdc_puller_entry_sorter_sort_bucket{tidb_cluster="$tidb_cluster", capture=~"$capture"}[1m])) by (le)
histogram_quantile(0.999, sum(rate(ticdc_puller_entry_sorter_sort_bucket{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}[1m])) by (le,capture))
histogram_quantile(0.95, sum(rate(ticdc_puller_entry_sorter_sort_bucket{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}[1m])) by (le,capture))
sum(rate(ticdc_puller_entry_sorter_merge_bucket{tidb_cluster="$tidb_cluster", capture=~"$capture"}[1m])) by (le)
histogram_quantile(0.999, sum(rate(ticdc_puller_entry_sorter_merge_bucket{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}[1m])) by (le,capture))
histogram_quantile(0.95, sum(rate(ticdc_puller_entry_sorter_merge_bucket{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}[1m])) by (le,capture))
max(rate(ticdc_mounter_unmarshal_and_mount_bucket{tidb_cluster="$tidb_cluster", capture=~"$capture"}[1m])) by (le)
histogram_quantile(0.99, sum(rate(ticdc_mounter_unmarshal_and_mount_bucket{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}[1m])) by (le, capture))
histogram_quantile(0.999, sum(rate(ticdc_mounter_unmarshal_and_mount_bucket{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}[1m])) by (le, capture))
sum(rate(ticdc_kvclient_send_event_count{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed"}[1m])) by (capture, changefeed, type)
sum(rate(ticdc_kvclient_batch_resolved_event_size_count{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed",capture=~"$capture"}[1m])) by (capture, changefeed, table)
sum(rate(ticdc_kvclient_batch_resolved_event_size_bucket{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance"}[1m])) by (le)
sum(rate(ticdc_sorter_consume_count{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed", capture=~"$capture"}[1m])) by (capture,changefeed)
sum(rate(ticdc_sorter_event_count{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed", capture=~"$capture"}[1m])) by (capture,changefeed)
sum(ticdc_sorter_on_disk_data_size_gauge{tidb_cluster="$tidb_cluster", capture=~"$capture"}) by (capture)
sum(ticdc_sorter_in_memory_data_size_gauge{tidb_cluster="$tidb_cluster", capture=~"$capture"}) by (capture)
sum(rate(ticdc_sorter_flush_count_histogram_bucket{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed", capture=~"$capture"}[1m])) by (le)
sum(rate(ticdc_sorter_merge_count_histogram_bucket{tidb_cluster="$tidb_cluster", changefeed=~"$changefeed", capture=~"$capture"}[1m])) by (le)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance", name=~"cdc_.*|cdc"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance", name=~"cdcwkr.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance", name=~"tso"}[1m])) by (instance)
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance", type!="kv_gc"}[1m])) by (type)
avg(process_resident_memory_bytes{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance", job=~"tikv.*"}) by (instance)
avg(process_resident_memory_bytes{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance", job=~"cdc.*"}) by (instance)
(avg(process_resident_memory_bytes{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance", job=~"tikv.*"}) by (instance)) - (avg(tikv_engine_block_cache_size_bytes{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance", db="kv"}) by(instance))
sum(tikv_cdc_sink_memory_bytes{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance"}) by (instance)
sum(tikv_cdc_old_value_cache_bytes{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance"}) by (instance)
sum(tikv_cdc_sink_memory_capacity{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance"}) by (instance)
sum(tikv_cdc_old_value_cache_memory_quota{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance"}) by (instance)
scalar(max(pd_cluster_tso{tidb_cluster="$tidb_cluster"})) - avg(tikv_cdc_min_resolved_ts{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance"}/1000) by (instance) > 0
max(pd_cluster_tso{tidb_cluster="$tidb_cluster"}) * 1000
avg(tikv_cdc_min_resolved_ts{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance"}) by (instance)
avg(tikv_cdc_min_resolved_ts_region{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance"}) by (instance)
histogram_quantile(0.99999, sum(rate(tikv_cdc_resolved_ts_gap_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance"}[1m])) by (le, instance))
sum(rate(tikv_cdc_scan_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance"}[1m])) by (le)
histogram_quantile(0.9999, sum(rate(tikv_cdc_scan_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance"}[1m])) by (le, instance))
sum(tikv_cdc_scan_tasks{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance", type="ongoing"}) by (type, instance)
sum(tikv_cdc_scan_tasks{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance", type="total"}) by (instance) - sum(tikv_cdc_scan_tasks{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance", type=~"abort|finish"}) by (instance)
avg(tikv_cdc_captured_region_total{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance"}) by (instance)
sum(tikv_cdc_region_resolve_status{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance"}) by (instance, status)
sum(rate(tikv_cdc_scan_bytes_total{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance", job="tikv"}[30s])) by (instance)
sum(tikv_cdc_scan_bytes_total{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance", job="tikv"}) by (instance)
(sum(rate(tikv_cdc_old_value_cache_access{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance"}[1m])) by (instance) - sum(rate(tikv_cdc_old_value_cache_miss{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance"}[1m])) by (instance)) / sum(rate(tikv_cdc_old_value_cache_access{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance"}[1m])) by (instance)
-sum(rate(tikv_cdc_old_value_cache_access{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance"}[1m])) by (instance)
-sum(rate(tikv_cdc_old_value_cache_miss{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance"}[1m])) by (instance)
-sum(rate(tikv_cdc_old_value_cache_miss_none{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance"}[1m])) by (instance)
sum(tikv_cdc_old_value_cache_length{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance"}) by (instance)
sum(tikv_cdc_old_value_cache_bytes{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance"}) by (instance) / sum(tikv_cdc_old_value_cache_length{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance"}) by (instance)
sum(tikv_cdc_old_value_cache_memory_quota{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance"}) by (instance)
sum(rate(tikv_cdc_old_value_scan_details{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance"}[1m])) by (instance, cf, tag)
sum(rate(tikv_cdc_old_value_duration_bucket{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance"}[1m])) by (le)
histogram_quantile(0.99, sum(rate(tikv_cdc_old_value_duration_bucket{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance"}[1m])) by (le, instance, tag))
histogram_quantile(0.95, sum(rate(tikv_cdc_old_value_duration_bucket{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance"}[1m])) by (le, instance, tag))
sum(rate(tikv_cdc_old_value_duration_sum{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance"}[1m])) by (le, instance, tag) / sum(rate(tikv_cdc_old_value_duration_count{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance"}[1m])) by (le, instance, tag)
process_resident_memory_bytes{tidb_cluster="$tidb_cluster", instance=~"$runtime_instance"}
go_memstats_next_gc_bytes{tidb_cluster="$tidb_cluster", instance=~"$runtime_instance"} / (1 + tidb_server_gogc{tidb_cluster="$tidb_cluster", instance=~"$runtime_instance"} / 100)
go_memstats_heap_alloc_bytes{tidb_cluster="$tidb_cluster", instance=~"$runtime_instance"} - go_memstats_next_gc_bytes{tidb_cluster="$tidb_cluster", instance=~"$runtime_instance"} / (1 + tidb_server_gogc{tidb_cluster="$tidb_cluster", instance=~"$runtime_instance"} / 100)
go_memstats_heap_idle_bytes{tidb_cluster="$tidb_cluster", instance=~"$runtime_instance"} - go_memstats_heap_released_bytes{tidb_cluster="$tidb_cluster", instance=~"$runtime_instance"} + go_memstats_heap_inuse_bytes{tidb_cluster="$tidb_cluster", instance=~"$runtime_instance"} - go_memstats_heap_alloc_bytes{tidb_cluster="$tidb_cluster", instance=~"$runtime_instance"}
go_memstats_stack_sys_bytes{tidb_cluster="$tidb_cluster", instance=~"$runtime_instance"} + go_memstats_mspan_sys_bytes{tidb_cluster="$tidb_cluster", instance=~"$runtime_instance"} + go_memstats_mcache_sys_bytes{tidb_cluster="$tidb_cluster", instance=~"$runtime_instance"} + go_memstats_buck_hash_sys_bytes{tidb_cluster="$tidb_cluster", instance=~"$runtime_instance"} + go_memstats_gc_sys_bytes{tidb_cluster="$tidb_cluster", instance=~"$runtime_instance"} + go_memstats_other_sys_bytes{tidb_cluster="$tidb_cluster", instance=~"$runtime_instance"}
go_memstats_next_gc_bytes{tidb_cluster="$tidb_cluster", instance=~"$runtime_instance"}
(clamp_max(idelta(go_memstats_last_gc_time_seconds{tidb_cluster="$tidb_cluster", instance=~"$runtime_instance"}[1m]), 1) * go_memstats_next_gc_bytes{tidb_cluster="$tidb_cluster", instance=~"$runtime_instance"}) > 0
go_memstats_heap_objects{tidb_cluster="$tidb_cluster", instance=~"$runtime_instance"}
go_gc_duration_seconds{tidb_cluster="$tidb_cluster", instance=~"$runtime_instance", quantile="0"}
go_gc_duration_seconds{tidb_cluster="$tidb_cluster", instance=~"$runtime_instance", quantile!~"0|1"}
go_gc_duration_seconds{tidb_cluster="$tidb_cluster", instance=~"$runtime_instance", quantile="1"}
irate(go_memstats_alloc_bytes_total{tidb_cluster="$tidb_cluster", instance=~"$runtime_instance"}[30s])
# irate((go_memstats_alloc_bytes_total{tidb_cluster="$tidb_cluster", instance=~"$runtime_instance"} - go_memstats_heap_alloc_bytes{tidb_cluster="$tidb_cluster", instance=~"$runtime_instance"})[30s:])
irate(go_memstats_mallocs_total{tidb_cluster="$tidb_cluster", instance=~"$runtime_instance"}[30s])
irate(go_memstats_frees_total{tidb_cluster="$tidb_cluster", instance=~"$runtime_instance"}[30s])
histogram_quantile(0.999, sum(rate(tidb_server_handle_query_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(tidb_server_handle_query_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tidb_server_handle_query_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.80, sum(rate(tidb_server_handle_query_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
sum(rate(tidb_server_query_total{tidb_cluster="$tidb_cluster"}[1m])) by (result)
sum(rate(tidb_server_query_total{tidb_cluster="$tidb_cluster", result="OK"}[1m]  offset 1d))
sum(tidb_server_connections{tidb_cluster="$tidb_cluster"}) * sum(rate(tidb_server_handle_query_duration_seconds_count{tidb_cluster="$tidb_cluster"}[1m])) / sum(rate(tidb_server_handle_query_duration_seconds_sum{tidb_cluster="$tidb_cluster"}[1m]))
sum(rate(tidb_executor_statement_total{tidb_cluster="$tidb_cluster"}[1m])) by (type)
sum(rate(tidb_executor_statement_total{tidb_cluster="$tidb_cluster"}[1m]))
rate(tidb_server_query_total{tidb_cluster="$tidb_cluster"}[1m])
sum(increase(tidb_server_execute_error_total{tidb_cluster="$tidb_cluster"}[1m])) by (type, instance)
histogram_quantile(0.90, sum(rate(tidb_server_slow_query_process_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le,sql_type))
histogram_quantile(0.90, sum(rate(tidb_server_slow_query_cop_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le,sql_type))
histogram_quantile(0.90, sum(rate(tidb_server_slow_query_wait_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le,sql_type))
histogram_quantile(0.99, sum(rate(tidb_server_conn_idle_duration_seconds_bucket{tidb_cluster="$tidb_cluster", in_txn='1'}[1m])) by (le,in_txn))
histogram_quantile(0.99, sum(rate(tidb_server_conn_idle_duration_seconds_bucket{tidb_cluster="$tidb_cluster", in_txn='0'}[1m])) by (le,in_txn))
histogram_quantile(0.90, sum(rate(tidb_server_conn_idle_duration_seconds_bucket{tidb_cluster="$tidb_cluster", in_txn='1'}[1m])) by (le,in_txn))
histogram_quantile(0.90, sum(rate(tidb_server_conn_idle_duration_seconds_bucket{tidb_cluster="$tidb_cluster", in_txn='0'}[1m])) by (le,in_txn))
histogram_quantile(0.80, sum(rate(tidb_server_conn_idle_duration_seconds_bucket{tidb_cluster="$tidb_cluster", in_txn='1'}[1m])) by (le,in_txn))
histogram_quantile(0.80, sum(rate(tidb_server_conn_idle_duration_seconds_bucket{tidb_cluster="$tidb_cluster", in_txn='0'}[1m])) by (le,in_txn))
histogram_quantile(0.999, sum(rate(tidb_server_handle_query_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le,sql_type))
histogram_quantile(0.99, sum(rate(tidb_server_handle_query_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le,sql_type))
histogram_quantile(0.95, sum(rate(tidb_server_handle_query_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le,sql_type))
histogram_quantile(0.80, sum(rate(tidb_server_handle_query_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le,sql_type))
histogram_quantile(0.80, sum(rate(tidb_server_handle_query_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, instance))
histogram_quantile(0.95, sum(rate(tidb_server_handle_query_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, instance))
histogram_quantile(0.99, sum(rate(tidb_server_handle_query_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, instance))
histogram_quantile(0.999, sum(rate(tidb_server_handle_query_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, instance))
increase(tidb_server_execute_error_total{tidb_cluster="$tidb_cluster"}[1m])
sum(rate(tidb_session_restricted_sql_total{tidb_cluster="$tidb_cluster"}[30s]))
(time() - process_start_time_seconds{tidb_cluster="$tidb_cluster", job="tidb"})
process_resident_memory_bytes{tidb_cluster="$tidb_cluster", job="tidb"}
go_memstats_heap_sys_bytes{tidb_cluster="$tidb_cluster", job="tidb"}
go_memstats_heap_inuse_bytes{tidb_cluster="$tidb_cluster", job="tidb"}
go_memstats_heap_alloc_bytes{tidb_cluster="$tidb_cluster", job="tidb"}
go_memstats_heap_idle_bytes{tidb_cluster="$tidb_cluster", job="tidb"}
go_memstats_heap_released_bytes{tidb_cluster="$tidb_cluster", job="tidb"}
go_memstats_next_gc_bytes{tidb_cluster="$tidb_cluster", job="tidb"}
irate(process_cpu_seconds_total{tidb_cluster="$tidb_cluster", job="tidb"}[30s])
tidb_server_maxprocs{tidb_cluster="$tidb_cluster", job="tidb"}
tidb_server_connections{tidb_cluster="$tidb_cluster"}
sum(tidb_server_connections{tidb_cluster="$tidb_cluster"})
process_open_fds{tidb_cluster="$tidb_cluster", job="tidb"}
sum(tidb_server_disconnection_total{tidb_cluster="$tidb_cluster"}) by (instance, result)
 go_goroutines{tidb_cluster="$tidb_cluster", job=~"tidb.*"}
increase(tidb_server_event_total{tidb_cluster="$tidb_cluster"}[10m])
tidb_server_prepared_stmts{tidb_cluster="$tidb_cluster"}
sum(tidb_server_prepared_stmts{tidb_cluster="$tidb_cluster"})
sum(increase(tidb_monitor_keep_alive_total{tidb_cluster="$tidb_cluster"}[1m])) by (instance)
increase(tidb_server_panic_total{tidb_cluster="$tidb_cluster"}[1m])
increase(tidb_server_critical_error_total{tidb_cluster="$tidb_cluster"}[1m])
sum(increase(tidb_monitor_time_jump_back_total{tidb_cluster="$tidb_cluster"}[1m])) by (instance)
histogram_quantile(0.99, sum(rate(tidb_server_get_token_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
tidb_server_critical_error_total{tidb_cluster="$tidb_cluster"}
rate(tidb_server_packet_io_bytes_sum{tidb_cluster="$tidb_cluster"}[1m])
tidb_server_packet_io_bytes_sum{tidb_cluster="$tidb_cluster"}
sum(increase(tidb_server_handshake_error_total{tidb_cluster="$tidb_cluster"}[1m])) by (instance)
sum(rate(tidb_session_transaction_duration_seconds_count{tidb_cluster="$tidb_cluster"}[1m])) by (type, txn_mode)
histogram_quantile(0.99, sum(rate(tidb_session_transaction_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, txn_mode))
histogram_quantile(0.95, sum(rate(tidb_session_transaction_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, txn_mode))
histogram_quantile(0.80, sum(rate(tidb_session_transaction_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, txn_mode))
sum(increase(tidb_session_transaction_statement_num_bucket[1m])) by (le)
sum(increase(tidb_session_retry_num_bucket[1m])) by (le)
sum(rate(tidb_session_retry_error_total{tidb_cluster="$tidb_cluster"}[30s])) by (type, sql_type)
histogram_quantile(0.99, sum(rate(tidb_tikvclient_batch_executor_token_wait_duration_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tidb_tikvclient_batch_executor_token_wait_duration_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.80, sum(rate(tidb_tikvclient_batch_executor_token_wait_duration_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
sum(rate(tidb_tikvclient_txn_cmd_duration_seconds_count{tidb_cluster="$tidb_cluster", type="commit"}[1m])) by (instance)
histogram_quantile(0.99, sum(rate(tidb_tikvclient_txn_cmd_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, type))
histogram_quantile(0.95, sum(rate(tidb_tikvclient_txn_cmd_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, type))
histogram_quantile(0.80, sum(rate(tidb_tikvclient_txn_cmd_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, type))
sum(increase(tidb_tikvclient_txn_regions_num_bucket[1m])) by (le)
rate(tidb_tikvclient_txn_write_kv_num_sum{tidb_cluster="$tidb_cluster"}[30s])
tidb_tikvclient_txn_write_kv_num_sum{tidb_cluster="$tidb_cluster"}
sum(increase(tidb_tikvclient_txn_write_kv_num_bucket[1m])) by (le)
sum(increase(tidb_session_statement_lock_keys_count_bucket[1m])) by (le)
histogram_quantile(0.80, sum(rate(tidb_tikvclient_txn_heart_beat_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, type))
histogram_quantile(0.95, sum(rate(tidb_tikvclient_txn_heart_beat_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, type))
histogram_quantile(0.99, sum(rate(tidb_tikvclient_txn_heart_beat_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, type))
rate(tidb_tikvclient_txn_write_size_bytes_sum{tidb_cluster="$tidb_cluster"}[30s])
tidb_tikvclient_txn_write_size_bytes_sum{tidb_cluster="$tidb_cluster"}
sum(increase(tidb_tikvclient_txn_write_size_bytes_bucket[1m])) by (le)
histogram_quantile(0.80, sum(rate(tidb_tikvclient_pessimistic_lock_keys_duration_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tidb_tikvclient_pessimistic_lock_keys_duration_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(tidb_tikvclient_pessimistic_lock_keys_duration_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
sum(rate(tidb_tikvclient_ttl_lifetime_reach_total{tidb_cluster="$tidb_cluster"}[1m])) by (instance)
sum(rate(tidb_tikvclient_load_safepoint_total{tidb_cluster="$tidb_cluster", type="ok"}[1m])) by (instance)
sum(increase(tidb_session_statement_pessimistic_retry_count_bucket[1m])) by (le)
sum(rate(tidb_tikvclient_commit_txn_counter{tidb_cluster="$tidb_cluster"}[1m])) by (type)
sum(rate(tidb_tikvclient_async_commit_txn_counter{tidb_cluster="$tidb_cluster"}[1m])) by (type)
sum(rate(tidb_tikvclient_one_pc_txn_counter{tidb_cluster="$tidb_cluster"}[1m])) by (type)
histogram_quantile(0.99, rate(tidb_tikvclient_txn_commit_backoff_count_bucket{tidb_cluster="$tidb_cluster"}[1m]))
histogram_quantile(0.99, rate(tidb_tikvclient_txn_commit_backoff_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m]))
sum(rate(tidb_tikvclient_safets_update_counter{tidb_cluster="$tidb_cluster"}[1m])) by (result, store)
sum(tidb_tikvclient_safets_gap_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance, store)
histogram_quantile(0.95, sum(rate(tidb_session_parse_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, sql_type))
histogram_quantile(0.95, sum(rate(tidb_session_compile_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, sql_type))
histogram_quantile(0.95, sum(rate(tidb_session_execute_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, sql_type))
sum(rate(tidb_executor_expensive_total{tidb_cluster="$tidb_cluster"}[1m])) by (type)
sum(rate(tidb_server_plan_cache_total{tidb_cluster="$tidb_cluster"}[1m])) by (type)
histogram_quantile(0.999, sum(rate(tidb_distsql_handle_query_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, type))
histogram_quantile(0.99, sum(rate(tidb_distsql_handle_query_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, type))
histogram_quantile(0.90, sum(rate(tidb_distsql_handle_query_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, type))
histogram_quantile(0.50, sum(rate(tidb_distsql_handle_query_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, type))
sum(rate(tidb_distsql_handle_query_duration_seconds_count{tidb_cluster="$tidb_cluster"}[1m]))
sum(rate(tidb_distsql_scan_keys_partial_num_count{tidb_cluster="$tidb_cluster"}[1m]))
histogram_quantile(1, sum(rate(tidb_distsql_scan_keys_num_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.90, sum(rate(tidb_distsql_scan_keys_num_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.50, sum(rate(tidb_distsql_scan_keys_num_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(1, sum(rate(tidb_distsql_scan_keys_partial_num_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.90, sum(rate(tidb_distsql_scan_keys_partial_num_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.80, sum(rate(tidb_distsql_scan_keys_partial_num_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(1, sum(rate(tidb_distsql_partial_num_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.90, sum(rate(tidb_distsql_partial_num_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.50, sum(rate(tidb_distsql_partial_num_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
sum(rate(tidb_distsql_copr_cache_count{tidb_cluster="$tidb_cluster"}[1m])) by (type)
histogram_quantile(0.999, sum(rate(tidb_tikvclient_cop_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, instance))
histogram_quantile(0.999, sum(rate(tidb_tikvclient_backoff_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(tidb_tikvclient_backoff_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.80, sum(rate(tidb_tikvclient_backoff_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
sum(rate(tidb_tikvclient_region_err_total{tidb_cluster="$tidb_cluster"}[1m])) by (type)
# sum(rate(tidb_tikvclient_region_err_total{tidb_cluster="$tidb_cluster"}{EXTERNAL_LABELtype="server_is_busy"}[1m]))
sum(rate(tidb_tikvclient_backoff_seconds_count{tidb_cluster="$tidb_cluster"}[1m])) by (type)
sum(rate(tidb_tikvclient_lock_resolver_actions_total{tidb_cluster="$tidb_cluster"}[1m])) by (type)
sum(rate(tidb_tikvclient_lock_cleanup_task_total{tidb_cluster="$tidb_cluster"}[1m])) by (type)
sum(rate(tidb_tikvclient_load_safepoint_total{tidb_cluster="$tidb_cluster", type="fail"}[1m]))
sum(rate(tidb_tikvclient_replica_selector_failure_counter{tidb_cluster="$tidb_cluster"}[1m])) by (type)
sum(rate(tidb_tikvclient_request_seconds_count{tidb_cluster="$tidb_cluster"}[1m])) by (instance, type)
histogram_quantile(0.99, sum(rate(tidb_tikvclient_request_seconds_bucket{tidb_cluster="$tidb_cluster", store!="0"}[1m])) by (le, store))
histogram_quantile(0.99, sum(rate(tidb_tikvclient_request_seconds_bucket{tidb_cluster="$tidb_cluster", store!="0"}[1m])) by (le,type))
sum(rate(tidb_tikvclient_forward_request_counter{tidb_cluster="$tidb_cluster"}[1m])) by (from_store, to_store, result)
sum(rate(tidb_tikvclient_forward_request_counter{tidb_cluster="$tidb_cluster"}[1m])) by (type, result)
sum(rate(pd_client_cmd_handle_cmds_duration_seconds_count{tidb_cluster="$tidb_cluster", type!="tso"}[1m])) by (type)
histogram_quantile(0.999, sum(rate(pd_client_cmd_handle_cmds_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type!~"tso|tso_async_wait"}[1m])) by (le, type))
histogram_quantile(0.99, sum(rate(pd_client_cmd_handle_cmds_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type!~"tso|tso_async_wait"}[1m])) by (le, type))
histogram_quantile(0.90, sum(rate(pd_client_cmd_handle_cmds_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type!~"tso|tso_async_wait"}[1m])) by (le, type))
sum(rate(pd_client_cmd_handle_failed_cmds_duration_seconds_count{tidb_cluster="$tidb_cluster"}[1m])) by (type)
sum(rate(pd_client_cmd_handle_cmds_duration_seconds_count{tidb_cluster="$tidb_cluster", type="tso"}[1m]))
sum(rate(pd_client_request_handle_requests_duration_seconds_count{tidb_cluster="$tidb_cluster", type="tso"}[1m]))
histogram_quantile(0.999, sum(rate(pd_client_cmd_handle_cmds_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type="wait"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(pd_client_cmd_handle_cmds_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type="wait"}[1m])) by (le))
histogram_quantile(0.90, sum(rate(pd_client_cmd_handle_cmds_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type="wait"}[1m])) by (le))
histogram_quantile(0.999, sum(rate(pd_client_request_handle_requests_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type="tso"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(pd_client_request_handle_requests_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type="tso"}[1m])) by (le))
histogram_quantile(0.90, sum(rate(pd_client_request_handle_requests_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type="tso"}[1m])) by (le))
histogram_quantile(0.999, sum(rate(tidb_pdclient_ts_future_wait_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(tidb_pdclient_ts_future_wait_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.90, sum(rate(tidb_pdclient_ts_future_wait_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
pd_client_request_forwarded_status
histogram_quantile(0.99, sum(rate(tidb_domain_load_schema_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, instance))
sum(rate(tidb_domain_load_schema_total{tidb_cluster="$tidb_cluster"}[1m])) by (instance,type)
sum(increase(tidb_session_schema_lease_error_total{tidb_cluster="$tidb_cluster"}[1m])) by (instance)
sum(rate(tidb_domain_load_privilege_total{tidb_cluster="$tidb_cluster"}[1m])) by (instance,type)
histogram_quantile(0.95, sum(rate(tidb_ddl_handle_job_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, type))
histogram_quantile(1, sum(rate(tidb_ddl_batch_add_idx_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, type))
sum(rate(tidb_ddl_add_index_total{tidb_cluster="$tidb_cluster"}[1m])) by (type)
tidb_ddl_waiting_jobs{tidb_cluster="$tidb_cluster"}
increase(tidb_ddl_worker_operation_total{tidb_cluster="$tidb_cluster"}[1m])
histogram_quantile(0.99, sum(increase(tidb_ddl_worker_operation_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, type, action, result))
histogram_quantile(1, sum(rate(tidb_ddl_deploy_syncer_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[2m])) by (le, type, result))
histogram_quantile(1, sum(rate(tidb_ddl_owner_handle_syncer_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[2m])) by (le, type, result))
histogram_quantile(1, sum(rate(tidb_ddl_update_self_ver_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[2m])) by (le, result))
sum(rate(tidb_ddl_handle_job_duration_seconds_count{tidb_cluster="$tidb_cluster"}[1m])) by (type)
sum(rate(tidb_ddl_handle_job_duration_seconds_count{tidb_cluster="$tidb_cluster"}[1m]))
irate(tidb_ddl_add_index_percentage_progress{tidb_cluster="$tidb_cluster", type="add_index"}[1m])
irate(tidb_ddl_add_index_percentage_progress{tidb_cluster="$tidb_cluster", type="modify_column"}[1m])
histogram_quantile(0.95, sum(rate(tidb_statistics_auto_analyze_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
sum(rate(tidb_statistics_auto_analyze_total{tidb_cluster="$tidb_cluster"}[1m])) by (type)
histogram_quantile(0.99, sum(rate(tidb_statistics_stats_inaccuracy_rate_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.90, sum(rate(tidb_statistics_stats_inaccuracy_rate_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
histogram_quantile(0.50, sum(rate(tidb_statistics_stats_inaccuracy_rate_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
sum(rate(tidb_statistics_pseudo_estimation_total{tidb_cluster="$tidb_cluster"}[30s])) by (type)
sum(rate(tidb_statistics_dump_feedback_total{tidb_cluster="$tidb_cluster"}[1m])) by (type)
sum(rate(tidb_statistics_store_query_feedback_total{tidb_cluster="$tidb_cluster"}[1m])) by (type)
sum(rate(tidb_statistics_high_error_rate_feedback_total{tidb_cluster="$tidb_cluster"}[1m]))
sum(rate(tidb_statistics_update_stats_total{tidb_cluster="$tidb_cluster"}[1m])) by (type)
histogram_quantile(1, sum(rate(tidb_statistics_fast_analyze_status_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, type))
histogram_quantile(0.95, sum(rate(tidb_owner_new_session_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, instance, result))
sum(rate(tidb_owner_watch_owner_total{tidb_cluster="$tidb_cluster"}[1m])) by (type, result, instance)
sum(rate(tidb_autoid_operation_duration_seconds_count{tidb_cluster="$tidb_cluster"}[1m]))
histogram_quantile(0.99, sum(rate(tidb_autoid_operation_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, type))
histogram_quantile(0.80, sum(rate(tidb_autoid_operation_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, type))
sum(rate(tidb_tikvclient_region_cache_operations_total{tidb_cluster="$tidb_cluster", result="err"}[1m])) by (type)
histogram_quantile(0.99, sum(rate(tidb_meta_operation_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, type))
sum(increase(tidb_tikvclient_gc_worker_actions_total{tidb_cluster="$tidb_cluster"}[1m])) by (type)
histogram_quantile(0.99, sum(rate(tidb_tikvclient_gc_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
max(tidb_tikvclient_gc_config{tidb_cluster="$tidb_cluster"}) by (type)
sum(increase(tidb_tikvclient_gc_failure{tidb_cluster="$tidb_cluster"}[1m])) by (type)
sum(increase(tidb_tikvclient_gc_unsafe_destroy_range_failures{tidb_cluster="$tidb_cluster"}[1m])) by (type)
sum(increase(tidb_tikvclient_gc_region_too_many_locks{tidb_cluster="$tidb_cluster"}[1m]))
sum(increase(tidb_tikvclient_gc_action_result{tidb_cluster="$tidb_cluster"}[1m])) by (type)
sum(tidb_tikvclient_range_task_stats{tidb_cluster="$tidb_cluster"}) by (type, result)
histogram_quantile(0.95, sum(rate(tidb_tikvclient_range_task_push_duration_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, instance))
delta(tidb_tikvclient_batch_client_no_available_connection_total{tidb_cluster="$tidb_cluster"}[30s])
histogram_quantile(0.95, sum(rate(tidb_tikvclient_batch_client_unavailable_seconds_bucket{tidb_cluster="$tidb_cluster"}[30s])) by (le, instance))
histogram_quantile(0.9999, sum(rate(tidb_tikvclient_batch_client_wait_connection_establish_bucket{tidb_cluster="$tidb_cluster"}[30s])) by (le, instance))
process_resident_memory_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}
go_memstats_next_gc_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"} / (1 + tidb_server_gogc{tidb_cluster="$tidb_cluster", instance=~"$instance"} / 100)
go_memstats_heap_alloc_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"} - go_memstats_next_gc_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"} / (1 + tidb_server_gogc{tidb_cluster="$tidb_cluster", instance=~"$instance"} / 100)
go_memstats_heap_idle_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"} - go_memstats_heap_released_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"} + go_memstats_heap_inuse_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"} - go_memstats_heap_alloc_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}
go_memstats_stack_sys_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"} + go_memstats_mspan_sys_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"} + go_memstats_mcache_sys_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"} + go_memstats_buck_hash_sys_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"} + go_memstats_gc_sys_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"} + go_memstats_other_sys_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}
go_memstats_next_gc_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}
(clamp_max(idelta(go_memstats_last_gc_time_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]), 1) * go_memstats_next_gc_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}) > 0
irate(process_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[30s])
# (idelta((go_memstats_gc_cpu_fraction{tidb_cluster="$tidb_cluster", instance=~"$instance"} * (go_memstats_last_gc_time_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance"} - process_start_time_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance"}) * tidb_server_maxprocs{tidb_cluster="$tidb_cluster", instance=~"$instance"})[30s:]) > 0) / 15
tidb_server_maxprocs{tidb_cluster="$tidb_cluster", instance=~"$instance"}
go_memstats_heap_objects{tidb_cluster="$tidb_cluster", instance=~"$instance"}
go_gc_duration_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", quantile="0"}
go_gc_duration_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", quantile!~"0|1"}
go_gc_duration_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", quantile="1"}
irate(go_memstats_alloc_bytes_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[30s])
# irate((go_memstats_alloc_bytes_total{tidb_cluster="$tidb_cluster", instance=~"$instance"} - go_memstats_heap_alloc_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"})[30s:])
irate(go_memstats_mallocs_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[30s])
irate(go_memstats_frees_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[30s])
 go_goroutines{tidb_cluster="$tidb_cluster", instance=~"$instance"}
go_threads{tidb_cluster="$tidb_cluster", instance=~"$instance"}
histogram_quantile(0.99, sum(rate(tidb_tikvclient_request_seconds_bucket{tidb_cluster="$tidb_cluster", store!="0",instance=~"$instance"}[30s])) by (le, store))
histogram_quantile(0.99, sum(rate(tikv_grpc_msg_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type!="kv_gc"}[30s])) by (le, instance))
histogram_quantile(0.99, sum(rate(pd_client_request_handle_requests_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type="tso"}[30s])) by (le))
histogram_quantile(0.99, sum(rate(pd_server_handle_tso_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[30s])) by (le))
sum(increase(tidb_tikvclient_batch_requests_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[30s])) by (le)
sum(increase(tidb_tikvclient_batch_pending_requests_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[30s])) by (le)
histogram_quantile(0.999, sum(rate(tidb_tikvclient_batch_wait_duration_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[30s])) by (le, instance))
histogram_quantile(0.99, sum(rate(tidb_tikvclient_batch_wait_duration_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[30s])) by (le, instance))
histogram_quantile(0.95, sum(rate(tidb_tikvclient_batch_wait_duration_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[30s])) by (le, instance))
histogram_quantile(0.9999, sum(rate(tidb_tikvclient_batch_send_latency_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[30s])) by (le, instance))
histogram_quantile(0.999, sum(rate(tidb_tikvclient_batch_send_latency_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[30s])) by (le, instance))
histogram_quantile(0.99, sum(rate(tidb_tikvclient_batch_send_latency_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[30s])) by (le, instance))
(time() - process_start_time_seconds{tidb_cluster="$tidb_cluster", job="tidb"})
tidb_server_connections{tidb_cluster="$tidb_cluster"}
sum(tidb_server_connections{tidb_cluster="$tidb_cluster"})
rate(process_cpu_seconds_total{tidb_cluster="$tidb_cluster", job="tidb"}[1m])
process_resident_memory_bytes{tidb_cluster="$tidb_cluster", job="tidb"}
go_memstats_heap_sys_bytes{tidb_cluster="$tidb_cluster", job="tidb"}
go_memstats_heap_inuse_bytes{tidb_cluster="$tidb_cluster", job="tidb"}
go_memstats_heap_alloc_bytes{tidb_cluster="$tidb_cluster", job="tidb"}
go_memstats_heap_idle_bytes{tidb_cluster="$tidb_cluster", job="tidb"}
go_memstats_heap_released_bytes{tidb_cluster="$tidb_cluster", job="tidb"}
histogram_quantile(0.99, sum(rate(tidb_server_handle_query_duration_seconds_bucket{tidb_cluster="$tidb_cluster", sql_type!="internal"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tidb_server_handle_query_duration_seconds_bucket{tidb_cluster="$tidb_cluster", sql_type!="internal"}[1m])) by (le))
sum(rate(tidb_server_handle_query_duration_seconds_sum{tidb_cluster="$tidb_cluster", sql_type!="internal"}[30s])) / sum(rate(tidb_server_handle_query_duration_seconds_count{tidb_cluster="$tidb_cluster", sql_type!="internal"}[30s]))
sum(increase(tidb_server_execute_error_total{tidb_cluster="$tidb_cluster"}[1m])) by (type, instance)
sum(rate(tidb_server_query_total{tidb_cluster="$tidb_cluster"}[1m])) by (result)
sum(rate(tidb_server_query_total{tidb_cluster="$tidb_cluster", result="OK"}[1m]  offset 1d))
sum(tidb_server_connections{tidb_cluster="$tidb_cluster"}) * sum(rate(tidb_server_handle_query_duration_seconds_count{tidb_cluster="$tidb_cluster"}[1m])) / sum(rate(tidb_server_handle_query_duration_seconds_sum{tidb_cluster="$tidb_cluster"}[1m]))
sum(rate(tidb_server_query_total{tidb_cluster="$tidb_cluster"}[1m])) by (instance)
sum(rate(tidb_executor_statement_total{tidb_cluster="$tidb_cluster"}[1m])) by (type)
sum(rate(tidb_executor_statement_total{tidb_cluster="$tidb_cluster"}[1m]))
sum(rate(tidb_server_query_total{tidb_cluster="$tidb_cluster"}[1m])) by (type)
histogram_quantile(0.99, sum(rate(tidb_session_parse_duration_seconds_bucket{tidb_cluster="$tidb_cluster", sql_type="general"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tidb_session_parse_duration_seconds_bucket{tidb_cluster="$tidb_cluster", sql_type="general"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(tidb_session_compile_duration_seconds_bucket{tidb_cluster="$tidb_cluster", sql_type="general"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tidb_session_compile_duration_seconds_bucket{tidb_cluster="$tidb_cluster", sql_type="general"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(tidb_session_execute_duration_seconds_bucket{tidb_cluster="$tidb_cluster", sql_type="general"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tidb_session_execute_duration_seconds_bucket{tidb_cluster="$tidb_cluster", sql_type="general"}[1m])) by (le))
sum(rate(tidb_server_plan_cache_total{tidb_cluster="$tidb_cluster"}[1m])) by (type)
sum(rate(tidb_session_transaction_duration_seconds_count{tidb_cluster="$tidb_cluster"}[1m])) by (type, txn_mode)
histogram_quantile(0.99, sum(rate(tidb_session_transaction_duration_seconds_bucket{tidb_cluster="$tidb_cluster", sql_type="general"}[1m])) by (le, txn_mode))
histogram_quantile(0.95, sum(rate(tidb_session_transaction_duration_seconds_bucket{tidb_cluster="$tidb_cluster", sql_type="general"}[1m])) by (le, txn_mode))
histogram_quantile(0.80, sum(rate(tidb_session_transaction_duration_seconds_bucket{tidb_cluster="$tidb_cluster", sql_type="general"}[1m])) by (le, txn_mode))
histogram_quantile(1, sum(rate(tidb_session_transaction_statement_num_bucket{tidb_cluster="$tidb_cluster"}[30s])) by (le))
histogram_quantile(1.0, sum(rate(tidb_session_retry_num_bucket{tidb_cluster="$tidb_cluster"}[30s])) by (le))
histogram_quantile(0.99, sum(rate(tidb_tikvclient_request_seconds_bucket{tidb_cluster="$tidb_cluster", type!="GC"}[1m])) by (le, store))
histogram_quantile(0.99, sum(rate(tidb_tikvclient_request_seconds_bucket{tidb_cluster="$tidb_cluster", type!="GC"}[1m])) by (le,type))
sum(rate(tidb_tikvclient_request_seconds_count{tidb_cluster="$tidb_cluster"}[1m])) by (type)
sum(rate(tidb_tikvclient_txn_cmd_duration_seconds_count{tidb_cluster="$tidb_cluster"}[1m])) by (instance)
histogram_quantile(1, sum(rate(tidb_tikvclient_txn_write_size_bytes_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, instance))
histogram_quantile(1, sum(rate(tidb_tikvclient_txn_write_kv_num_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, instance))
histogram_quantile(1, sum(rate(tidb_tikvclient_txn_regions_num_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le, instance))
histogram_quantile(0.999, sum(rate(pd_client_cmd_handle_cmds_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type="wait"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(pd_client_cmd_handle_cmds_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type="wait"}[1m])) by (le))
histogram_quantile(0.90, sum(rate(pd_client_cmd_handle_cmds_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type="wait"}[1m])) by (le))
histogram_quantile(0.999, sum(rate(pd_client_request_handle_requests_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type="tso"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(pd_client_request_handle_requests_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type="tso"}[1m])) by (le))
histogram_quantile(0.90, sum(rate(pd_client_request_handle_requests_duration_seconds_bucket{tidb_cluster="$tidb_cluster", type="tso"}[1m])) by (le))
sum(rate(tidb_autoid_operation_duration_seconds_count{tidb_cluster="$tidb_cluster"}[1m])) by (instance)
histogram_quantile(0.99, sum(rate(tidb_autoid_operation_duration_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (le))
sum(rate(tidb_autoid_operation_duration_seconds_sum{tidb_cluster="$tidb_cluster"}[1m])) / sum(rate(tidb_autoid_operation_duration_seconds_count{tidb_cluster="$tidb_cluster"}[1m]))
rate(tiflash_proxy_process_cpu_seconds_total{tidb_cluster="$tidb_cluster", job="tiflash"}[1m])
avg(tiflash_proxy_process_resident_memory_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
rate(node_disk_io_time_seconds_total{tidb_cluster="$tidb_cluster"}[1m])
(time() - tiflash_proxy_process_start_time_seconds{tidb_cluster="$tidb_cluster"})
sum(tiflash_proxy_tikv_raftstore_region_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="leader"}) by (instance)
delta(tiflash_proxy_tikv_raftstore_region_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="leader"}[30s]) < -10
sum(tiflash_proxy_tikv_raftstore_region_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="region"}) by (instance)
sum(rate(tiflash_proxy_tikv_critical_error_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance, type)
sum(rate(tiflash_proxy_tikv_scheduler_too_busy_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
sum(rate(tiflash_proxy_tikv_channel_full_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance, type)
sum(rate(tiflash_proxy_tikv_coprocessor_request_error{tidb_cluster="$tidb_cluster", instance=~"$instance", type='full'}[1m])) by (instance)
avg(tiflash_proxy_tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", type="write_stall_percentile99", db=~"$db"}) by (instance, db)
sum(rate(tiflash_proxy_tikv_server_report_failure_msg_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type,instance,store_id)
sum(rate(tiflash_proxy_tikv_storage_engine_async_request_total{tidb_cluster="$tidb_cluster", instance=~"$instance", status!~"success|all"}[1m])) by (instance, status)
sum(rate(tiflash_proxy_tikv_scheduler_stage_total{tidb_cluster="$tidb_cluster", instance=~"$instance", stage=~"snapshot_err|prepare_write_err"}[1m])) by (instance, stage)
sum(rate(tiflash_proxy_tikv_coprocessor_request_error{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance, reason)
sum(rate(tiflash_proxy_tikv_grpc_msg_fail_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance, type)
sum(delta(tiflash_proxy_tikv_raftstore_region_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="leader"}[1m])) by (instance)
sum(tiflash_proxy_tikv_raftstore_leader_missing{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
sum(tiflash_proxy_tikv_engine_size_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (type)
sum(tiflash_proxy_tikv_engine_size_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
sum(rate(tiflash_proxy_tikv_channel_full_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance, type)
sum(rate(tiflash_proxy_tikv_channel_full_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance, type)
sum(rate(tiflash_proxy_tikv_region_written_keys_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_raftstore_region_size_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tiflash_proxy_tikv_raftstore_region_size_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
sum(rate(tiflash_proxy_tikv_raftstore_region_size_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) / sum(rate(tiflash_proxy_tikv_raftstore_region_size_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tiflash_proxy_tikv_raftstore_region_size_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tiflash_proxy_tikv_region_written_bytes_sum{tidb_cluster="$tidb_cluster"}[1m])) by (instance) / sum(rate(tiflash_proxy_tikv_region_written_bytes_count{tidb_cluster="$tidb_cluster"}[1m])) by (instance)
sum(rate(tiflash_proxy_tikv_region_written_bytes_bucket[1m]))
sum(rate(tiflash_proxy_tikv_region_written_keys_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance) / sum(rate(tiflash_proxy_tikv_region_written_keys_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
sum(rate(tiflash_proxy_tikv_region_written_keys_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tiflash_proxy_tikv_server_request_batch_ratio_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type) / sum(rate(tiflash_proxy_tikv_server_request_batch_ratio_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_server_request_batch_ratio_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, type))
sum(rate(tiflash_proxy_tikv_server_request_batch_size_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type) / sum(rate(tiflash_proxy_tikv_server_request_batch_size_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_server_request_batch_size_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, type))
sum(rate(tiflash_proxy_tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type!="kv_gc"}[1m])) by (type)
sum(rate(tiflash_proxy_tikv_grpc_msg_fail_total{tidb_cluster="$tidb_cluster", instance=~"$instance", type!="kv_gc"}[1m])) by (type)
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_grpc_msg_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type!="kv_gc"}[1m])) by (le, type))
sum(rate(tiflash_proxy_tikv_grpc_msg_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type) / sum(rate(tiflash_proxy_tikv_grpc_msg_duration_seconds_count[1m])) by (type)
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_server_grpc_req_batch_size_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_server_grpc_resp_batch_size_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
sum(rate(tiflash_proxy_tikv_server_grpc_req_batch_size_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) / sum(rate(tiflash_proxy_tikv_server_grpc_req_batch_size_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tiflash_proxy_tikv_server_grpc_resp_batch_size_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) / sum(rate(tiflash_proxy_tikv_server_grpc_resp_batch_size_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_server_raft_message_batch_size_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
sum(rate(tiflash_proxy_tikv_server_raft_message_batch_size_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) / sum(rate(tiflash_proxy_tikv_server_raft_message_batch_size_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tiflash_proxy_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"raftstore_.*"}[1m])) by (instance)
sum(rate(tiflash_proxy_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"raftstore_.*"}[1m])) by (instance)
sum(rate(tiflash_proxy_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"apply_[0-9]+"}[1m])) by (instance)
sum(rate(tiflash_proxy_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"sched_.*"}[1m])) by (instance)
sum(rate(tiflash_proxy_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"grpc.*"}[1m])) by (instance)
sum(rate(tiflash_proxy_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"unf_rd_pool.*"}[1m])) by (instance)
sum(rate(tiflash_proxy_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"store_read_norm.*"}[1m])) by (instance)
sum(rate(tiflash_proxy_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"store_read_high.*"}[1m])) by (instance)
sum(rate(tiflash_proxy_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"store_read_low.*"}[1m])) by (instance)
sum(rate(tiflash_proxy_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"cop_normal.*"}[1m])) by (instance)
sum(rate(tiflash_proxy_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"cop_high.*"}[1m])) by (instance)
sum(rate(tiflash_proxy_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"cop_low.*"}[1m])) by (instance)
sum(rate(tiflash_proxy_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"rocksdb.*"}[1m])) by (instance)
sum(rate(tiflash_proxy_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"split_check"}[1m])) by (instance)
sum(rate(tiflash_proxy_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"gc_worker.*"}[1m])) by (instance)
sum(rate(tiflash_proxy_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"background.*"}[1m])) by (instance)
sum(rate(tiflash_proxy_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"region_task.*"}[1m])) by (instance)
sum(rate(tiflash_proxy_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"region_worker.*"}[1m])) by (instance)
sum(rate(tiflash_proxy_tikv_pd_request_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
sum(rate(tiflash_proxy_tikv_pd_request_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type) / sum(rate(tiflash_proxy_tikv_pd_request_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
sum(rate(tiflash_proxy_tikv_pd_heartbeat_message_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
sum(rate(tiflash_proxy_tikv_pd_validate_peer_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_raftstore_apply_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tiflash_proxy_tikv_raftstore_apply_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
sum(rate(tiflash_proxy_tikv_raftstore_apply_log_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) / sum(rate(tiflash_proxy_tikv_raftstore_apply_log_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_raftstore_apply_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_raftstore_append_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tiflash_proxy_tikv_raftstore_append_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
sum(rate(tiflash_proxy_tikv_raftstore_append_log_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) / sum(rate(tiflash_proxy_tikv_raftstore_append_log_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_raftstore_append_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_raftstore_commit_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tiflash_proxy_tikv_raftstore_commit_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
sum(rate(tiflash_proxy_tikv_raftstore_commit_log_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) / sum(rate(tiflash_proxy_tikv_raftstore_commit_log_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_raftstore_commit_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
sum(rate(tiflash_proxy_tikv_raftstore_raft_ready_handled_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
sum(rate(tiflash_proxy_tikv_raftstore_raft_process_duration_secs_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="ready"}[1m]))
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_raftstore_raft_process_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type='ready'}[1m])) by (le, instance))
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_raftstore_event_duration_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, type))
sum(rate(tiflash_proxy_tikv_raftstore_raft_sent_message_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
sum(rate(tiflash_proxy_tikv_server_raft_message_flush_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
sum(rate(tiflash_proxy_tikv_server_raft_message_recv_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
sum(rate(tiflash_proxy_tikv_raftstore_raft_sent_message_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
sum(rate(tiflash_proxy_tikv_raftstore_raft_sent_message_total{tidb_cluster="$tidb_cluster", instance=~"$instance", type="vote"}[1m])) by (instance)
sum(rate(tiflash_proxy_tikv_raftstore_raft_dropped_message_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_raftstore_apply_proposal_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
sum(rate(tiflash_proxy_tikv_raftstore_proposal_total{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"local_read|normal|read_index|batch"}[1m])) by (type)
sum(rate(tiflash_proxy_tikv_raftstore_proposal_total{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"local_read|read_index"}[1m])) by (instance)
sum(rate(tiflash_proxy_tikv_raftstore_proposal_total{tidb_cluster="$tidb_cluster", instance=~"$instance", type="normal"}[1m])) by (instance)
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_raftstore_request_wait_time_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tiflash_proxy_tikv_raftstore_request_wait_time_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
sum(rate(tiflash_proxy_tikv_raftstore_request_wait_time_duration_secs_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) / sum(rate(tiflash_proxy_tikv_raftstore_request_wait_time_duration_secs_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_raftstore_request_wait_time_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_raftstore_apply_wait_time_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tiflash_proxy_tikv_raftstore_apply_wait_time_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
sum(rate(tiflash_proxy_tikv_raftstore_apply_wait_time_duration_secs_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) / sum(rate(tiflash_proxy_tikv_raftstore_apply_wait_time_duration_secs_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_raftstore_apply_wait_time_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
avg(rate(tiflash_proxy_tikv_raftstore_propose_log_size_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_raftstore_store_perf_context_time_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, type))
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_raftstore_apply_perf_context_time_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, type))
sum(rate(tiflash_proxy_tikv_raftstore_proposal_total{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"conf_change|transfer_leader"}[1m])) by (type)
sum(rate(tiflash_proxy_tikv_raftstore_admin_cmd_total{tidb_cluster="$tidb_cluster", instance=~"$instance", status="success", type!="compact"}[1m]))  by (type)
sum(rate(tiflash_proxy_tikv_raftstore_check_split_total{tidb_cluster="$tidb_cluster", instance=~"$instance", type!="ignore"}[1m])) by (type)
histogram_quantile(0.9999, sum(rate(tiflash_proxy_tikv_raftstore_check_split_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
sum(rate(tiflash_proxy_tikv_multilevel_level_elapsed{tidb_cluster="$tidb_cluster", instance=~"$instance", name="unified-read-pool"}[1m])) by (level)
tiflash_proxy_tikv_multilevel_level0_chance{tidb_cluster="$tidb_cluster", instance=~"$instance", name="unified-read-pool"}
sum(avg_over_time(tiflash_proxy_tikv_unified_read_pool_running_tasks{tidb_cluster="$tidb_cluster"}[1m])) by (instance)
sum(rate(tiflash_proxy_tikv_storage_command_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
sum(rate(tiflash_proxy_tikv_storage_engine_async_request_total{tidb_cluster="$tidb_cluster", instance=~"$instance", status!~"all|success"}[1m])) by (status)
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_storage_engine_async_request_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="snapshot"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tiflash_proxy_tikv_storage_engine_async_request_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="snapshot"}[1m])) by (le))
sum(rate(tiflash_proxy_tikv_storage_engine_async_request_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance", type="snapshot"}[1m])) / sum(rate(tiflash_proxy_tikv_storage_engine_async_request_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="snapshot"}[1m]))
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_storage_engine_async_request_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="write"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tiflash_proxy_tikv_storage_engine_async_request_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="write"}[1m])) by (le))
sum(rate(tiflash_proxy_tikv_storage_engine_async_request_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance", type="write"}[1m])) / sum(rate(tiflash_proxy_tikv_storage_engine_async_request_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="write"}[1m]))
sum(rate(tiflash_proxy_tikv_scheduler_too_busy_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (stage)
sum(rate(tiflash_proxy_tikv_scheduler_stage_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (stage)
sum(tiflash_proxy_tikv_scheduler_writing_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
sum(rate(tiflash_proxy_tikv_scheduler_commands_pri_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (priority)
sum(tiflash_proxy_tikv_scheduler_contex_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
sum(rate(tiflash_proxy_tikv_scheduler_too_busy_total{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m]))
sum(rate(tiflash_proxy_tikv_scheduler_stage_total{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m])) by (stage)
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_scheduler_command_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tiflash_proxy_tikv_scheduler_command_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m])) by (le))
sum(rate(tiflash_proxy_tikv_scheduler_command_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m])) / sum(rate(tiflash_proxy_tikv_scheduler_command_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m]))
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_scheduler_latch_wait_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tiflash_proxy_tikv_scheduler_latch_wait_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m])) by (le))
sum(rate(tiflash_proxy_tikv_scheduler_latch_wait_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m])) / sum(rate(tiflash_proxy_tikv_scheduler_latch_wait_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m]))
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_scheduler_kv_command_key_read_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tiflash_proxy_tikv_scheduler_kv_command_key_read_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m])) by (le))
sum(rate(tiflash_proxy_tikv_scheduler_kv_command_key_read_sum{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m])) / sum(rate(tiflash_proxy_tikv_scheduler_kv_command_key_read_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m]))
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_scheduler_kv_command_key_write_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tiflash_proxy_tikv_scheduler_kv_command_key_write_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m])) by (le))
sum(rate(tiflash_proxy_tikv_scheduler_kv_command_key_write_sum{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m])) / sum(rate(tiflash_proxy_tikv_scheduler_kv_command_key_write_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m]))
sum(rate(tiflash_proxy_tikv_scheduler_kv_scan_details{tidb_cluster="$tidb_cluster", instance=~"$instance", req="$command"}[1m])) by (tag)
sum(rate(tiflash_proxy_tikv_scheduler_kv_scan_details{tidb_cluster="$tidb_cluster", instance=~"$instance", req="$command", cf="lock"}[1m])) by (tag)
sum(rate(tiflash_proxy_tikv_scheduler_kv_scan_details{tidb_cluster="$tidb_cluster", instance=~"$instance", req="$command", cf="write"}[1m])) by (tag)
sum(rate(tiflash_proxy_tikv_scheduler_kv_scan_details{tidb_cluster="$tidb_cluster", instance=~"$instance", req="$command", cf="default"}[1m])) by (tag)
sum(delta(tiflash_proxy_tikv_raftstore_raft_sent_message_total{tidb_cluster="$tidb_cluster", instance=~"$instance", type="snapshot"}[1m]))
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_server_send_snapshot_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_raftstore_snapshot_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="apply"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_raftstore_snapshot_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="generate"}[1m])) by (le))
sum(tiflash_proxy_tikv_raftstore_snapshot_traffic_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (type)
histogram_quantile(0.9999, sum(rate(tiflash_proxy_tikv_snapshot_size_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.9999, sum(rate(tiflash_proxy_tikv_snapshot_kv_count_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
sum(rate(tiflash_proxy_tikv_worker_handled_task_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (name)
sum(rate(tiflash_proxy_tikv_worker_pending_task_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (name)
sum(rate(tiflash_proxy_tikv_futurepool_handled_task_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (name)
sum(rate(tiflash_proxy_tikv_futurepool_pending_task_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (name)
sum(tiflash_proxy_threads_state{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance, state)
sum(tiflash_proxy_threads_state{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
sum(rate(tiflash_proxy_threads_io_bytes_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[30s])) by (name, io) > 1024
sum(rate(tiflash_proxy_thread_voluntary_context_switches{tidb_cluster="$tidb_cluster", instance=~"$instance"}[30s])) by (instance, name) > 200
sum(rate(tiflash_proxy_thread_nonvoluntary_context_switches{tidb_cluster="$tidb_cluster", instance=~"$instance"}[30s])) by (instance, name) > 50
sum(rate(tiflash_proxy_tikv_engine_memtable_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="memtable_hit"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type=~"block_cache_data_hit|block_cache_filter_hit"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_get_served{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="get_hit_l0"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_get_served{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="get_hit_l1"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_get_served{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="get_hit_l2_and_up"}[1m]))
max(tiflash_proxy_tikv_engine_get_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="get_max"})
avg(tiflash_proxy_tikv_engine_get_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="get_percentile99"})
avg(tiflash_proxy_tikv_engine_get_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="get_percentile95"})
avg(tiflash_proxy_tikv_engine_get_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="get_average"})
sum(rate(tiflash_proxy_tikv_engine_locate{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="number_db_seek"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_locate{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="number_db_seek_found"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_locate{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="number_db_next"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_locate{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="number_db_next_found"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_locate{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="number_db_prev"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_locate{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="number_db_prev_found"}[1m]))
max(tiflash_proxy_tikv_engine_seek_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="seek_max"})
avg(tiflash_proxy_tikv_engine_seek_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="seek_percentile99"})
avg(tiflash_proxy_tikv_engine_seek_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="seek_percentile95"})
avg(tiflash_proxy_tikv_engine_seek_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="seek_average"})
sum(rate(tiflash_proxy_tikv_engine_write_served{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type=~"write_done_by_self|write_done_by_other"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_write_served{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="write_timeout"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_write_served{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="write_with_wal"}[1m]))
max(tiflash_proxy_tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="write_max"})
avg(tiflash_proxy_tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="write_percentile99"})
avg(tiflash_proxy_tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="write_percentile95"})
avg(tiflash_proxy_tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="write_average"})
max(tiflash_proxy_tikv_engine_write_wal_time_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="write_wal_micros_max"})
avg(tiflash_proxy_tikv_engine_write_wal_time_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="write_wal_micros_percentile99"})
avg(tiflash_proxy_tikv_engine_write_wal_time_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="write_wal_micros_percentile95"})
avg(tiflash_proxy_tikv_engine_write_wal_time_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="write_wal_micros_average"})
sum(rate(tiflash_proxy_tikv_engine_wal_file_synced{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}[1m]))
max(tiflash_proxy_tikv_engine_wal_file_sync_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="wal_file_sync_max"})
avg(tiflash_proxy_tikv_engine_wal_file_sync_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="wal_file_sync_percentile99"})
avg(tiflash_proxy_tikv_engine_wal_file_sync_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="wal_file_sync_percentile95"})
avg(tiflash_proxy_tikv_engine_wal_file_sync_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="wal_file_sync_average"})
sum(rate(tiflash_proxy_tikv_engine_event_total{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}[1m])) by (type)
max(tiflash_proxy_tikv_engine_compaction_time{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="compaction_time_max"})
avg(tiflash_proxy_tikv_engine_compaction_time{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="compaction_time_percentile99"})
avg(tiflash_proxy_tikv_engine_compaction_time{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="compaction_time_percentile95"})
avg(tiflash_proxy_tikv_engine_compaction_time{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="compaction_time_average"})
max(tiflash_proxy_tikv_engine_sst_read_micros{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="sst_read_micros_max"})
avg(tiflash_proxy_tikv_engine_sst_read_micros{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="sst_read_micros_percentile99"})
avg(tiflash_proxy_tikv_engine_sst_read_micros{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="sst_read_micros_percentile95"})
avg(tiflash_proxy_tikv_engine_sst_read_micros{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="sst_read_micros_average"})
max(tiflash_proxy_tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="write_stall_max"})
avg(tiflash_proxy_tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="write_stall_percentile99"})
avg(tiflash_proxy_tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="write_stall_percentile95"})
avg(tiflash_proxy_tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="write_stall_average"})
avg(tiflash_proxy_tikv_engine_memory_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="mem-tables"}) by (cf)
sum(rate(tiflash_proxy_tikv_engine_memtable_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="memtable_hit"}[1m])) / (sum(rate(tiflash_proxy_tikv_engine_memtable_efficiency{tidb_cluster="$tidb_cluster", db="$db", type="memtable_hit"}[1m])) + sum(rate(tiflash_proxy_tikv_engine_memtable_efficiency{tidb_cluster="$tidb_cluster", db="$db", type="memtable_miss"}[1m])))
topk(20, avg(tiflash_proxy_tikv_engine_block_cache_size_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}) by(cf, instance))
sum(rate(tiflash_proxy_tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_hit"}[1m])) / (sum(rate(tiflash_proxy_tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_hit"}[1m])) + sum(rate(tiflash_proxy_tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_miss"}[1m])))
sum(rate(tiflash_proxy_tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_data_hit"}[1m])) / (sum(rate(tiflash_proxy_tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_data_hit"}[1m])) + sum(rate(tiflash_proxy_tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_data_miss"}[1m])))
sum(rate(tiflash_proxy_tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_filter_hit"}[1m])) / (sum(rate(tiflash_proxy_tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_filter_hit"}[1m])) + sum(rate(tiflash_proxy_tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_filter_miss"}[1m])))
sum(rate(tiflash_proxy_tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_index_hit"}[1m])) / (sum(rate(tiflash_proxy_tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_index_hit"}[1m])) + sum(rate(tiflash_proxy_tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_index_miss"}[1m])))
sum(rate(tiflash_proxy_tikv_engine_bloom_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="bloom_prefix_useful"}[1m])) / sum(rate(tiflash_proxy_tikv_engine_bloom_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="bloom_prefix_checked"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_byte_read"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_byte_write"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_data_bytes_insert"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_filter_bytes_insert"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_filter_bytes_evict"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_index_bytes_insert"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_index_bytes_evict"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_add"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_data_add"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_filter_add"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_index_add"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_add_failures"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="keys_read"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="keys_written"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_compaction_num_corrupt_keys{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}[1m]))
sum(tiflash_proxy_tikv_engine_estimate_num_keys{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}) by (cf)
sum(rate(tiflash_proxy_tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="bytes_read"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="iter_bytes_read"}[1m]))
max(tiflash_proxy_tikv_engine_bytes_per_read{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="bytes_per_read_max"})
avg(tiflash_proxy_tikv_engine_bytes_per_read{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="bytes_per_read_percentile99"})
avg(tiflash_proxy_tikv_engine_bytes_per_read{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="bytes_per_read_percentile95"})
avg(tiflash_proxy_tikv_engine_bytes_per_read{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="bytes_per_read_average"})
sum(rate(tiflash_proxy_tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="wal_file_bytes"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="bytes_written"}[1m]))
max(tiflash_proxy_tikv_engine_bytes_per_write{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="bytes_per_write_max"})
avg(tiflash_proxy_tikv_engine_bytes_per_write{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="bytes_per_write_percentile99"})
avg(tiflash_proxy_tikv_engine_bytes_per_write{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="bytes_per_write_percentile95"})
avg(tiflash_proxy_tikv_engine_bytes_per_write{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="bytes_per_write_average"})
sum(rate(tiflash_proxy_tikv_engine_compaction_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="bytes_read"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_compaction_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="bytes_written"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="flush_write_bytes"}[1m]))
sum(rate(tiflash_proxy_tikv_engine_pending_compaction_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}[1m])) by (cf)
sum(rate(tiflash_proxy_tikv_engine_read_amp_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="read_amp_total_read_bytes"}[1m])) by (instance) / sum(rate(tiflash_proxy_tikv_engine_read_amp_flow_bytes{tidb_cluster="$tidb_cluster", db="$db", type="read_amp_estimate_useful_bytes"}[1m])) by (instance)
avg(tiflash_proxy_tikv_engine_compression_ratio{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}) by (level)
tiflash_proxy_tikv_engine_num_snapshots{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}
tiflash_proxy_tikv_engine_oldest_snapshot_duration{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}
avg(tiflash_proxy_tikv_engine_num_files_at_level{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}) by (cf, level)
histogram_quantile(0.99, sum(rate(tiflash_proxy_tikv_snapshot_ingest_sst_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}[1m])) by (le))
sum(rate(tiflash_proxy_tikv_snapshot_ingest_sst_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) / sum(rate(tiflash_proxy_tikv_snapshot_ingest_sst_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
tiflash_proxy_tikv_engine_stall_conditions_changed{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}
sum(increase(tiflash_proxy_tikv_engine_write_stall_reason{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}[1m])) by (type)
sum(rate(tiflash_proxy_tikv_engine_compaction_reason{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}[1m])) by (cf, reason)
tiflash_proxy_tikv_encryption_data_key_storage_total{tidb_cluster="$tidb_cluster"}
tiflash_proxy_tikv_encryption_file_num{tidb_cluster="$tidb_cluster"}
tiflash_proxy_tikv_encryption_is_initialized{tidb_cluster="$tidb_cluster"}
tiflash_proxy_tikv_encryption_meta_file_size_bytes{tidb_cluster="$tidb_cluster"}
histogram_quantile(1, sum(rate(tiflash_proxy_tikv_encryption_write_read_file_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, type, operation))
histogram_quantile(0.95, sum(rate(tiflash_proxy_tikv_encryption_write_read_file_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, type, operation))
sum(rate(tiflash_proxy_tikv_encryption_write_read_file_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, type, operation) / sum(rate(tiflash_proxy_tikv_encryption_write_read_file_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, type, operation)
rate(node_disk_io_time_seconds_total{tidb_cluster="$tidb_cluster"}[1m])
sum(tiflash_proxy_tikv_raftstore_region_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="region"}) by (instance)
sum(rate(tiflash_proxy_tikv_scheduler_too_busy_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
sum(rate(tiflash_proxy_tikv_channel_full_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance, type)
avg(tiflash_proxy_tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", type="write_stall_percentile99"}) by (instance)
sum(tiflash_proxy_tikv_raftstore_leader_missing{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
sum(tiflash_proxy_tikv_engine_size_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (type)
sum(rate(tiflash_proxy_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"raftstore_.*"}[1m])) by (instance)
sum(rate(tiflash_proxy_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"raftstore_.*"}[1m])) by (instance)
sum(rate(tiflash_proxy_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"rocksdb.*"}[1m])) by (instance)
sum(rate(tiflash_proxy_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"split_check"}[1m])) by (instance)
sum(rate(tiflash_proxy_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"background.*"}[1m])) by (instance)
sum(rate(tiflash_proxy_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"gc_worker.*"}[1m])) by (instance)
sum(rate(tiflash_proxy_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"region_task.*"}[1m])) by (instance)
sum(rate(tiflash_proxy_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"region_worker.*"}[1m])) by (instance)
sum(rate(tiflash_proxy_tikv_pd_request_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
sum(rate(tiflash_proxy_tikv_pd_request_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type) / sum(rate(tiflash_proxy_tikv_pd_request_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
sum(tiflash_system_current_metric_StoreSizeUsed{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
sum(tiflash_system_current_metric_StoreSizeAvailable{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
sum(tiflash_system_current_metric_StoreSizeCapacity{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
tiflash_system_asynchronous_metric_Uptime{tidb_cluster="$tidb_cluster", instance=~"$instance"}
sum(tiflash_system_asynchronous_metric_jemalloc_retained{tidb_cluster="$tidb_cluster", instance=~"$instance"})
sum(tiflash_system_asynchronous_metric_jemalloc_mapped{tidb_cluster="$tidb_cluster", instance=~"$instance"})
sum(tiflash_system_asynchronous_metric_jemalloc_resident{tidb_cluster="$tidb_cluster", instance=~"$instance"})
sum(tiflash_system_asynchronous_metric_jemalloc_allocated{tidb_cluster="$tidb_cluster", instance=~"$instance"})
sum(tiflash_system_asynchronous_metric_jemalloc_active{tidb_cluster="$tidb_cluster", instance=~"$instance"})
sum(tiflash_system_asynchronous_metric_jemalloc_metadata_thp{tidb_cluster="$tidb_cluster", instance=~"$instance"})
sum(tiflash_system_asynchronous_metric_jemalloc_metadata{tidb_cluster="$tidb_cluster", instance=~"$instance"})
sum(tiflash_system_asynchronous_metric_mimalloc_current_rss{tidb_cluster="$tidb_cluster", job="tiflash"})
sum(tiflash_system_asynchronous_metric_mimalloc_current_commit{tidb_cluster="$tidb_cluster", job="tiflash"})
sum(tiflash_system_asynchronous_metric_mmap_alive{tidb_cluster="$tidb_cluster", job="tiflash"})
tiflash_proxy_process_resident_memory_bytes{tidb_cluster="$tidb_cluster", job="tiflash"}
rate(tiflash_proxy_process_cpu_seconds_total{tidb_cluster="$tidb_cluster", job="tiflash"}[1m])
sum(rate(tiflash_system_profile_event_FileFSync{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
sum(rate(tiflash_system_profile_event_FileOpen{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
sum(rate(tiflash_system_profile_event_FileOpenFailed{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
tiflash_proxy_process_open_fds{tidb_cluster="$tidb_cluster", job="tiflash"}
sum(tiflash_system_current_metric_OpenFileForWrite{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
sum(tiflash_system_current_metric_OpenFileForRead{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
sum(rate(tiflash_coprocessor_request_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
sum(rate(tiflash_coprocessor_executor_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
histogram_quantile(0.999, sum(rate(tiflash_coprocessor_request_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(tiflash_coprocessor_request_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tiflash_coprocessor_request_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.80, sum(rate(tiflash_coprocessor_request_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
sum(rate(tiflash_coprocessor_request_error{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (reason)
histogram_quantile(0.999, sum(rate(tiflash_coprocessor_request_handle_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(tiflash_coprocessor_request_handle_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tiflash_coprocessor_request_handle_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.80, sum(rate(tiflash_coprocessor_request_handle_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
sum(rate(tiflash_coprocessor_response_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
histogram_quantile(0.999, sum(rate(tiflash_coprocessor_request_memory_usage_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, type))
histogram_quantile(0.99, sum(rate(tiflash_coprocessor_request_memory_usage_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, type))
histogram_quantile(0.95, sum(rate(tiflash_coprocessor_request_memory_usage_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, type))
histogram_quantile(0.80, sum(rate(tiflash_coprocessor_request_memory_usage_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, type))
sum(tiflash_coprocessor_handling_request_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (type)
avg(tiflash_schema_version{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
avg(increase(tiflash_schema_apply_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
avg(increase(tiflash_schema_trigger_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
avg(increase(tiflash_schema_internal_ddl_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
sum(increase(tiflash_schema_internal_ddl_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(increase(tiflash_schema_internal_ddl_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type,instance)
sum(increase(tiflash_schema_internal_ddl_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
histogram_quantile(0.999, sum(rate(tiflash_schema_apply_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(tiflash_schema_apply_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tiflash_schema_apply_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.80, sum(rate(tiflash_schema_apply_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
sum(tiflash_schema_applying{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
sum(increase(tiflash_storage_command_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
sum(rate(tiflash_system_profile_event_DMWriteBlock{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
max(tiflash_storage_write_amplification{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
sum((rate(tiflash_system_profile_event_PSMWriteBytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}[5m]) + rate(tiflash_system_profile_event_WriteBufferFromFileDescriptorWriteBytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}[5m]) + rate(tiflash_system_profile_event_WriteBufferAIOWriteBytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}[5m])) / (rate(tiflash_system_profile_event_DMWriteBytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}[5m]))) by (instance)
sum((rate(tiflash_system_profile_event_PSMWriteBytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}[10m]) + rate(tiflash_system_profile_event_WriteBufferFromFileDescriptorWriteBytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}[10m]) + rate(tiflash_system_profile_event_WriteBufferAIOWriteBytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}[10m])) / (rate(tiflash_system_profile_event_DMWriteBytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}[10m]))) by (instance)
sum((rate(tiflash_system_profile_event_PSMWriteBytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}[30m]) + rate(tiflash_system_profile_event_WriteBufferFromFileDescriptorWriteBytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}[30m]) + rate(tiflash_system_profile_event_WriteBufferAIOWriteBytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}[30m])) / (rate(tiflash_system_profile_event_DMWriteBytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}[30m]))) by (instance)
sum((rate(tiflash_system_profile_event_PSMWriteBytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}[5m]) + rate(tiflash_system_profile_event_WriteBufferFromFileDescriptorWriteBytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}[5m]) + rate(tiflash_system_profile_event_WriteBufferAIOWriteBytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}[5m]))) by (instance)
sum(rate(tiflash_system_profile_event_DMWriteBytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}[5m])) by (instance)
sum(rate(tiflash_storage_read_tasks_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
avg((rate(tiflash_system_profile_event_DMFileFilterAftPKAndPackSet{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]) - rate(tiflash_system_profile_event_DMFileFilterAftRoughSet{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) / (rate(tiflash_system_profile_event_DMFileFilterAftPKAndPackSet{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))) by (instance)
avg((rate(tiflash_system_profile_event_DMFileFilterAftPKAndPackSet{tidb_cluster="$tidb_cluster", instance=~"$instance"}[5m]) - rate(tiflash_system_profile_event_DMFileFilterAftRoughSet{tidb_cluster="$tidb_cluster", instance=~"$instance"}[5m])) / (rate(tiflash_system_profile_event_DMFileFilterAftPKAndPackSet{tidb_cluster="$tidb_cluster", instance=~"$instance"}[5m]))) by (instance)
sum(rate(tiflash_system_profile_event_DMFileFilterNoFilter{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
sum(rate(tiflash_system_profile_event_DMFileFilterAftPKAndPackSet{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
sum(rate(tiflash_system_profile_event_DMFileFilterAftRoughSet{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
sum(rate(tiflash_storage_subtask_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type!~"delta_merge|delta_merge_fg|delta_merge_bg_gc|seg_merge|seg_split"}[1m])) by (type)
sum(increase(tiflash_storage_subtask_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"delta_merge|delta_merge_fg|delta_merge_bg_gc|seg_merge|seg_split"}[1m])) by (type)
histogram_quantile(1, sum(rate(tiflash_storage_subtask_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le,type))
histogram_quantile(0.99, sum(rate(tiflash_storage_subtask_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le,type))
histogram_quantile(0.95, sum(rate(tiflash_storage_subtask_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le,type))
histogram_quantile(0.80, sum(rate(tiflash_storage_subtask_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le,type))
sum(increase(tiflash_storage_page_gc_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
sum(delta(tiflash_storage_page_gc_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le)
sum(rate(tiflash_system_profile_event_PSMWriteIOCalls{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
sum(rate(tiflash_system_profile_event_PSMWriteCalls{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
sum(rate(tiflash_system_profile_event_PSMWritePages{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tiflash_system_profile_event_WriteBufferFromFileDescriptorWrite{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tiflash_system_profile_event_WriteBufferAIOWrite{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tiflash_system_profile_event_PSMReadIOCalls{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tiflash_system_profile_event_PSMReadCalls{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tiflash_system_profile_event_PSMReadPages{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tiflash_system_profile_event_ReadBufferFromFileDescriptorRead{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tiflash_system_profile_event_ReadBufferAIORead{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tiflash_system_profile_event_WriteBufferFromFileDescriptorWriteBytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tiflash_system_profile_event_PSMWriteBytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tiflash_system_profile_event_WriteBufferAIOWriteBytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tiflash_system_profile_event_ReadBufferFromFileDescriptorReadBytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tiflash_system_profile_event_PSMReadBytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tiflash_system_profile_event_ReadBufferAIOReadBytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
tiflash_system_current_metric_DT_SegmentReadTasks{tidb_cluster="$tidb_cluster", instance=~"$instance"}
tiflash_system_current_metric_PSMVCCSnapshotsList{tidb_cluster="$tidb_cluster", instance=~"$instance"}
tiflash_system_current_metric_PSMVCCNumSnapshots{tidb_cluster="$tidb_cluster", instance=~"$instance"}
tiflash_system_current_metric_DT_SnapshotOfRead{tidb_cluster="$tidb_cluster", instance=~"$instance"}
tiflash_system_current_metric_DT_SnapshotOfReadRaw{tidb_cluster="$tidb_cluster", instance=~"$instance"}
tiflash_system_current_metric_DT_SnapshotOfDeltaMerge{tidb_cluster="$tidb_cluster", instance=~"$instance"}
tiflash_system_current_metric_DT_SnapshotOfDeltaCompact{tidb_cluster="$tidb_cluster", instance=~"$instance"}
tiflash_system_current_metric_DT_SnapshotOfSegmentMerge{tidb_cluster="$tidb_cluster", instance=~"$instance"}
tiflash_system_current_metric_DT_SnapshotOfSegmentSplit{tidb_cluster="$tidb_cluster", instance=~"$instance"}
tiflash_system_current_metric_DT_SnapshotOfPlaceIndex{tidb_cluster="$tidb_cluster", instance=~"$instance"}
tiflash_system_asynchronous_metric_MaxDTDeltaOldestSnapshotLifetime{tidb_cluster="$tidb_cluster", instance=~"$instance"}
tiflash_system_asynchronous_metric_MaxDTStableOldestSnapshotLifetime{tidb_cluster="$tidb_cluster", instance=~"$instance"}
tiflash_system_asynchronous_metric_MaxDTMetaOldestSnapshotLifetime{tidb_cluster="$tidb_cluster", instance=~"$instance"}
avg(tiflash_system_current_metric_DT_DeltaMerge{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
avg(tiflash_system_current_metric_DT_SegmentSplit{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
avg(tiflash_system_current_metric_DT_SegmentMerge{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
sum(rate(tiflash_storage_io_limiter{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
avg(tiflash_system_current_metric_RateLimiterPendingWriteRequest{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
avg(tiflash_system_current_metric_IOLimiterPendingBgWriteReq{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
avg(tiflash_system_current_metric_IOLimiterPendingFgWriteReq{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
avg(tiflash_system_current_metric_IOLimiterPendingBgReadReq{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
avg(tiflash_system_current_metric_IOLimiterPendingFgReadReq{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
sum(rate(tiflash_storage_throughput_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"write|ingest"}[1m]))
sum(rate(tiflash_storage_throughput_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", type!~"write|ingest"}[1m]))
sum(tiflash_storage_throughput_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"write|ingest"})
sum(tiflash_storage_throughput_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", type!~"write|ingest"})
histogram_quantile(0.99, sum(rate(tiflash_storage_write_stall_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, type, instance))
histogram_quantile(1, sum(rate(tiflash_storage_write_stall_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, type, instance))
sum(rate(tiflash_storage_throughput_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"write|ingest"}[1m])) by (instance)
sum(rate(tiflash_system_profile_event_DMWriteBlock{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance, type)
sum(increase(tiflash_storage_command_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance, type)
sum(rate(tiflash_raft_read_index_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
histogram_quantile(1.00, sum(rate(tiflash_raft_read_index_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(tiflash_raft_read_index_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tiflash_raft_read_index_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.80, sum(rate(tiflash_raft_read_index_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(1.00, sum(rate(tiflash_raft_wait_index_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(tiflash_raft_wait_index_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tiflash_raft_wait_index_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.80, sum(rate(tiflash_raft_wait_index_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
sum(tiflash_system_current_metric_RaftNumSnapshotsPendingApply{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
histogram_quantile(0.99, sum(rate(tiflash_raft_apply_write_command_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tiflash_raft_apply_write_command_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
sum(rate(tiflash_raft_apply_write_command_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) / sum(rate(tiflash_raft_apply_write_command_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(delta(tiflash_raft_apply_write_command_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le)
sum(delta(tiflash_raft_command_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="snapshot_predecode"}[1m])) by (le)
sum(delta(tiflash_raft_command_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="snapshot_flush"}[1m])) by (le)
sum(rate(tiflash_raft_process_keys{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
sum(delta(tiflash_raft_command_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="ingest_sst"}[1m])) by (le)
sum(delta(tiflash_raft_write_data_to_storage_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="decode"}[1m])) by (le)
sum(delta(tiflash_raft_write_data_to_storage_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="write"}[1m])) by (le)
sum(tikv_engine_size_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
sum(tikv_store_size_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", type="available"}) by (instance)
sum(tikv_store_size_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", type="capacity"}) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
avg(process_resident_memory_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
rate(node_disk_io_time_seconds_total{tidb_cluster="$tidb_cluster"}[1m])
sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv", type="wal_file_bytes"}[1m])) by (instance)
sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv", type=~"bytes_read|iter_bytes_read"}[1m])) by (instance)
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type!="kv_gc"}[1m])) by (instance,type)
sum(rate(tikv_grpc_msg_fail_total{tidb_cluster="$tidb_cluster", instance=~"$instance", type!="kv_gc"}[1m])) by (instance)
sum(delta(tikv_pd_heartbeat_message_total{tidb_cluster="$tidb_cluster", instance=~"$instance", type="noop"}[1m])) by (instance) < 1
sum(rate(tikv_critical_error_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance, type)
sum(tikv_raftstore_region_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="leader"}) by (instance)
delta(tikv_raftstore_region_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="leader"}[30s]) < -10
sum(tikv_raftstore_region_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="region"}) by (instance)
(time() - process_start_time_seconds{tidb_cluster="$tidb_cluster", job="tikv"})
sum(rate(tikv_critical_error_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance, type)
sum(rate(tikv_scheduler_too_busy_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
sum(rate(tikv_channel_full_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance, type)
sum(rate(tikv_coprocessor_request_error{tidb_cluster="$tidb_cluster", instance=~"$instance", type='full'}[1m])) by (instance)
avg(tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", type="write_stall_percentile99", db=~"$db"}) by (instance, db)
sum(rate(tikv_server_report_failure_msg_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type,instance,store_id)
sum(rate(tikv_storage_engine_async_request_total{tidb_cluster="$tidb_cluster", instance=~"$instance", status!~"success|all"}[1m])) by (instance, status)
sum(rate(tikv_scheduler_stage_total{tidb_cluster="$tidb_cluster", instance=~"$instance", stage=~"snapshot_err|prepare_write_err"}[1m])) by (instance, stage)
sum(rate(tikv_coprocessor_request_error{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance, reason)
sum(rate(tikv_grpc_msg_fail_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance, type)
sum(delta(tikv_raftstore_region_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="leader"}[1m])) by (instance)
sum(tikv_raftstore_leader_missing{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
sum(tikv_engine_size_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (type)
sum(tikv_engine_size_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
sum(rate(tikv_channel_full_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance, type)
sum(rate(tikv_channel_full_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance, type)
sum(rate(tikv_region_written_keys_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
histogram_quantile(0.99, sum(rate(tikv_raftstore_region_size_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tikv_raftstore_region_size_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
sum(rate(tikv_raftstore_region_size_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) / sum(rate(tikv_raftstore_region_size_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tikv_raftstore_region_size_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tikv_region_written_bytes_sum{tidb_cluster="$tidb_cluster"}[1m])) by (instance) / sum(rate(tikv_region_written_bytes_count{tidb_cluster="$tidb_cluster"}[1m])) by (instance)
sum(rate(tikv_region_written_bytes_bucket[1m]))
sum(rate(tikv_region_written_keys_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance) / sum(rate(tikv_region_written_keys_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
sum(rate(tikv_region_written_keys_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tikv_server_request_batch_ratio_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type) / sum(rate(tikv_server_request_batch_ratio_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
histogram_quantile(0.99, sum(rate(tikv_server_request_batch_ratio_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, type))
sum(rate(tikv_server_request_batch_size_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type) / sum(rate(tikv_server_request_batch_size_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
histogram_quantile(0.99, sum(rate(tikv_server_request_batch_size_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, type))
sum(tikv_raftstore_hibernated_peer_state{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance, state)
tikv_server_mem_trace_sum{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"raftstore-.*"}
rate(tikv_raft_entries_evict_bytes{tidb_cluster="$tidb_cluster",instance=~"$instance"}[1m])
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type!="kv_gc"}[1m])) by (type)
sum(rate(tikv_grpc_msg_fail_total{tidb_cluster="$tidb_cluster", instance=~"$instance", type!="kv_gc"}[1m])) by (type)
histogram_quantile(0.99, sum(rate(tikv_grpc_msg_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type!="kv_gc"}[1m])) by (le, type))
sum(rate(tikv_grpc_msg_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type) / sum(rate(tikv_grpc_msg_duration_seconds_count[1m])) by (type)
histogram_quantile(0.99, sum(rate(tikv_server_grpc_req_batch_size_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(tikv_server_grpc_resp_batch_size_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
sum(rate(tikv_server_grpc_req_batch_size_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) / sum(rate(tikv_server_grpc_req_batch_size_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tikv_server_grpc_resp_batch_size_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) / sum(rate(tikv_server_grpc_resp_batch_size_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
histogram_quantile(0.99, sum(rate(tikv_server_request_batch_size_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
sum(rate(tikv_server_request_batch_size_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) / sum(rate(tikv_server_request_batch_size_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
histogram_quantile(0.99, sum(rate(tikv_server_raft_message_batch_size_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
sum(rate(tikv_server_raft_message_batch_size_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) / sum(rate(tikv_server_raft_message_batch_size_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"raftstore_.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"raftstore_.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"apply_[0-9]+"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"sched_.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"grpc.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"unified_read_po*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"store_read_norm.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"store_read_high.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"store_read_low.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"cop_normal.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"cop_high.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"cop_low.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"rocksdb.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"background.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"gc_worker.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"(backup-worker|bkwkr).*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"backup_endpoint"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"(backup-worker|bkwkr).*"}[1m])) by (instance, tid) > 0
sum(tikv_backup_thread_pool_size{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by(instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"sst_.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"sst_.*"}[1m])) by (instance, tid) > 0
count(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"sst_.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance", name=~"cdc_.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance", name=~"cdcwkr.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$tikv_instance", name=~"tso"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"tso_worker"}[1m])) by (instance)
sum(tikv_ttl_checker_processed_regions{instance=~"$instance"}) by (instance) / sum(tikv_raftstore_region_count{instance=~"$instance", type="region"}) by (instance)
sum(rate(tikv_ttl_checker_actions{instance=~"$instance"}[30s])) by (type)
histogram_quantile(1, sum(rate(tikv_ttl_checker_compact_duration_bucket{instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(tikv_ttl_checker_compact_duration_bucket{instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tikv_ttl_checker_compact_duration_bucket{instance=~"$instance"}[1m])) by (le))
sum(rate(tikv_ttl_checker_compact_duration_sum{instance=~"$instance"}[1m])) / sum(rate(tikv_ttl_checker_compact_duration_count{instance=~"$instance"}[1m]))
max(tikv_ttl_checker_poll_interval{instance=~"$instance"})
sum(rate(tikv_pd_request_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
sum(rate(tikv_pd_request_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type) / sum(rate(tikv_pd_request_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
sum(rate(tikv_pd_heartbeat_message_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
tikv_pd_pending_heartbeat_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}
sum(delta(tikv_pd_reconnect_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
sum(rate(tikv_pd_validate_peer_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
tikv_pd_request_forwarded{tidb_cluster="$tidb_cluster", instance=~"$instance"}
tikv_pd_pending_tso_request_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}
tikv_raftstore_slow_score{tidb_cluster="$tidb_cluster", instance=~"$instance"}
histogram_quantile(0.99, sum(rate(tikv_raftstore_inspect_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance, type))
# max_over_time((sum(rate(tikv_io_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", op="write"}[30s])) by (type))[30s:10s])
# max_over_time((sum(rate(tikv_io_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", op="write"}[30s])))[30s:10s])
# max_over_time((sum(rate(tikv_io_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", op="read"}[30s])) by (type))[30s:10s])
# max_over_time((sum(rate(tikv_io_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", op="read"}[30s])))[30s:10s])
avg(tikv_rate_limiter_max_bytes_per_sec{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (type)
histogram_quantile(0.99, sum(rate(tikv_rate_limiter_request_wait_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[30s])) by (le, type))
rate(tikv_rate_limiter_request_wait_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[30s]) / rate(tikv_rate_limiter_request_wait_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[30s])
histogram_quantile(0.99, sum(rate(tikv_io_latency_micros_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", op="read"}[1m])) by (le, type))
histogram_quantile(0.99, sum(rate(tikv_io_latency_micros_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", op="write"}[30s])) by (le, type))
histogram_quantile(0.999, sum(rate(tikv_io_latency_micros_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", op="read"}[1m])) by (le, type))
histogram_quantile(0.999, sum(rate(tikv_io_latency_micros_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", op="write"}[30s])) by (le, type))
histogram_quantile(1.0, sum(rate(tikv_io_latency_micros_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", op="read"}[1m])) by (le, type))
histogram_quantile(1.0, sum(rate(tikv_io_latency_micros_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", op="write"}[30s])) by (le, type))
sum(delta(tikv_raftstore_apply_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le)
histogram_quantile(0.99, sum(rate(tikv_raftstore_apply_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
sum(delta(tikv_raftstore_append_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le)
histogram_quantile(0.99, sum(rate(tikv_raftstore_append_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
sum(delta(tikv_raftstore_commit_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le)
histogram_quantile(0.99, sum(rate(tikv_raftstore_commit_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
sum(rate(tikv_raftstore_raft_ready_handled_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
sum(rate(tikv_raftstore_raft_process_duration_secs_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="ready"}[1m]))
histogram_quantile(0.99, sum(rate(tikv_raftstore_event_duration_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, type))
sum(delta(tikv_raftstore_raft_process_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type='ready'}[1m])) by (le)
histogram_quantile(0.99, sum(rate(tikv_raftstore_raft_process_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type='ready'}[1m])) by (le, instance))
sum(delta(tikv_replica_read_lock_check_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le)
sum(rate(tikv_raftstore_raft_sent_message_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
sum(rate(tikv_server_raft_message_flush_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
sum(rate(tikv_server_raft_message_recv_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
sum(rate(tikv_raftstore_raft_sent_message_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
sum(rate(tikv_raftstore_raft_sent_message_total{tidb_cluster="$tidb_cluster", instance=~"$instance", type="vote"}[1m])) by (instance)
sum(rate(tikv_raftstore_raft_dropped_message_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
histogram_quantile(0.99, sum(rate(tikv_raftstore_apply_proposal_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
sum(rate(tikv_raftstore_proposal_total{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"local_read|normal|read_index"}[1m])) by (type)
sum(rate(tikv_raftstore_proposal_total{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"local_read|read_index"}[1m])) by (instance)
sum(rate(tikv_raftstore_proposal_total{tidb_cluster="$tidb_cluster", instance=~"$instance", type="normal"}[1m])) by (instance)
sum(delta(tikv_raftstore_request_wait_time_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le)
histogram_quantile(0.99, sum(rate(tikv_raftstore_request_wait_time_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
sum(delta(tikv_raftstore_apply_wait_time_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le)
histogram_quantile(0.99, sum(rate(tikv_raftstore_apply_wait_time_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
avg(rate(tikv_raftstore_propose_log_size_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
histogram_quantile(0.99, sum(rate(tikv_raftstore_store_perf_context_time_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, type))
histogram_quantile(0.99, sum(rate(tikv_raftstore_apply_perf_context_time_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, type))
sum(rate(tikv_raftstore_proposal_total{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"conf_change|transfer_leader"}[1m])) by (type)
sum(rate(tikv_raftstore_admin_cmd_total{tidb_cluster="$tidb_cluster", instance=~"$instance", status="success", type!="compact"}[1m]))  by (type)
sum(rate(tikv_raftstore_check_split_total{tidb_cluster="$tidb_cluster", instance=~"$instance", type!="ignore"}[1m])) by (type)
histogram_quantile(0.9999, sum(rate(tikv_raftstore_check_split_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
sum(delta(tikv_load_base_split_event[1m])) by (type)

tikv_read_qps_topn{order="0"}
sum(rate(tikv_raftstore_local_read_reject_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance, reason)
sum(rate(tikv_raftstore_local_read_executed_requests{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
sum(rate(tikv_multilevel_level_elapsed{tidb_cluster="$tidb_cluster", instance=~"$instance", name="unified-read-pool"}[1m])) by (level)
tikv_multilevel_level0_chance{tidb_cluster="$tidb_cluster", instance=~"$instance", name="unified-read-pool"}
sum(avg_over_time(tikv_unified_read_pool_running_tasks{tidb_cluster="$tidb_cluster"}[1m])) by (instance)
sum(rate(tikv_storage_command_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
sum(rate(tikv_storage_engine_async_request_total{tidb_cluster="$tidb_cluster", instance=~"$instance", status!~"all|success"}[1m])) by (status)
sum(delta(tikv_storage_engine_async_request_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="snapshot"}[1m])) by (le)
sum(delta(tikv_storage_engine_async_request_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="write"}[1m])) by (le)
sum(tikv_scheduler_write_flow{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
sum(tikv_scheduler_throttle_flow{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance) != 0
sum(tikv_scheduler_discard_ratio{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance) / 10000000
tikv_scheduler_down_flow{tidb_cluster="$tidb_cluster", instance=~"$instance"} / 10000000
tikv_scheduler_up_flow{tidb_cluster="$tidb_cluster", instance=~"$instance"} / 10000000
tikv_scheduler_throttle_cf{tidb_cluster="$tidb_cluster", instance=~"$instance"} != 0
sum(delta(tikv_scheduler_throttle_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le)
sum(tikv_scheduler_l0_flow{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance, cf)
sum(tikv_scheduler_flush_flow{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance, cf)
sum(tikv_scheduler_l0_target_flow{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
sum(tikv_scheduler_l0_flow{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
sum(tikv_scheduler_flush_flow{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
sum(rate(tikv_scheduler_throttle_action_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (cf, type)
max(tikv_scheduler_l0{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
max(tikv_scheduler_memtable{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
max(tikv_scheduler_l0_avg{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
max(tikv_scheduler_flush_l0{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
avg(tikv_engine_num_files_at_level{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv", level="0"}) by (cf, level)
sum(tikv_engine_pending_compaction_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv"}) by (cf)
max(tikv_scheduler_pending_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance) / 10000000
sum(rate(tikv_scheduler_too_busy_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (stage)
sum(rate(tikv_scheduler_stage_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (stage)
sum(tikv_scheduler_writing_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
sum(rate(tikv_scheduler_commands_pri_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (priority)
sum(tikv_scheduler_contex_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
sum(rate(tikv_scheduler_too_busy_total{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m]))
sum(rate(tikv_scheduler_stage_total{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m])) by (stage)
histogram_quantile(0.99, sum(rate(tikv_scheduler_command_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tikv_scheduler_command_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m])) by (le))
sum(rate(tikv_scheduler_command_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m])) / sum(rate(tikv_scheduler_command_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m]))
histogram_quantile(0.99, sum(rate(tikv_scheduler_latch_wait_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tikv_scheduler_latch_wait_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m])) by (le))
sum(rate(tikv_scheduler_latch_wait_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m])) / sum(rate(tikv_scheduler_latch_wait_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m]))
histogram_quantile(0.99, sum(rate(tikv_scheduler_kv_command_key_read_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tikv_scheduler_kv_command_key_read_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m])) by (le))
sum(rate(tikv_scheduler_kv_command_key_read_sum{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m])) / sum(rate(tikv_scheduler_kv_command_key_read_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m]))
histogram_quantile(0.99, sum(rate(tikv_scheduler_kv_command_key_write_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tikv_scheduler_kv_command_key_write_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m])) by (le))
sum(rate(tikv_scheduler_kv_command_key_write_sum{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m])) / sum(rate(tikv_scheduler_kv_command_key_write_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m]))
sum(rate(tikv_scheduler_kv_scan_details{tidb_cluster="$tidb_cluster", instance=~"$instance", req="$command"}[1m])) by (tag)
sum(rate(tikv_scheduler_kv_scan_details{tidb_cluster="$tidb_cluster", instance=~"$instance", req="$command", cf="lock"}[1m])) by (tag)
sum(rate(tikv_scheduler_kv_scan_details{tidb_cluster="$tidb_cluster", instance=~"$instance", req="$command", cf="write"}[1m])) by (tag)
sum(rate(tikv_scheduler_kv_scan_details{tidb_cluster="$tidb_cluster", instance=~"$instance", req="$command", cf="default"}[1m])) by (tag)
sum(delta(tikv_storage_check_mem_lock_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="$command"}[1m])) by (le)
sum(rate(tikv_gcworker_gc_tasks_vec{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (task)
sum(rate(tikv_storage_gc_skipped_counter{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (task)
sum(rate(tikv_gcworker_gc_task_fail_vec{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (task)
sum(rate(tikv_gc_worker_too_busy{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
histogram_quantile(1, sum(rate(tikv_gcworker_gc_task_duration_vec_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, task))
histogram_quantile(0.99, sum(rate(tikv_gcworker_gc_task_duration_vec_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, task))
histogram_quantile(0.95, sum(rate(tikv_gcworker_gc_task_duration_vec_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, task))
sum(rate(tikv_gcworker_gc_task_duration_vec_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (task) / sum(rate(tikv_gcworker_gc_task_duration_vec_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (task)
histogram_quantile(1.0, sum(rate(tidb_tikvclient_gc_seconds_bucket{tidb_cluster="$tidb_cluster"}[1m])) by (instance, le))
sum(rate(tidb_tikvclient_gc_worker_actions_total{tidb_cluster="$tidb_cluster"}[1m])) by (type)
max(tidb_tikvclient_range_task_stats{tidb_cluster="$tidb_cluster", type=~"resolve-locks.*"}) by (result)
sum(tikv_gcworker_autogc_processed_regions{tidb_cluster="$tidb_cluster", instance=~"$instance", type="scan"}) by (instance) / sum(tikv_raftstore_region_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="region"}) by (instance)
sum(rate(tikv_storage_mvcc_gc_delete_versions_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
max(tikv_gcworker_autogc_safe_point{tidb_cluster="$tidb_cluster"}) by (instance) / (2^18)
max(tidb_tikvclient_gc_config{tidb_cluster="$tidb_cluster", type="tikv_gc_life_time"})
max(tidb_tikvclient_gc_config{tidb_cluster="$tidb_cluster", type="tikv_gc_run_interval"})
sum(rate(tikv_gc_compaction_filtered{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tikv_gc_compaction_deleted{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tikv_gc_compaction_mvcc_rollback{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tikv_gc_compaction_mvcc_delete_skip_older{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tikv_gc_compaction_filter_next{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tikv_gc_compaction_filter_seek{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tikv_gc_compaction_failure{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tikv_gcworker_gc_keys{tidb_custer="$tidb_cluster",instance=~"$instance", cf="write"}[1m])) by (tag)
sum(rate(tikv_gcworker_gc_keys{tidb_custer="$tidb_cluster",instance=~"$instance", cf="default"}[1m])) by (tag)
sum(delta(tikv_raftstore_raft_sent_message_total{tidb_cluster="$tidb_cluster", instance=~"$instance", type="snapshot"}[1m]))
histogram_quantile(0.99, sum(rate(tikv_server_send_snapshot_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(tikv_raftstore_snapshot_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="apply"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(tikv_raftstore_snapshot_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="generate"}[1m])) by (le))
sum(tikv_raftstore_snapshot_traffic_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (type)
histogram_quantile(0.9999, sum(rate(tikv_snapshot_size_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.9999, sum(rate(tikv_snapshot_kv_count_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
sum(delta(tikv_raftstore_snapshot_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type, status)
sum(delta(tikv_raftstore_clean_region_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
sum(rate(tikv_worker_handled_task_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (name)
sum(rate(tikv_worker_pending_task_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (name)
sum(rate(tikv_futurepool_handled_task_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (name)
sum(rate(tikv_futurepool_pending_task_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (name)
sum(rate(tikv_coprocessor_request_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le)
histogram_quantile(1, sum(rate(tikv_coprocessor_request_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le,req))
histogram_quantile(0.99, sum(rate(tikv_coprocessor_request_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le,req))
sum(rate(tikv_coprocessor_request_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (req)
sum(rate(tikv_coprocessor_request_error{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (reason)
sum(rate(tikv_coprocessor_scan_keys_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (req)
histogram_quantile(1, avg(rate(tikv_coprocessor_scan_keys_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, req))
histogram_quantile(0.99, avg(rate(tikv_coprocessor_scan_keys_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, req))
sum(rate(tikv_coprocessor_rocksdb_perf{tidb_cluster="$tidb_cluster", instance=~"$instance" ,metric="internal_delete_skipped_count"}[1m])) by (req)
sum(rate(tikv_coprocessor_response_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
histogram_quantile(1, sum(rate(tikv_coprocessor_request_handle_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le,req))
histogram_quantile(0.99, sum(rate(tikv_coprocessor_request_handle_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le,req))
histogram_quantile(0.95, sum(rate(tikv_coprocessor_request_handle_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance,req))
histogram_quantile(1, sum(rate(tikv_coprocessor_request_wait_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le,req))
histogram_quantile(0.99, sum(rate(tikv_coprocessor_request_wait_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le,req))
histogram_quantile(0.95, sum(rate(tikv_coprocessor_request_wait_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance,req))
sum(rate(tikv_coprocessor_dag_request_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (vec_type)
sum(rate(tikv_coprocessor_executor_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
sum(rate(tikv_coprocessor_scan_details{tidb_cluster="$tidb_cluster", instance=~"$instance", req="select"}[1m])) by (tag)
sum(rate(tikv_coprocessor_scan_details{tidb_cluster="$tidb_cluster", instance=~"$instance", req="index"}[1m])) by (tag)
sum(rate(tikv_coprocessor_scan_details{tidb_cluster="$tidb_cluster", instance=~"$instance", req="select"}[1m])) by (tag,cf)
sum(rate(tikv_coprocessor_scan_details{tidb_cluster="$tidb_cluster", instance=~"$instance", req="index"}[1m])) by (tag,cf)
sum(rate(tikv_coprocessor_mem_lock_check_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le)
sum(tikv_threads_state{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance, state)
sum(tikv_threads_state{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
topk(20, sum(rate(tikv_threads_io_bytes_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[30s])) by (name, io) > 1024)
topk(20, max(rate(tikv_thread_voluntary_context_switches{tidb_cluster="$tidb_cluster", instance=~"$instance"}[30s])) by (name) > 200)
topk(20, max(rate(tikv_thread_nonvoluntary_context_switches{tidb_cluster="$tidb_cluster", instance=~"$instance"}[30s])) by (name) > 100)
sum(rate(tikv_engine_memtable_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="memtable_hit"}[1m]))
sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type=~"block_cache_data_hit|block_cache_filter_hit"}[1m]))
sum(rate(tikv_engine_get_served{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="get_hit_l0"}[1m]))
sum(rate(tikv_engine_get_served{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="get_hit_l1"}[1m]))
sum(rate(tikv_engine_get_served{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="get_hit_l2_and_up"}[1m]))
max(tikv_engine_get_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="get_max"})
avg(tikv_engine_get_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="get_percentile99"})
avg(tikv_engine_get_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="get_percentile95"})
avg(tikv_engine_get_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="get_average"})
sum(rate(tikv_engine_locate{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="number_db_seek"}[1m]))
sum(rate(tikv_engine_locate{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="number_db_seek_found"}[1m]))
sum(rate(tikv_engine_locate{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="number_db_next"}[1m]))
sum(rate(tikv_engine_locate{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="number_db_next_found"}[1m]))
sum(rate(tikv_engine_locate{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="number_db_prev"}[1m]))
sum(rate(tikv_engine_locate{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="number_db_prev_found"}[1m]))
max(tikv_engine_seek_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="seek_max"})
avg(tikv_engine_seek_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="seek_percentile99"})
avg(tikv_engine_seek_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="seek_percentile95"})
avg(tikv_engine_seek_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="seek_average"})
sum(rate(tikv_engine_write_served{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type=~"write_done_by_self|write_done_by_other"}[1m]))
sum(rate(tikv_engine_write_served{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="write_timeout"}[1m]))
sum(rate(tikv_engine_write_served{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="write_with_wal"}[1m]))
max(tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="write_max"})
avg(tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="write_percentile99"})
avg(tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="write_percentile95"})
avg(tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="write_average"})
max(tikv_engine_write_wal_time_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="write_wal_micros_max"})
avg(tikv_engine_write_wal_time_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="write_wal_micros_percentile99"})
avg(tikv_engine_write_wal_time_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="write_wal_micros_percentile95"})
avg(tikv_engine_write_wal_time_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="write_wal_micros_average"})
sum(rate(tikv_engine_wal_file_synced{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}[1m]))
max(tikv_engine_wal_file_sync_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="wal_file_sync_max"})
avg(tikv_engine_wal_file_sync_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="wal_file_sync_percentile99"})
avg(tikv_engine_wal_file_sync_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="wal_file_sync_percentile95"})
avg(tikv_engine_wal_file_sync_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="wal_file_sync_average"})
sum(rate(tikv_engine_event_total{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}[1m])) by (type)
max(tikv_engine_compaction_time{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="compaction_time_max"})
avg(tikv_engine_compaction_time{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="compaction_time_percentile99"})
avg(tikv_engine_compaction_time{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="compaction_time_percentile95"})
avg(tikv_engine_compaction_time{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="compaction_time_average"})
max(tikv_engine_sst_read_micros{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="sst_read_micros_max"})
avg(tikv_engine_sst_read_micros{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="sst_read_micros_percentile99"})
avg(tikv_engine_sst_read_micros{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="sst_read_micros_percentile95"})
avg(tikv_engine_sst_read_micros{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="sst_read_micros_average"})
max(tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="write_stall_max"})
avg(tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="write_stall_percentile99"})
avg(tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="write_stall_percentile95"})
avg(tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="write_stall_average"})
avg(tikv_engine_memory_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="mem-tables"}) by (cf)
sum(rate(tikv_engine_memtable_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="memtable_hit"}[1m])) / (sum(rate(tikv_engine_memtable_efficiency{tidb_cluster="$tidb_cluster", db="$db", type="memtable_hit"}[1m])) + sum(rate(tikv_engine_memtable_efficiency{tidb_cluster="$tidb_cluster", db="$db", type="memtable_miss"}[1m])))
topk(20, avg(tikv_engine_block_cache_size_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}) by(cf, instance))
sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_hit"}[1m])) / (sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_hit"}[1m])) + sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_miss"}[1m])))
sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_data_hit"}[1m])) / (sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_data_hit"}[1m])) + sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_data_miss"}[1m])))
sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_filter_hit"}[1m])) / (sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_filter_hit"}[1m])) + sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_filter_miss"}[1m])))
sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_index_hit"}[1m])) / (sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_index_hit"}[1m])) + sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_index_miss"}[1m])))
sum(rate(tikv_engine_bloom_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="bloom_prefix_useful"}[1m])) / sum(rate(tikv_engine_bloom_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="bloom_prefix_checked"}[1m]))
sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_byte_read"}[1m]))
sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_byte_write"}[1m]))
sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_data_bytes_insert"}[1m]))
sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_filter_bytes_insert"}[1m]))
sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_filter_bytes_evict"}[1m]))
sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_index_bytes_insert"}[1m]))
sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_index_bytes_evict"}[1m]))
sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_add"}[1m]))
sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_data_add"}[1m]))
sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_filter_add"}[1m]))
sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_index_add"}[1m]))
sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="block_cache_add_failures"}[1m]))
sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="keys_read"}[1m]))
sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="keys_written"}[1m]))
sum(rate(tikv_engine_compaction_num_corrupt_keys{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}[1m]))
sum(tikv_engine_estimate_num_keys{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}) by (cf)
sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="bytes_read"}[1m]))
sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="iter_bytes_read"}[1m]))
max(tikv_engine_bytes_per_read{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="bytes_per_read_max"})
avg(tikv_engine_bytes_per_read{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="bytes_per_read_percentile99"})
avg(tikv_engine_bytes_per_read{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="bytes_per_read_percentile95"})
avg(tikv_engine_bytes_per_read{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="bytes_per_read_average"})
sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="wal_file_bytes"}[1m]))
sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="bytes_written"}[1m]))
max(tikv_engine_bytes_per_write{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="bytes_per_write_max"})
avg(tikv_engine_bytes_per_write{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="bytes_per_write_percentile99"})
avg(tikv_engine_bytes_per_write{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="bytes_per_write_percentile95"})
avg(tikv_engine_bytes_per_write{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db",type="bytes_per_write_average"})
sum(rate(tikv_engine_compaction_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="bytes_read"}[1m]))
sum(rate(tikv_engine_compaction_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="bytes_written"}[1m]))
sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="flush_write_bytes"}[1m]))
sum(tikv_engine_pending_compaction_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}) by (cf)
sum(rate(tikv_engine_read_amp_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db", type="read_amp_total_read_bytes"}[1m])) by (instance) / sum(rate(tikv_engine_read_amp_flow_bytes{tidb_cluster="$tidb_cluster", db="$db", type="read_amp_estimate_useful_bytes"}[1m])) by (instance)
avg(tikv_engine_compression_ratio{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}) by (level)
tikv_engine_num_snapshots{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}
tikv_engine_oldest_snapshot_duration{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}
avg(tikv_engine_num_files_at_level{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}) by (cf, level)
histogram_quantile(0.99, sum(rate(tikv_snapshot_ingest_sst_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}[1m])) by (le))
sum(rate(tikv_snapshot_ingest_sst_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}[1m])) / sum(rate(tikv_snapshot_ingest_sst_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}[1m]))
tikv_engine_stall_conditions_changed{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}
sum(increase(tikv_engine_write_stall_reason{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}[1m])) by (type)
sum(rate(tikv_engine_compaction_reason{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}[1m])) by (cf, reason)
sum(rate(tikv_raftstore_compaction_guard_action_total{tidb_cluster="$tidb_cluster", instance=~"$instance", cf=~"default|write"}[1m])) by (cf, type)
sum(tikv_engine_titandb_num_live_blob_file{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db"})
sum(tikv_engine_titandb_num_obsolete_blob_file{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db"})
sum(tikv_engine_titandb_live_blob_file_size{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db"})
sum(tikv_engine_titandb_obsolete_blob_file_size{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db"})
sum(tikv_engine_titandb_live_blob_size{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db"})
topk(20, avg(tikv_engine_blob_cache_size_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db"}) by(cf, instance))
sum(rate(tikv_engine_blob_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_cache_hit"}[1m])) / (sum(rate(tikv_engine_blob_cache_efficiency{tidb_cluster="$tidb_cluster", db="$titan_db", type="blob_cache_hit"}[1m])) + sum(rate(tikv_engine_blob_cache_efficiency{tidb_cluster="$tidb_cluster", db="$titan_db", type="blob_cache_miss"}[1m])))
avg(tikv_engine_blob_iter_touch_blob_file_count{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_iter_touch_blob_file_count_average"})
avg(tikv_engine_blob_iter_touch_blob_file_count{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_iter_touch_blob_file_count_percentile95"})
avg(tikv_engine_blob_iter_touch_blob_file_count{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_iter_touch_blob_file_count_percentile99"})
max(tikv_engine_blob_iter_touch_blob_file_count{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_iter_touch_blob_file_count_max"})
sum(tikv_engine_titandb_blob_file_discardable_ratio{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db"}) by (ratio)
avg(tikv_engine_blob_key_size{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_key_size_average"})
avg(tikv_engine_blob_key_size{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_key_size_percentile95"})
avg(tikv_engine_blob_key_size{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_key_size_percentile99"})
max(tikv_engine_blob_key_size{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_key_size_max"})
avg(tikv_engine_blob_value_size{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_value_size_average"})
avg(tikv_engine_blob_value_size{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_value_size_percentile95"})
avg(tikv_engine_blob_value_size{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_value_size_percentile99"})
max(tikv_engine_blob_value_size{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_value_size_max"})
sum(rate(tikv_engine_blob_locate{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="number_blob_get"}[2m]))
avg(tikv_engine_blob_get_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type=~".*_average"}) by (type)
avg(tikv_engine_blob_get_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type=~".*_percentile95"}) by (type)
avg(tikv_engine_blob_get_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type=~".*_percentile99"}) by (type)
max(tikv_engine_blob_get_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type=~".*_max"}) by (type)
sum(rate(tikv_engine_blob_locate{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="number_blob_seek"}[2m]))
sum(rate(tikv_engine_blob_locate{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="number_blob_prev"}[2m]))
sum(rate(tikv_engine_blob_locate{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="number_blob_next"}[2m]))
avg(tikv_engine_blob_seek_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type=~".*_average"}) by (type)
avg(tikv_engine_blob_seek_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type=~".*_percentile95"}) by (type)
avg(tikv_engine_blob_seek_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type=~".*_percentile99"}) by (type)
max(tikv_engine_blob_seek_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type=~".*_max"}) by (type)
avg(tikv_engine_blob_next_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type=~".*_average"}) by (type)
avg(tikv_engine_blob_next_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type=~".*_percentile95"}) by (type)
avg(tikv_engine_blob_next_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type=~".*_percentile99"}) by (type)
max(tikv_engine_blob_next_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type=~".*_max"}) by (type)
avg(tikv_engine_blob_prev_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type=~".*_average"}) by (type)
avg(tikv_engine_blob_prev_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type=~".*_percentile95"}) by (type)
avg(tikv_engine_blob_prev_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type=~".*_percentile99"}) by (type)
max(tikv_engine_blob_prev_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type=~".*_max"}) by (type)
sum(rate(tikv_engine_blob_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type=~"keys.*"}[30s])) by (type)
sum(rate(tikv_engine_blob_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type=~"bytes.*"}[2m])) by (type)
avg(tikv_engine_blob_file_read_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_file_read_micros_average"})
avg(tikv_engine_blob_file_read_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_file_read_micros_percentile99"})
avg(tikv_engine_blob_file_read_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_file_read_micros_percentile95"})
max(tikv_engine_blob_file_read_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_file_read_micros_max"})
avg(tikv_engine_blob_file_write_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_file_write_micros_average"})
avg(tikv_engine_blob_file_write_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_file_write_micros_percentile99"})
avg(tikv_engine_blob_file_write_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_file_write_micros_percentile95"})
max(tikv_engine_blob_file_write_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_file_write_micros_max"})
sum(rate(tikv_engine_blob_file_synced{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db"}[2m]))
avg(tikv_engine_blob_file_sync_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_file_sync_micros_average"})
avg(tikv_engine_blob_file_sync_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_file_sync_micros_percentile95"})
avg(tikv_engine_blob_file_sync_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_file_sync_micros_percentile99"})
max(tikv_engine_blob_file_sync_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_file_sync_micros_max"})
sum(rate(tikv_engine_blob_gc_action_count{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db"}[2m])) by (type)
avg(tikv_engine_blob_gc_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_gc_micros_average"})
avg(tikv_engine_blob_gc_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_gc_micros_percentile95"})
avg(tikv_engine_blob_gc_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_gc_micros_percentile99"})
avg(tikv_engine_blob_gc_micros_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_gc_micros_max"})
sum(rate(tikv_engine_blob_gc_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type=~"keys.*"}[30s])) by (type)
sum(rate(tikv_engine_blob_gc_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type=~"bytes.*"}[30s])) by (type)
avg(tikv_engine_blob_gc_input_file{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_gc_input_file_average"})
avg(tikv_engine_blob_gc_input_file{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_gc_input_file_percentile95"})
avg(tikv_engine_blob_gc_input_file{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_gc_input_file_percentile99"})
max(tikv_engine_blob_gc_input_file{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_gc_input_file_max"})
avg(tikv_engine_blob_gc_output_file{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_gc_output_file_average"})
avg(tikv_engine_blob_gc_output_file{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_gc_output_file_percentile95"})
avg(tikv_engine_blob_gc_output_file{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_gc_output_file_percentile99"})
max(tikv_engine_blob_gc_outputt_file{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db", type="blob_gc_output_file_max"})
sum(rate(tikv_engine_blob_gc_file_count{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$titan_db"}[2m])) by (type)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"waiter_manager.*"}[1m])) by (instance, name)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"deadlock_detect.*"}[1m])) by (instance, name)
sum(rate(tikv_lock_manager_task_counter{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
sum(rate(tikv_lock_manager_waiter_lifetime_duration_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) / sum(rate(tikv_lock_manager_waiter_lifetime_duration_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
histogram_quantile(0.99, sum(rate(tikv_lock_manager_waiter_lifetime_duration_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.9999, sum(rate(tikv_lock_manager_waiter_lifetime_duration_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
sum(max_over_time(tikv_lock_manager_wait_table_status{tidb_cluster="$tidb_cluster", instance=~"$instance"}[15s])) by (type)
sum(rate(tikv_lock_manager_detect_duration_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) / sum(rate(tikv_lock_manager_detect_duration_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
histogram_quantile(0.99, sum(rate(tikv_lock_manager_detect_duration_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
sum(rate(tikv_lock_manager_error_counter{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
sum(max_over_time(tikv_lock_manager_detector_leader_heartbeat{tidb_cluster="$tidb_cluster", instance=~"$instance"}[15s])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"resolved_ts.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"advance_ts.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"inc_scan.*"}[1m])) by (instance)
sum(tikv_resolved_ts_min_resolved_ts_gap_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
sum(tikv_resolved_ts_region_resolve_status{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (type)
sum(delta(tikv_resolved_ts_check_leader_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le)
sum(delta(tikv_resolved_ts_fail_advance_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance, reason)
histogram_quantile(0.99, sum(rate(tikv_check_leader_request_size_bytes_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
histogram_quantile(0.99, sum(rate(tikv_check_leader_request_item_count_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
histogram_quantile(0.99, sum(rate(tikv_check_leader_request_item_count_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
avg(tikv_resolved_ts_lock_heap_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
avg(tikv_resolved_ts_channel_penging_cmd_bytes_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
tikv_allocator_stats{tidb_cluster="$tidb_cluster", instance=~"$instance"}
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"b.*k.*w.*k.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"backup_endpoint"}[1m])) by (instance)
sum(tikv_backup_thread_pool_size{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by(instance)
delta(tikv_backup_error_counter{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])
max(rate(tikv_backup_range_size_bytes_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", cf="write"}[1m])) by (le)
max(rate(tikv_backup_range_size_bytes_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", cf="default"}[1m])) by (le)
sum(rate(tikv_backup_range_size_bytes_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
rate(tikv_backup_range_size_bytes_sum{tidb_cluster="$tidb_cluster"}[1m])
max(rate(tikv_backup_range_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="snapshot"}[1m])) by (le)
max(rate(tikv_backup_range_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="scan"}[1m])) by (le)
max(rate(tikv_backup_range_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"save.*"}[1m])) by (le)
histogram_quantile(0.99, sum(rate(tikv_backup_range_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, type))
histogram_quantile(0.95, sum(rate(tikv_backup_range_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, type))
sum(rate(tikv_backup_range_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type) / sum(rate(tikv_backup_range_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
max(rate(tikv_external_storage_create_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le)
histogram_quantile(1, sum(rate(tikv_external_storage_create_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le,type))
histogram_quantile(0.99, sum(rate(tikv_external_storage_create_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le,type))
histogram_quantile(1, sum(rate(tikv_coprocessor_request_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", req=~"analyze.*|checksum.*"}[1m])) by (le,req))
histogram_quantile(0.99, sum(rate(tikv_coprocessor_request_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", req=~"analyze.*|checksum.*"}[1m])) by (le,req))
rate(node_disk_io_time_seconds_total{tidb_cluster="$tidb_cluster"}[1m])
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"sst_.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"sst_.*"}[1m])) by (instance, tid) > 0
count(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"sst_.*"}[1m])) by (instance)
count(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"sst_.*"}[1m])) by (instance)
delta(tikv_import_error_counter{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])
histogram_quantile(0.99, avg(rate(tikv_import_rpc_duration_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, request))
histogram_quantile(0.5, sum(rate(tikv_import_rpc_duration_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, request, instance))
sum(rate(tikv_import_rpc_duration_count{tidb_cluster="$tidb_cluster", instance=~"$instance", request!="switch_mode"}[30s])) by (instance, request)
sum(rate(tikv_import_rpc_duration_count{tidb_cluster="$tidb_cluster", instance=~"$instance", request!="switch_mode"}[30s])) by (request)
max(rate(tikv_import_rpc_duration_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", request=~"download|write"}[1m])) by (le)
max(rate(tikv_import_download_duration_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="queue"}[1m])) by (le)
max(rate(tikv_import_download_duration_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="read"}[1m])) by (le)
max(rate(tikv_import_download_duration_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="rewrite"}[1m])) by (le)
max(rate(tikv_import_rpc_duration_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", request=~"ingest"}[1m])) by (le)
max(rate(tikv_import_ingest_duration_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"ingest"}[1m])) by (le)
max(rate(tikv_import_ingest_byte{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le)
sum(rate(tikv_import_download_bytes_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
sum(rate(tikv_import_download_bytes_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
tikv_encryption_data_key_storage_total{tidb_cluster="$tidb_cluster"}
tikv_encryption_file_num{tidb_cluster="$tidb_cluster"}
tikv_encryption_is_initialized{tidb_cluster="$tidb_cluster"}
tikv_encryption_meta_file_size_bytes{tidb_cluster="$tidb_cluster"}
sum(rate(tikv_coprocessor_rocksdb_perf{tidb_cluster="$tidb_cluster", instance=~"$instance" ,metric="encrypt_data_nanos"}[1m])) by (req)
sum(rate(tikv_coprocessor_rocksdb_perf{tidb_cluster="$tidb_cluster", instance=~"$instance" ,metric="decrypt_data_nanos"}[1m])) by (req)
histogram_quantile(1, sum(rate(tikv_encryption_write_read_file_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, type, operation))
histogram_quantile(0.95, sum(rate(tikv_encryption_write_read_file_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, type, operation))
sum(rate(tikv_encryption_write_read_file_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, type, operation) / sum(rate(tikv_encryption_write_read_file_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, type, operation)
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m])) by (instance)
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_get|kv_scan|kv_batch_get|kv_batch_get_command|coprocessor"}[1m])) by (instance)
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_get|kv_scan|kv_batch_get|kv_batch_get_command|coprocessor"}[1m]))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_batch_get|kv_batch_get_command|kv_get|kv_scan"}[1m]))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"coprocessor"}[1m]))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
histogram_quantile(0.999, sum(rate(tikv_grpc_msg_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m])) by (le, instance))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
histogram_quantile(0.999, sum(rate(tikv_grpc_msg_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_get|kv_scan|kv_batch_get|kv_batch_get_command|coprocessor"}[1m])) by (le, instance))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
histogram_quantile(0.999, sum(rate(tikv_grpc_msg_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(tikv_grpc_msg_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m])) by (le))
histogram_quantile(1, sum(rate(tikv_grpc_msg_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m])) by (le))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
histogram_quantile(0.999, sum(rate(tikv_grpc_msg_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_get|kv_scan|kv_batch_get|kv_batch_get_command|coprocessor"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(tikv_grpc_msg_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_get|kv_batch_get|kv_batch_get_command|kv_scan|coprocessor"}[1m])) by (le))
histogram_quantile(0.999, sum(rate(tikv_grpc_msg_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_get|kv_scan|kv_batch_get|kv_batch_get_command|coprocessor"}[1m])) by (le))
max(tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", type="write_stall_max"})
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
max(tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", type="write_stall_percentile99"})
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"coprocessor"}[1m]))
histogram_quantile(0.999, sum(rate(tikv_grpc_msg_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"coprocessor"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(tikv_grpc_msg_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"coprocessor"}[1m])) by (le))
histogram_quantile(1, sum(rate(tikv_grpc_msg_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"coprocessor"}[1m])) by (le))
histogram_quantile(0.999, sum(rate(tikv_scheduler_latch_wait_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"prewrite|commit|acquire_pessimistic_lock"}[1m])) by (le))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
histogram_quantile(1, sum(rate(tikv_scheduler_latch_wait_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"prewrite|commit|acquire_pessimistic_lock"}[1m])) by (le))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_batch_get|kv_batch_get_command|kv_get|kv_scan"}[1m]))
histogram_quantile(0.999, sum(rate(tikv_grpc_msg_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_batch_get|kv_batch_get_command|kv_get|kv_scan"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(tikv_grpc_msg_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_batch_get|kv_batch_get_command|kv_get|kv_scan"}[1m])) by (le))
histogram_quantile(1, sum(rate(tikv_grpc_msg_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_batch_get|kv_batch_get_command|kv_get|kv_scan"}[1m])) by (le))
sum(tikv_engine_pending_compaction_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv"})
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
sum(tikv_engine_pending_compaction_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft"})
sum(tikv_engine_pending_compaction_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv"}) by (instance)
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
sum(delta(pd_schedule_operators_count{tidb_cluster="$tidb_cluster", event="finish", type=~"balance-region|move-hot-write-peer|move-hot-read-peer|make-up-replica"}[1m]))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
sum(delta(pd_schedule_operators_count{tidb_cluster="$tidb_cluster", event="finish", type=~"transfer-hot-read-leader|transfer-hot-write-leader|balance-leader"}[1m]))
sum(delta(pd_schedule_operators_count{tidb_cluster="$tidb_cluster", event="finish", type=~"balance-region"}[1m]))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
sum(rate(tikv_worker_pending_task_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name="pd-worker"}[1m]))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
sum(delta(pd_schedule_operators_count{tidb_cluster="$tidb_cluster", event="finish", type=~"balance-region"}[1m]))
1 - sum(pd_scheduler_store_status{tidb_cluster="$tidb_cluster", type="store_available"}) by (store) / sum(pd_scheduler_store_status{tidb_cluster="$tidb_cluster", type="store_capacity"}) by (store)
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
100 - avg by (instance) (irate(node_cpu_seconds_total{tidb_cluster="$tidb_cluster", mode="idle"}[1m]) ) * 100
sum(rate(tikv_futurepool_pending_task_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"sched-worker-pool"}[1m]))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
histogram_quantile(0.999, sum(rate(tikv_scheduler_wait_for_process_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"prewrite|commit|acquire_pessimistic_lock"}[1m])) by (le))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
histogram_quantile(0.99, sum(rate(tikv_scheduler_wait_for_process_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"prewrite|commit|acquire_pessimistic_lock"}[1m])) by (le))
histogram_quantile(1, sum(rate(tikv_scheduler_wait_for_process_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"prewrite|commit|acquire_pessimistic_lock"}[1m])) by (le))
histogram_quantile(0.999, sum(rate(tikv_raftstore_request_wait_time_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
histogram_quantile(0.99, sum(rate(tikv_raftstore_request_wait_time_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(1, sum(rate(tikv_raftstore_request_wait_time_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.999, sum(rate(tikv_raftstore_apply_wait_time_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
histogram_quantile(0.99, sum(rate(tikv_raftstore_apply_wait_time_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
avg(tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft",type="write_percentile99"})
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
avg(tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft",type="write_max"})
avg(tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv",type="write_percentile99"})
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
avg(tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv",type="write_max"})
sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv", type="flush_write_bytes"}[1m])) + sum(rate(tikv_engine_compaction_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv", type="bytes_written"}[1m]))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
sum(rate(tikv_engine_compaction_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv", type="bytes_read"}[1m]))
sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft", type="flush_write_bytes"}[1m])) + sum(rate(tikv_engine_compaction_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft", type="bytes_written"}[1m]))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
sum(rate(tikv_engine_compaction_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft", type="bytes_read"}[1m]))
sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv", type="flush_write_bytes"}[1m])) by (instance) + sum(rate(tikv_engine_compaction_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv", type="bytes_written"}[1m])) by (instance) + sum(rate(tikv_engine_compaction_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv", type="bytes_read"}[1m])) by(instance)
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
sum(rate(tikv_engine_compaction_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv", type="bytes_read"}[1m]))
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"rocksdb.*"}[1m])) by (instance)
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
avg(tikv_engine_bytes_per_write{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft",type="bytes_per_write_percentile99"})
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
avg(tikv_engine_bytes_per_write{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft",type="bytes_per_write_max"})
avg(tikv_engine_bytes_per_write{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv",type="bytes_per_write_percentile99"})
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
avg(tikv_engine_bytes_per_write{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv",type="bytes_per_write_max"})
histogram_quantile(0.999, sum(rate(tikv_raftstore_store_perf_context_time_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"db_mutex_lock_nanos|write_thread_wait"}[1m])) by (le, type))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
histogram_quantile(1, sum(rate(tikv_raftstore_store_perf_context_time_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"db_mutex_lock_nanos|write_thread_wait"}[1m])) by (le, type))
histogram_quantile(0.999, sum(rate(tikv_raftstore_apply_perf_context_time_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"db_mutex_lock_nanos|write_thread_wait"}[1m])) by (le, type))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
histogram_quantile(1, sum(rate(tikv_raftstore_apply_perf_context_time_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"db_mutex_lock_nanos|write_thread_wait"}[1m])) by (le, type))
sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft", type="wal_file_bytes"}[1m]))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft", type="bytes_read"}[1m])) + sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft", type="iter_bytes_read"}[1m]))
sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv", type="wal_file_bytes"}[1m]))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv", type="bytes_read"}[1m])) + sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv", type="iter_bytes_read"}[1m]))
sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv", type="flush_write_bytes"}[1m])) + sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft", type="flush_write_bytes"}[1m])) + sum(rate(tikv_engine_compaction_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv", type="bytes_written"}[1m])) + sum(rate(tikv_engine_compaction_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft", type="bytes_written"}[1m])) + sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv", type="wal_file_bytes"}[1m])) + sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft", type="wal_file_bytes"}[1m]))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
sum(rate(tikv_engine_compaction_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv", type="bytes_read"}[1m])) + sum(rate(tikv_engine_compaction_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft", type="bytes_read"}[1m])) + sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv", type="bytes_read"}[1m])) + sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft", type="bytes_read"}[1m])) + sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv", type="iter_bytes_read"}[1m])) + sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft", type="iter_bytes_read"}[1m]))
sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv", type="flush_write_bytes"}[1m])) + sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft", type="flush_write_bytes"}[1m])) + sum(rate(tikv_engine_compaction_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv", type="bytes_written"}[1m])) + sum(rate(tikv_engine_compaction_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft", type="bytes_written"}[1m]))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
sum(rate(tikv_engine_compaction_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv", type="bytes_read"}[1m])) + sum(rate(tikv_engine_compaction_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft", type="bytes_read"}[1m]))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
avg(tikv_engine_wal_file_sync_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft",type="wal_file_sync_percentile99"})
avg(tikv_engine_wal_file_sync_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft",type="wal_file_sync_max"})
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
sum(rate(tikv_coprocessor_request_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", req="index"}[1m]))
sum(rate(tikv_coprocessor_request_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", req="select"}[1m]))
histogram_quantile(0.99, sum(rate(tikv_coprocessor_request_handle_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", req=~"index"}[1m])) by (le))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
histogram_quantile(0.99, sum(rate(tikv_coprocessor_request_handle_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", req=~"select"}[1m])) by (le))
histogram_quantile(1, sum(rate(tikv_coprocessor_request_handle_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", req=~"select"}[1m])) by (le))
histogram_quantile(1, sum(rate(tikv_coprocessor_request_handle_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", req=~"index"}[1m])) by (le))
histogram_quantile(0.99, sum(rate(tikv_coprocessor_request_wait_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", req=~"select|index"}[1m])) by (le))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
histogram_quantile(0.999, sum(rate(tikv_coprocessor_request_wait_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", req=~"select|index"}[1m])) by (le))
histogram_quantile(1, sum(rate(tikv_coprocessor_request_wait_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", req=~"select|index"}[1m])) by (le))
sum(rate(tikv_futurepool_pending_task_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"cop-normal"}[1m]))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
(sum(rate(tikv_coprocessor_scan_details{tidb_cluster="$tidb_cluster", instance=~"$instance", req=~"select|index", cf="default"}[1m])) + sum(rate(tikv_coprocessor_scan_details{tidb_cluster="$tidb_cluster", instance=~"$instance", req=~"select|index", cf="write"}[1m])))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
avg(tikv_engine_get_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv",type="get_percentile99"})
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
avg(tikv_engine_get_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv",type="get_max"})
sum(rate(tikv_coprocessor_rocksdb_perf{tidb_cluster="$tidb_cluster", instance=~"$instance" ,metric="internal_delete_skipped_count"}[1m]))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
avg(tikv_engine_sst_read_micros{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv", type="sst_read_micros_percentile99"})
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
avg(tikv_engine_sst_read_micros{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv", type="sst_read_micros_max"})
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
sum(rate(tikv_raftstore_proposal_total{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"local_read|read_index"}[1m])) / sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_commit|kv_prewrite|kv_pessimistic_lock|kv_get|kv_scan|kv_batch_get|kv_batch_get_command|coprocessor"}[1m]))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv", type="block_cache_data_miss"}[1m])) / (sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", db="kv", type="block_cache_data_hit"}[1m])) + sum(rate(tikv_engine_cache_efficiency{tidb_cluster="$tidb_cluster", db="kv", type="block_cache_data_miss"}[1m])))
sum(rate(tikv_engine_locate{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv", type="number_db_next"}[1m]))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
avg(tikv_engine_seek_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv",type="seek_percentile99"})
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
avg(tikv_engine_seek_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv",type="seek_max"})
sum(rate(tikv_engine_get_served{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv", type=~"get_hit_l2_and_up|get_hit_l1"}[1m]))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"kv_prewrite|kv_commit|kv_pessimistic_lock"}[1m]))
histogram_quantile(0.99, sum(rate(tikv_scheduler_command_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"$command"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tikv_scheduler_command_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"$command"}[1m])) by (le))
sum(rate(tikv_scheduler_command_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"$command"}[1m])) / sum(rate(tikv_scheduler_command_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"$command"}[1m]))
histogram_quantile(0.99, sum(rate(tikv_scheduler_processing_read_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"$command"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tikv_scheduler_processing_read_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"$command"}[1m])) by (le))
sum(rate(tikv_scheduler_processing_read_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"$command"}[1m])) / sum(rate(tikv_scheduler_processing_read_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"$command"}[1m]))
sum(tikv_engine_size_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
sum(tikv_store_size_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", type="available"}) by (instance)
sum(tikv_store_size_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", type="capacity"}) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
avg(process_resident_memory_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
rate(node_disk_io_time_seconds_total{tidb_cluster="$tidb_cluster"}[1m])
sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv", type="wal_file_bytes"}[1m])) by (instance)
sum(rate(tikv_engine_flow_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv", type=~"bytes_read|iter_bytes_read"}[1m])) by (instance)
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type!="kv_gc"}[1m])) by (instance,type)
sum(rate(tikv_grpc_msg_fail_total{tidb_cluster="$tidb_cluster", instance=~"$instance", type!="kv_gc"}[1m])) by (instance)
sum(delta(tikv_pd_heartbeat_message_total{tidb_cluster="$tidb_cluster", instance=~"$instance", type="noop"}[1m])) by (instance) < 1
sum(rate(tikv_critical_error_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance, type)
sum(tikv_raftstore_region_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="leader"}) by (instance)
delta(tikv_raftstore_region_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="leader"}[30s]) < -10
sum(tikv_raftstore_region_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="region"}) by (instance)
sum(rate(tikv_critical_error_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance, type)
sum(rate(tikv_scheduler_too_busy_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
sum(rate(tikv_channel_full_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance, type)
sum(rate(tikv_coprocessor_request_error{tidb_cluster="$tidb_cluster", instance=~"$instance", type='full'}[1m])) by (instance)
avg(tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", type="write_stall_percentile99"}) by (instance)
sum(rate(tikv_server_report_failure_msg_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type,instance,store_id)
sum(rate(tikv_storage_engine_async_request_total{tidb_cluster="$tidb_cluster", instance=~"$instance", status!~"success|all"}[1m])) by (instance, status)
sum(rate(tikv_scheduler_stage_total{tidb_cluster="$tidb_cluster", instance=~"$instance", stage=~"snapshot_err|prepare_write_err"}[1m])) by (instance, stage)
sum(rate(tikv_coprocessor_request_error{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance, reason)
sum(rate(tikv_grpc_msg_fail_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance, type)
sum(delta(tikv_raftstore_region_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="leader"}[1m])) by (instance)
sum(tikv_raftstore_leader_missing{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
sum(tikv_engine_size_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (type)
sum(tikv_engine_size_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
sum(rate(tikv_channel_full_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance, type)
sum(rate(tikv_channel_full_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance, type)
histogram_quantile(0.99, sum(rate(tikv_raftstore_region_size_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tikv_raftstore_region_size_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
sum(rate(tikv_raftstore_region_size_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) / sum(rate(tikv_raftstore_region_size_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type!="kv_gc"}[1m])) by (type)
sum(rate(tikv_grpc_msg_fail_total{tidb_cluster="$tidb_cluster", instance=~"$instance", type!="kv_gc"}[1m])) by (type)
histogram_quantile(0.99, sum(rate(tikv_grpc_msg_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type!="kv_gc"}[1m])) by (le, type))
sum(rate(tikv_grpc_msg_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type) / sum(rate(tikv_grpc_msg_duration_seconds_count[1m])) by (type)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"raftstore_.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"raftstore_.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"apply_[0-9]+"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"sched_.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"grpc.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"cop_normal.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"cop_high.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"cop_low.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"store_read_norm.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"store_read_high.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"store_read_low.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"split_check"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"rocksdb.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"gc_worker.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"snapshot_worker"}[1m])) by (instance)
sum(rate(tikv_pd_request_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
sum(rate(tikv_pd_request_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type) / sum(rate(tikv_pd_request_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
sum(rate(tikv_pd_heartbeat_message_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
sum(rate(tikv_pd_validate_peer_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (type)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type=~"coprocessor|kv_get|kv_batch_get|kv_prewrite|kv_commit"}[1m])) by (instance, type)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"store_read_norm.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"store_read_high.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"store_read_low.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"cop_normal.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"cop_high.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"cop_low.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"grpc.*"}[1m])) by (instance)
rate(node_disk_io_time_seconds_total{tidb_cluster="$tidb_cluster"}[1m])
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
sum(rate(tikv_grpc_msg_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type!="kv_gc"}[1m])) by (instance,type)
rate(node_disk_io_time_seconds_total{tidb_cluster="$tidb_cluster"}[1m])
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"grpc.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"raftstore_.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"apply_[0-9]+"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"sched_worker.*"}[1m])) by (instance)
sum(tikv_raftstore_region_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="leader"}) by (instance)
delta(tikv_raftstore_region_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="leader"}[30s]) < -10
histogram_quantile(0.999999, sum(rate(tikv_raftstore_append_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tikv_raftstore_append_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
sum(rate(tikv_raftstore_append_log_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) / sum(rate(tikv_raftstore_append_log_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
histogram_quantile(0.999999, sum(rate(tikv_raftstore_request_wait_time_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
avg(tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft",type="write_max"})
avg(tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft",type="write_percentile99"})
avg(tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft",type="write_percentile95"})
avg(tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft",type="write_average"})
histogram_quantile(0.999999, sum(rate(tikv_raftstore_event_duration_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance, type))
sum(rate(tikv_channel_full_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance, type)
avg(tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft", type="write_stall_max"})
avg(tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft", type="write_stall_percentile99"})
avg(tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft", type="write_stall_percentile95"})
avg(tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft", type="write_stall_average"})
histogram_quantile(0.99, sum(rate(tikv_raftstore_append_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tikv_raftstore_append_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
sum(rate(tikv_raftstore_append_log_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) / sum(rate(tikv_raftstore_append_log_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
histogram_quantile(0.99, sum(rate(tikv_raftstore_append_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
histogram_quantile(0.99, sum(rate(tikv_raftstore_commit_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tikv_raftstore_commit_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
sum(rate(tikv_raftstore_commit_log_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) / sum(rate(tikv_raftstore_commit_log_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
histogram_quantile(0.99, sum(rate(tikv_raftstore_commit_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
sum(rate(tikv_scheduler_too_busy_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance)
sum(rate(tikv_channel_full_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance, type)
sum(rate(tikv_coprocessor_request_error{tidb_cluster="$tidb_cluster", instance=~"$instance", type='full'}[1m])) by (instance)
avg(tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", type="write_stall_percentile99"}) by (instance)
sum(tikv_scheduler_contex_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
sum(rate(tikv_channel_full_total{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (instance, type)
avg(tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", type="write_stall_max"}) by (db)
avg(tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", type="write_stall_percentile99"}) by (db)
avg(tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", type="write_stall_percentile95"}) by (db)
avg(tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", type="write_stall_average"}) by (db)
histogram_quantile(0.99, sum(rate(tikv_grpc_msg_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type!="kv_gc"}[1m])) by (le, type))
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"grpc.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"cop_normal.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"cop_high.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"cop_low.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"store_read_norm.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"store_read_high.*"}[1m])) by (instance)
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"store_read_low.*"}[1m])) by (instance)
histogram_quantile(0.9999, sum(rate(tikv_coprocessor_request_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le,req))
histogram_quantile(0.99, sum(rate(tikv_coprocessor_request_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le,req))
histogram_quantile(0.95, sum(rate(tikv_coprocessor_request_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le,req))
 sum(rate(tikv_coprocessor_request_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (req) / sum(rate(tikv_coprocessor_request_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (req)
histogram_quantile(0.9999, sum(rate(tikv_coprocessor_request_wait_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le,req))
histogram_quantile(0.99, sum(rate(tikv_coprocessor_request_wait_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le,req))
histogram_quantile(0.95, sum(rate(tikv_coprocessor_request_wait_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le,req))
 sum(rate(tikv_coprocessor_request_wait_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (req) / sum(rate(tikv_coprocessor_request_wait_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (req)
histogram_quantile(0.9999, avg(rate(tikv_coprocessor_scan_keys_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, req))
histogram_quantile(0.99, avg(rate(tikv_coprocessor_scan_keys_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, req))
histogram_quantile(0.95, avg(rate(tikv_coprocessor_scan_keys_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, req))
histogram_quantile(0.90, avg(rate(tikv_coprocessor_scan_keys_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, req))
histogram_quantile(0.95, sum(rate(tikv_coprocessor_request_wait_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance,req))
histogram_quantile(0.999999, sum(rate(tikv_storage_engine_async_request_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="snapshot"}[1m])) by (le))
sum(rate(tikv_storage_engine_async_request_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance", type="snapshot"}[1m])) / sum(rate(tikv_storage_engine_async_request_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="snapshot"}[1m]))
avg(tikv_engine_get_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv",type="get_max"})
avg(tikv_engine_get_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv",type="get_percentile99"})
avg(tikv_engine_get_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv",type="get_percentile95"})
avg(tikv_engine_get_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv",type="get_average"})
avg(tikv_engine_seek_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv",type="seek_max"})
avg(tikv_engine_seek_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv",type="seek_percentile99"})
avg(tikv_engine_seek_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv",type="seek_percentile95"})
avg(tikv_engine_seek_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv",type="seek_average"})
(rate(node_disk_read_time_seconds_total{tidb_cluster="$tidb_cluster"}[5m])/ rate(node_disk_reads_completed_total{tidb_cluster="$tidb_cluster"}[5m])) > 0
irate(node_disk_read_bytes_total{tidb_cluster="$tidb_cluster"}[5m]) + irate(node_disk_written_bytes_total{tidb_cluster="$tidb_cluster"}[5m]) > 0
histogram_quantile(0.99, sum(rate(tikv_grpc_msg_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type!="kv_gc"}[1m])) by (le, type, instance))
histogram_quantile(0.99, sum(rate(tikv_storage_engine_async_request_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="write"}[1m])) by (le, instance))
histogram_quantile(0.95, sum(rate(tikv_storage_engine_async_request_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="write"}[1m])) by (le, instance))
rate(tikv_storage_engine_async_request_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance", type="write"}[1m]) / rate(tikv_storage_engine_async_request_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="write"}[1m])
histogram_quantile(0.99, sum(rate(tikv_scheduler_latch_wait_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="prewrite"}[1m])) by (le, instance))
histogram_quantile(0.95, sum(rate(tikv_scheduler_latch_wait_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="prewrite"}[1m])) by (le, instance))
rate(tikv_scheduler_latch_wait_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance", type="prewrite"}[1m]) / rate(tikv_scheduler_latch_wait_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="prewrite"}[1m])
histogram_quantile(0.99, sum(rate(tikv_scheduler_latch_wait_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="commit"}[1m])) by (le, instance))
histogram_quantile(0.95, sum(rate(tikv_scheduler_latch_wait_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance", type="commit"}[1m])) by (le, instance))
rate(tikv_scheduler_latch_wait_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance", type="commit"}[1m]) / rate(tikv_scheduler_latch_wait_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance", type="commit"}[1m])
histogram_quantile(0.99, sum(rate(tikv_raftstore_append_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
histogram_quantile(0.95, sum(rate(tikv_raftstore_append_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
rate(tikv_raftstore_append_log_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]) / rate(tikv_raftstore_append_log_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])
histogram_quantile(0.99, sum(rate(tikv_raftstore_append_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
histogram_quantile(0.99, sum(rate(tikv_raftstore_commit_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tikv_raftstore_commit_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
sum(rate(tikv_raftstore_commit_log_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) / sum(rate(tikv_raftstore_commit_log_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
histogram_quantile(0.99, sum(rate(tikv_raftstore_commit_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
histogram_quantile(0.99, sum(rate(tikv_raftstore_apply_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
histogram_quantile(0.95, sum(rate(tikv_raftstore_apply_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
rate(tikv_raftstore_apply_log_duration_seconds_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]) / rate(tikv_raftstore_apply_log_duration_seconds_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])
histogram_quantile(0.99, sum(rate(tikv_raftstore_apply_log_duration_seconds_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
histogram_quantile(0.99, sum(rate(tikv_raftstore_request_wait_time_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
histogram_quantile(0.95, sum(rate(tikv_raftstore_request_wait_time_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
rate(tikv_raftstore_request_wait_time_duration_secs_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]) / rate(tikv_raftstore_request_wait_time_duration_secs_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])
histogram_quantile(0.99, sum(rate(tikv_raftstore_apply_wait_time_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
histogram_quantile(0.95, sum(rate(tikv_raftstore_apply_wait_time_duration_secs_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le, instance))
rate(tikv_raftstore_apply_wait_time_duration_secs_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]) / rate(tikv_raftstore_apply_wait_time_duration_secs_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])
avg(tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv",type="write_max"}) by (instance)
avg(tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv",type="write_percentile99"}) by (instance)
avg(tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv",type="write_percentile95"}) by (instance)
avg(tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv",type="write_average"}) by (instance)
avg(tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft",type="write_max"}) by (instance)
avg(tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft",type="write_percentile99"}) by (instance)
avg(tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft",type="write_percentile95"}) by (instance)
avg(tikv_engine_write_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft",type="write_average"}) by (instance)
rate(tikv_engine_wal_file_synced{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft"}[1m])
tikv_engine_wal_file_sync_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft",type="wal_file_sync_max"}
tikv_engine_wal_file_sync_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft",type="wal_file_sync_percentile99"}
tikv_engine_wal_file_sync_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft",type="wal_file_sync_percentile95"}
tikv_engine_wal_file_sync_micro_seconds{tidb_cluster="$tidb_cluster", instance=~"$instance", db="raft",type="wal_file_sync_average"}
avg(tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", type="write_stall_max"}) by (db)
avg(tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", type="write_stall_percentile99"}) by (db)
avg(tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", type="write_stall_percentile95"}) by (db)
avg(tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", type="write_stall_average"}) by (db)
rate(node_disk_io_time_seconds_total{tidb_cluster="$tidb_cluster"}[1m]) > 0
rate(node_disk_reads_completed_total{tidb_cluster="$tidb_cluster"}[5m]) + rate(node_disk_writes_completed_total{tidb_cluster="$tidb_cluster"}[5m])
(rate(node_disk_write_time_seconds_total{tidb_cluster="$tidb_cluster"}[5m])/ rate(node_disk_writes_completed_total{tidb_cluster="$tidb_cluster"}[5m])) > 0
irate(node_disk_read_bytes_total{tidb_cluster="$tidb_cluster"}[5m]) + irate(node_disk_written_bytes_total{tidb_cluster="$tidb_cluster"}[5m]) > 0
avg(tikv_engine_num_files_at_level{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv", level="0"}) by (instance, cf)
avg(tikv_engine_num_immutable_mem_table{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}) by (instance, cf)
tikv_engine_pending_compaction_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="$db"}
avg(tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", type="write_stall_max", db="$db"}) by (instance)
avg(tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", type="write_stall_percentile99", db="$db"}) by (instance)
avg(tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", type="write_stall_percentile95", db="$db"}) by (instance)
avg(tikv_engine_write_stall{tidb_cluster="$tidb_cluster", instance=~"$instance", type="write_stall_average", db="$db"}) by (instance)
avg(tikv_engine_block_cache_size_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance", db="kv"}) by(cf)
avg(process_resident_memory_bytes{tidb_cluster="$tidb_cluster", instance=~"$instance"}) by (instance)
histogram_quantile(0.99, sum(rate(tikv_raftstore_region_size_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
histogram_quantile(0.95, sum(rate(tikv_raftstore_region_size_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
sum(rate(tikv_raftstore_region_size_sum{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) / sum(rate(tikv_raftstore_region_size_count{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m]))
histogram_quantile(0.999999, sum(rate(tikv_raftstore_region_size_bucket{tidb_cluster="$tidb_cluster", instance=~"$instance"}[1m])) by (le))
sum(rate(tikv_thread_cpu_seconds_total{tidb_cluster="$tidb_cluster", instance=~"$instance", name=~"split_check"}[1m])) by (instance)